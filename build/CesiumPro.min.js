!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).CesiumPro={})}(this,(function(e){"use strict";class t extends Error{constructor(e){super(e),this.name="CesiumProError"}}function i(){throw new t("抽象方法无法被调用。")}function n(e,t){return t-e}t.throwInstantiationError=function(){throw new DeveloperError("This function defines an interface and should not be called directly.")},t.throwNoInstance=function(){throw new t("它的定义了一个接口，不能被以直接调用.")};class r{constructor(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}get numberOfListeners(){return this._listeners.length-this._toRemove.length}addEventListener(e,i){if("function"!=typeof e)throw new t("侦听器应该是一个函数");this._listeners.push(e),this._scopes.push(i);const n=this;return function(){n.removeEventListener(e,i)}}removeEventListener(e,i){if("function"!=typeof e)throw new t("侦听器应该是一个函数");const n=this._listeners,r=this._scopes;let o=-1;for(let t=0;t<n.length;t++)if(n[t]===e&&r[t]===i){o=t;break}return-1!==o&&(this._insideRaiseEvent?(this._toRemove.push(o),n[o]=void 0,r[o]=void 0):(n.splice(o,1),r.splice(o,1)),!0)}raise(){let e;this._insideRaiseEvent=!0;const t=this._listeners,i=this._scopes;let{length:r}=t;for(e=0;e<r;e++){const n=t[e];Cesium.defined(n)&&t[e].apply(i[e],arguments)}const o=this._toRemove;if(r=o.length,r>0){for(o.sort(n),e=0;e<r;e++){const n=o[e];t.splice(n,1),i.splice(n,1)}o.length=0}this._insideRaiseEvent=!1}}const{RequestState:o,when:s,AttributeCompression:a,BoundingSphere:l,Cartesian3:c,Credit:u,defaultValue:h,defined:d,DeveloperError:p,GeographicTilingScheme:f,WebMercatorTilingScheme:m,getJsonFromTypedArray:g,HeightmapTerrainData:y,IndexDatatype:_,OrientedBoundingBox:C,QuantizedMeshTerrainData:w,Request:b,RequestType:x,Resource:S,RuntimeError:T,TerrainProvider:A,TileAvailability:E,TileProviderError:P}=Cesium;function L(e){this.resource=e.resource,this.version=e.version,this.isHeightmap=e.isHeightmap,this.tileUrlTemplates=e.tileUrlTemplates,this.availability=e.availability,this.hasVertexNormals=e.hasVertexNormals,this.hasWaterMask=e.hasWaterMask,this.hasMetadata=e.hasMetadata,this.availabilityLevels=e.availabilityLevels,this.availabilityTilesLoaded=e.availabilityTilesLoaded,this.littleEndianExtensionSize=e.littleEndianExtensionSize,this.availabilityPromiseCache={}}function M(e){this._heightmapWidth=65,this._heightmapStructure=void 0,this._hasWaterMask=!1,this._hasVertexNormals=!1,this._ellipsoid=e.ellipsoid,this._requestVertexNormals=h(e.requestVertexNormals,!1),this._requestWaterMask=h(e.requestWaterMask,!1),this._requestMetadata=h(e.requestMetadata,!0),this._errorEvent=new r;var t=e.credit;"string"==typeof t&&(t=new u(t)),this._credit=t,this._availability=void 0;var i=s.defer();this._ready=!1,this._readyPromise=i,this._tileCredits=void 0;var n,o,a,l=this,c=this._layers=[],p="",g=[],y=0;function v(e){var t;if(!e.format)return t="The tile format is not specified in the layer.json file.",void(a=P.handleError(a,l,l._errorEvent,t,void 0,void 0,void 0,b));if(!e.tiles||0===e.tiles.length)return t="The layer.json file does not specify any tile URL templates.",void(a=P.handleError(a,l,l._errorEvent,t,void 0,void 0,void 0,b));var i=!1,r=!1,u=!1,h=!0,C=!1;if("heightmap-1.0"===e.format)C=!0,d(l._heightmapStructure)||(l._heightmapStructure={heightScale:.2,heightOffset:-1e3,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1,lowestEncodedHeight:0,highestEncodedHeight:65535}),r=!0,l._requestWaterMask=!0;else if(0!==e.format.indexOf("quantized-mesh-1."))return t='The tile format "'+e.format+'" is invalid or not supported.',void(a=P.handleError(a,l,l._errorEvent,t,void 0,void 0,void 0,b));var w,x=e.tiles,S=e.maxzoom;if(y=Math.max(y,S),e.projection&&"EPSG:4326"!==e.projection){if("EPSG:3857"!==e.projection)return t='The projection "'+e.projection+'" is invalid or not supported.',void(a=P.handleError(a,l,l._errorEvent,t,void 0,void 0,void 0,b));l._tilingScheme=new m({numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1,ellipsoid:l._ellipsoid})}else l._tilingScheme=new f({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1,ellipsoid:l._ellipsoid});if(l._levelZeroMaximumGeometricError=A.getEstimatedLevelZeroGeometricErrorForAHeightmap(l._tilingScheme.ellipsoid,l._heightmapWidth,l._tilingScheme.getNumberOfXTilesAtLevel(0)),e.scheme&&"tms"!==e.scheme&&"slippyMap"!==e.scheme)return t='The scheme "'+e.scheme+'" is invalid or not supported.',void(a=P.handleError(a,l,l._errorEvent,t,void 0,void 0,void 0,b));l._scheme=e.scheme,d(e.extensions)&&-1!==e.extensions.indexOf("octvertexnormals")?i=!0:d(e.extensions)&&-1!==e.extensions.indexOf("vertexnormals")&&(i=!0,h=!1),d(e.extensions)&&-1!==e.extensions.indexOf("watermask")&&(r=!0),d(e.extensions)&&-1!==e.extensions.indexOf("metadata")&&(u=!0);var T,M=e.metadataAvailability,D=e.available;if(d(D)&&!d(M)){T=new E(l._tilingScheme,D.length);for(var N=0;N<D.length;++N){var R=D[N],k=l._tilingScheme.getNumberOfYTilesAtLevel(N);d(g[N])||(g[N]=[]);for(var O=0;O<R.length;++O){var I=R[O],F=k-I.endY-1,G=k-I.startY-1;g[N].push([I.startX,F,I.endX,G]),T.addAvailableTileRange(N,I.startX,F,I.endX,G)}}}else d(M)&&(w=new E(l._tilingScheme,S),T=new E(l._tilingScheme,S),g[0]=[[0,0,1,0]],T.addAvailableTileRange(0,0,0,1,0));l._hasWaterMask=l._hasWaterMask||r,l._hasVertexNormals=l._hasVertexNormals||i,l._hasMetadata=l._hasMetadata||u,d(e.attribution)&&(p.length>0&&(p+=" "),p+=e.attribution),c.push(new L({resource:n,version:e.version,isHeightmap:C,tileUrlTemplates:x,availability:T,hasVertexNormals:i,hasWaterMask:r,hasMetadata:u,availabilityLevels:M,availabilityTilesLoaded:w,littleEndianExtensionSize:h}));var B=e.parentUrl;if(d(B)){if(!d(T))return console.log("A layer.json can't have a parentUrl if it does't have an available array."),s.resolve();(n=n.getDerivedResource({url:B})).appendForwardSlash();var H=(o=n.getDerivedResource({url:"layer.json"})).fetchJson();return s(H,v,_)}return s.resolve()}function _(e){var t="An error occurred while accessing "+o.url+".";a=P.handleError(a,l,l._errorEvent,t,void 0,void 0,void 0,b)}function C(e){v(e).then((function(){if(!d(a)){var e=g.length;if(e>0)for(var t=l._availability=new E(l._tilingScheme,y),i=0;i<e;++i)for(var n=g[i],r=0;r<n.length;++r){var o=n[r];t.addAvailableTileRange(i,o[0],o[1],o[2],o[3])}if(p.length>0){var s=new u(p);d(l._tileCredits)?l._tileCredits.push(s):l._tileCredits=[s]}l._ready=!0,l._readyPromise.resolve(!0)}}))}function w(e){d(e)&&404===e.statusCode?C({tilejson:"2.1.0",format:"heightmap-1.0",version:"1.0.0",scheme:"tms",tiles:["{z}/{x}/{y}.terrain?v={version}"]}):_()}function b(){s(o.fetchJson()).then(C).otherwise(w)}s(e.url).then((function(e){var t=S.createIfNeeded(e);t.appendForwardSlash(),o=(n=t).getDerivedResource({url:"layer.json"}),l._tileCredits=t.credits,b()})).otherwise((function(e){i.reject(e)}))}var D=1,N=2,R=4;function k(e){return d(e)&&0!==e.length?{Accept:"application/vnd.quantized-mesh;extensions="+e.join("-")+",application/octet-stream;q=0.9,*/*;q=0.01"}:{Accept:"application/vnd.quantized-mesh,application/octet-stream;q=0.9,*/*;q=0.01"}}function O(e,t,i,n,r,u){if(!d(r))return s.reject(new T("Terrain tile doesn't exist"));var h=r.tileUrlTemplates;if(0!==h.length){var p;if(e._scheme&&"tms"!==e._scheme)p=i;else p=e._tilingScheme.getNumberOfYTilesAtLevel(n)-i-1;var f,m,v=[];e._requestVertexNormals&&r.hasVertexNormals&&v.push(r.littleEndianExtensionSize?"octvertexnormals":"vertexnormals"),e._requestWaterMask&&r.hasWaterMask&&v.push("watermask"),e._requestMetadata&&r.hasMetadata&&v.push("metadata");var b=h[(t+p+n)%h.length],x=r.resource;d(x._ionEndpoint)&&!d(x._ionEndpoint.externalType)?(0!==v.length&&(m={extensions:v.join("-")}),f=k(void 0)):f=k(v);var S=x.getDerivedResource({url:b,templateValues:{version:r.version,z:n,x:t,y:p},queryParameters:m,headers:f,request:u});if(S.request.state!==o.ISSUED&&S.request.state!==o.ACTIVE){var A=S.fetchArrayBuffer();if(d(A))return A.then((function(o){return d(e._heightmapStructure)?function(e,t,i,n,r){var o=new Uint16Array(t,0,e._heightmapWidth*e._heightmapWidth);return new y({buffer:o,childTileMask:new Uint8Array(t,o.byteLength,1)[0],waterMask:new Uint8Array(t,o.byteLength+1,t.byteLength-o.byteLength-1),width:e._heightmapWidth,height:e._heightmapWidth,structure:e._heightmapStructure,credits:e._tileCredits})}(e,o):function(e,t,i,n,r,o){var s=o.littleEndianExtensionSize,u=0,h=3*Float64Array.BYTES_PER_ELEMENT,p=4*Float64Array.BYTES_PER_ELEMENT,f=3*Uint16Array.BYTES_PER_ELEMENT,m=Uint16Array.BYTES_PER_ELEMENT,y=3*m,v=new DataView(t),b=new c(v.getFloat64(u,!0),v.getFloat64(u+8,!0),v.getFloat64(u+16,!0));u+=h;var x=v.getFloat32(u,!0);u+=Float32Array.BYTES_PER_ELEMENT;var S=v.getFloat32(u,!0);u+=Float32Array.BYTES_PER_ELEMENT;var T=new l(new c(v.getFloat64(u,!0),v.getFloat64(u+8,!0),v.getFloat64(u+16,!0)),v.getFloat64(u+h,!0));u+=p;var A=new c(v.getFloat64(u,!0),v.getFloat64(u+8,!0),v.getFloat64(u+16,!0));u+=h;var E=v.getUint32(u,!0);u+=Uint32Array.BYTES_PER_ELEMENT;var P=new Uint16Array(t,u,3*E);u+=E*f,E>65536&&(y=3*(m=Uint32Array.BYTES_PER_ELEMENT));var L=P.subarray(0,E),M=P.subarray(E,2*E),k=P.subarray(2*E,3*E);a.zigZagDeltaDecode(L,M,k),u%m!=0&&(u+=m-u%m);var O=v.getUint32(u,!0);u+=Uint32Array.BYTES_PER_ELEMENT;var I=_.createTypedArrayFromArrayBuffer(E,t,u,3*O);u+=O*y;for(var F=0,G=I.length,B=0;B<G;++B){var H=I[B];I[B]=F-H,0===H&&++F}var z=v.getUint32(u,!0);u+=Uint32Array.BYTES_PER_ELEMENT;var U=_.createTypedArrayFromArrayBuffer(E,t,u,z);u+=z*m;var W=v.getUint32(u,!0);u+=Uint32Array.BYTES_PER_ELEMENT;var j=_.createTypedArrayFromArrayBuffer(E,t,u,W);u+=W*m;var q=v.getUint32(u,!0);u+=Uint32Array.BYTES_PER_ELEMENT;var $=_.createTypedArrayFromArrayBuffer(E,t,u,q);u+=q*m;var V=v.getUint32(u,!0);u+=Uint32Array.BYTES_PER_ELEMENT;var Y,X,J=_.createTypedArrayFromArrayBuffer(E,t,u,V);for(u+=V*m;u<v.byteLength;){var Q=v.getUint8(u,!0);u+=Uint8Array.BYTES_PER_ELEMENT;var Z=v.getUint32(u,s);if(u+=Uint32Array.BYTES_PER_ELEMENT,Q===D&&e._requestVertexNormals)Y=new Uint8Array(t,u,2*E);else if(Q===N&&e._requestWaterMask)X=new Uint8Array(t,u,Z);else if(Q===R&&e._requestMetadata){var K=v.getUint32(u,!0);if(K>0){var ee=g(new Uint8Array(t),u+Uint32Array.BYTES_PER_ELEMENT,K).available;if(d(ee))for(var te=0;te<ee.length;++te)for(var ie=i+te+1,ne=ee[te],re=e._tilingScheme.getNumberOfYTilesAtLevel(ie),oe=0;oe<ne.length;++oe){var se=ne[oe],ae=re-se.endY-1,le=re-se.startY-1;e.availability.addAvailableTileRange(ie,se.startX,ae,se.endX,le),o.availability.addAvailableTileRange(ie,se.startX,ae,se.endX,le)}}o.availabilityTilesLoaded.addAvailableTileRange(i,n,r,n,r)}u+=Z}var ce=5*e.getLevelMaximumGeometricError(i),ue=e._tilingScheme.tileXYToRectangle(n,r,i),he=C.fromRectangle(ue,x,S,e._tilingScheme.ellipsoid);return new w({center:b,minimumHeight:x,maximumHeight:S,boundingSphere:T,orientedBoundingBox:he,horizonOcclusionPoint:A,quantizedVertices:P,encodedNormals:Y,indices:I,westIndices:U,southIndices:j,eastIndices:$,northIndices:J,westSkirtHeight:ce,southSkirtHeight:ce,eastSkirtHeight:ce,northSkirtHeight:ce,childTileMask:e.availability.computeChildMaskForTile(i,n,r),waterMask:X,credits:e._tileCredits})}(e,o,n,t,i,r)}))}}}function I(e,t,i,n){if(0!==n){var r=e.availabilityLevels,o=n%r==0?n-r:(n/r|0)*r,s=1<<n-o;return{level:o,x:t/s|0,y:i/s|0}}}function F(e,t,i,n,r,o){if(!d(r.availabilityLevels))return{result:!1};for(var s,a=function(){delete r.availabilityPromiseCache[s]},l=r.availabilityTilesLoaded,c=r.availability,u=I(r,t,i,n);d(u);){if(c.isTileAvailable(u.level,u.x,u.y)&&!l.isTileAvailable(u.level,u.x,u.y)){var h;if(!o&&(s=u.level+"-"+u.x+"-"+u.y,h=r.availabilityPromiseCache[s],!d(h))){var p=new b({throttle:!1,throttleByServer:!1,type:x.TERRAIN});h=O(e,u.x,u.y,u.level,r,p),d(h)&&(r.availabilityPromiseCache[s]=h,h.then(a))}return{result:!0,promise:h}}u=I(r,u.x,u.y,u.level)}return{result:!1}}function G(e){if(!(e&&e instanceof Cesium.Viewer)){throw new t(`Expected viewer to be typeof Viewer, actual typeof was ${typeof e}`)}}function B(e,t){return null!=e?e:t}function H(e,t){if(null===e||"object"!=typeof e)return e;t=B(t,!1);const i=new e.constructor;for(const n in e)if(e.hasOwnProperty(n)){let r=e[n];t&&(r=H(r,t)),i[n]=r}return i}function z(e){return null!=e}M.prototype.requestTileGeometry=function(e,t,i,n){var r,o=this._layers,s=o.length;if(1===s)r=o[0];else for(var a=0;a<s;++a){var l=o[a];if(!d(l.availability)||l.availability.isTileAvailable(i,e,t)){r=l;break}}return O(this,e,t,i,r,n)},Object.defineProperties(M.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},hasWaterMask:{get:function(){return this._hasWaterMask&&this._requestWaterMask}},hasVertexNormals:{get:function(){return this._hasVertexNormals&&this._requestVertexNormals}},hasMetadata:{get:function(){return this._hasMetadata&&this._requestMetadata}},requestVertexNormals:{get:function(){return this._requestVertexNormals}},requestWaterMask:{get:function(){return this._requestWaterMask}},requestMetadata:{get:function(){return this._requestMetadata}},availability:{get:function(){return this._availability}}}),M.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},M.prototype.getTileDataAvailable=function(e,t,i){if(d(this._availability)){if(i>this._availability._maximumLevel)return!1;if(this._availability.isTileAvailable(i,e,t))return!0;if(!this._hasMetadata)return!1;for(var n=this._layers,r=n.length,o=0;o<r;++o){if(F(this,e,t,i,n[o],0===o).result)return}return!1}},M.prototype.loadTileDataAvailability=function(e,t,i){if(!(!d(this._availability)||i>this._availability._maximumLevel||this._availability.isTileAvailable(i,e,t))&&this._hasMetadata)for(var n=this._layers,r=n.length,o=0;o<r;++o){var s=F(this,e,t,i,n[o],0===o);if(d(s.promise))return s.promise}},M._getAvailabilityTile=I;const U=/((?:.*\/)|^)CesiumPro\.js(?:\?|#|$)/;let W,j,q;function $(e){return"undefined"==typeof document?e:(z(W)||(W=document.createElement("a")),W.href=e,W.href=W.href,W.href)}function V(e){return $(`../${e}`)}function Y(){if(z(j))return j;let e;if(e="undefined"!=typeof CESIUMPRO_BASE_URL?CESIUMPRO_BASE_URL:"object"==typeof window.define&&z(window.define.amd)&&!window.define.amd.toUrlUndefined?Cesium.getAbsoluteUri("..","core/Url.js"):function(){const e=document.getElementsByTagName("script");for(let t=0,i=e.length;t<i;++t){const i=e[t].getAttribute("src"),n=U.exec(i);if(null!==n)return n[1]}}(),!z(e))throw new t("Unable to determine CesiumPro base URL automatically, try defining a global variable called CESIUMPRO_BASE_URL.");return z(e)||(e=""),j=new Cesium.Resource({url:$(e)}),j.appendForwardSlash(),j}function X(e){return Y().getDerivedResource({url:e}).url}function J(e){z(q)||(q="object"==typeof window.define&&z(window.define.amd)&&!window.define.amd.toUrlUndefined?V:X);return q(e)}const Q={join:function(...e){const t=[];for(let i of e)i.startsWith("/")&&(i=i.substring(1)),i.endsWith("/")&&(i=i.substring(0,i.length-1)),t.push(i);return t.join("/")},buildModuleUrl:function(e){return J(e)}};Q.getCesiumProBaseUrl=Y;const{FeatureDetection:Z,isCrossOriginUrl:K}=Cesium;let ee;function te(){return z(ee)||(ee=function(e){let t=Cesium.buildModuleUrl(e);if(K(t)){const e='importScripts("'+t+'");';let i;try{i=new Blob([e],{type:"application/javascript"})}catch(t){let n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);n.append(e),i=n.getBlob("application/javascript")}t=(window.URL||window.webkitURL).createObjectURL(i)}return t}("Workers/cesiumWorkerBootstrapper.js")),ee}function ie(e){const t=new Worker(te());t.postMessage=B(t.webkitPostMessage,t.postMessage);const i={loaderConfig:{paths:{Workers:J("workers")},baseUrl:Y().url},workerModule:e._workerPath};return t.postMessage(i),t.onmessage=function(t){!function(e,t){console.log(e,t,"------complete-----")}(e,t.data)},t.postMessage(e._options),t}const{kdbush:ne,Cartesian3:re,Cartographic:oe,PointPrimitive:se,BoundingRectangle:ae,SceneMode:le,EllipsoidalOccluder:ce}=Cesium;function ue(e){return e.__pixel.x}function he(e){return e.__pixel.y}function de(e,t){const i=new ae;return se.getScreenSpaceBoundingBox(e,t,i),function(e,t){e.x-=t,e.y-=t,e.width+=2*t,e.height+=2*t}(i,this.pixelRange),i}let pe;function fe(e){if(!e.scene.globe)return;const t=Cesium.getTimestamp(),i=e.scene;if(z(pe)&&t-pe<250)return;pe=t;const n=i.canvas.clientWidth,r=i.canvas.clientHeight,o=i.camera.getPickRay(new Cesium.Cartesian2(n/2,r/2)),s=i.camera.getPickRay(new Cesium.Cartesian2(n/2+1,r/2)),a=i.globe.pick(o,i),l=i.globe.pick(s,i);if(!z(a)||!z(l))return;return new Cesium.EllipsoidGeodesic(i.globe.ellipsoid.cartesianToCartographic(a),i.globe.ellipsoid.cartesianToCartographic(l)).surfaceDistance}class me{constructor(e,i,n){if(!z(e))throw new t("longitude is required.");if(!z(i))throw new t("latitude is required.");this.lon=e,this.lat=i,this.alt=B(n,0)}get height(){return this.alt}toPixel(e){return me.toPixel(this,e)}toCartesian(){return me.toCartesian(this)}toCartographic(){return me.toCartographic(this)}getRadias(){return{lon:Cesium.Math.toRadians(this.lon),lat:Cesium.Math.toRadians(this.lat),alt:alt}}isVisible(e){return me.isVisible(this,e)}toString(){return`{lon: ${this.lon}, lat: ${this.lat}, alt: ${this.alt}}`}toJson(){return{lon:this.lon,lat:this.lat,alt:this.alt}}toArray(){return[this.lon,this.lat,this.alt]}static isVisible(e,i){if(i instanceof Cesium.Viewer)throw new t("viewer不是一个有效的Cesium.Viewer对象");if(!z(e))throw new t("point is not defined.");const n=me.toCartesian(e);if(i.scene.mode===Cesium.SceneMode.SCENE3D){if(!new Cesium.EllipsoidalOccluder(Cesium.Ellipsoid.WGS84,i.camera.position).isPointVisible(n))return!1;const t=me.toPixel(e,i.scene);if(!z(t))return!1;const r=i.canvas.width||i.canvas.clientWidth,o=i.canvas.height||i.canvas.clientHeight;return t.x>0&&t.x<r&&t.y>0&&t.y<o}if(i.scene.mode===Cesium.SceneMode.SCENE2D){const e=i.scene.camera.frustum,{positionWC:t,directionWC:r,upWC:o}=i.scene.camera,s=e.computeCullingVolume(t,r,o),a=Cesium.BoundingSphere.projectTo2D(new BoundingSphere(n,1)),l=s.computeVisibility(a);return l===Cesium.Intersect.INSIDE||l===Cesium.Intersect.INERSECTING}}static toPixel(e,i){if(!z(i))throw new t("scene未定义。");if(!z(e))throw new t("point is not defined.");const n=me.toCartesian(e);if(z(n))return Cesium.SceneTransforms.wgs84ToWindowCoordinates(i,n)}static toCartographic(e){if(!z(e))throw new t("point is not defined.");return Cesium.Cartographic.fromDegrees(e.lon,e.lat,e.alt)}static toCartesian(e,i){if(!z(e))throw new t("point is not defined.");if(e instanceof Cesium.Cartesian3)return e;if(e instanceof Cesium.Cartographic)return Cesium.Cartographic.toCartesian(e);if(e instanceof me)return Cesium.Cartesian3.fromDegrees(e.lon,e.lat,e.alt);if(e instanceof Cesium.Cartesian2){if(!i)return;const t=i.scene.camera.getPickRay(e);return i.scene.globe.pick(t,i.scene)}}static fromCartesian(e){if(!z(e))throw new t("cartesian is not defined.");const i=Cesium.Cartographic.fromCartesian(e);if(z(i))return me.fromCartographic(i)}static fromCartographic(e){if(!z(e))throw new t("cartographic is not defined.");return new me(Cesium.Math.toDegrees(e.longitude),Cesium.Math.toDegrees(e.latitude),e.height)}static fromPixel(e,i){if(!i.scene.globe)return;if(!z(e))throw new t("pixel is not defined.");if(i instanceof Cesium.Viewer==!1)throw new t("viewer不是一个有效的Cesium.Viewer对象");const n=i.scene.camera.getPickRay(e),r=i.scene.globe.pick(n,i.scene);return z(r)?me.fromCartesian(r):void 0}static fromDegrees(e,t,i){return new me(e,t,i)}static fromRadians(e,t,i){return new me(Cesium.Math.toDegrees(e),Cesium.Math.toDegrees(t),i)}static inChina(...e){if(1!==e.length){const t=+e[0],i=+e[1];return t>73.66&&t<135.05&&i>3.86&&i<53.55}{const t=e[0];if(e[0]instanceof me)return me.inChina(t.lon,t.lat)}}static fromArray(e){return new me(...e)}static fromJson(e){return new me(e.lon,e.lat,e.alt)}static isValid(e){return e instanceof me!=!1&&(!!z(e.lon)&&(!!z(e.lat)&&!!z(e.alt)))}}function ge(e){const t=e.canvas.getBoundingClientRect(),i=new Cesium.Cartesian2(t.width/2,t.height/2);return me.fromPixel(i,e)}function ye(e){if(!e.scene.globe)return{};if(e.scene.mode===Cesium.SceneMode.SCENE3D){const t=e.camera.computeViewRectangle();if(!z(t))return;return{west:Cesium.Math.toDegrees(t.west),south:Cesium.Math.toDegrees(t.south),east:Cesium.Math.toDegrees(t.east),north:Cesium.Math.toDegrees(t.north)}}const t=e.canvas.getBoundingClientRect(),i=me.fromPixel(new Cesium.Cartesian2(0,t.height/2),e)||{lon:-180},n=me.fromPixel(new Cesium.Cartesian2(t.width,t.height/2),e)||{lon:180},r=me.fromPixel(new Cesium.Cartesian2(t.width/2,0),e)||{lat:90},o=me.fromPixel(new Cesium.Cartesian2(t.width/2,t.height),e)||{lat:-90};return{west:i.lon,south:o.lat,east:n.lon,north:r.lat}}class ve{constructor(e,t){G(e),this._viewer=e,t=B(t,{});const i=B(t.items,[]);this._items=new Cesium.AssociativeArray,this._position=t.position,this._container=B(t.container,e.container),this._root=this.createMenu(),this.createItems(i),this._show=!0,this._activeSubMenu=void 0,this.parent=t.parent}get show(){return this._show}set show(e){this._show=e,this._root.style.display=e?"block":"none",this._menu.style.display=e?"block":"none"}get position(){return this._position}set position(e){if(this._position=e,this._root){const e=me.toPixel(this._position,this._viewer.scene);this._root.style.left=e.x+"px",this._root.style.top=e.y+"px"}}get(e){return this._items.values[e]}getById(e){return this._items.get(e)}add(e){if(this._items.contains(e.id))return;const t=this.createItem(e);this._items.set(t.id,t),this._menu.appendChild(t.el)}remove(e){const t=e.el;try{return this._root.removeChild(t),this._items.remove(e.id),!0}catch(e){return!1}}removeAll(){for(let e of this._items.values)this.remove(e)}createMenu(){const e=document.createElement("div");e.className="context-root";const t=document.createElement("ul");if(t.className="context-menu context-ul",e.appendChild(t),this._container.appendChild(e),this._position){const t=me.toPixel(this._position,this._viewer.scene);e.style.left=t.x+"px",e.style.top=t.y+"px"}return this._menu=t,e.oncontextmenu=function(){return!1},e}updateItemText(e,t){const i=document.getElementById(e.id+"-text");i&&(i.innerHTML=t)}updateItemDistabled(e,t){e&&e.a&&(e.disabled=t,e.a.className=t?"context-item-disabled":"context-item")}createItems(e){for(let t of e)this.add(t)}createItem(e={}){const t=document.createElement("li");t.className="context-menu";const i=document.createElement("a");i.className=e.disabled?"context-item-disabled":"context-item";const n=document.createElement("i");if(n.className=e.class,i.appendChild(n),i.innerHTML+=`<span id="${e.id}-text">${e.text}</span>`,t.appendChild(i),t.id=e.id,e.el=t,e.a=i,e.children){const n=document.createElement("i");n.className="fa fa-caret-right",i.appendChild(n);const r=new ve(this._viewer,{items:e.children,position:this._position,parent:this});t.appendChild(r._menu),r._menu.className+=" context-submenu",e.subMenu=r,r.container=e}return e.el.onmouseover=t=>{t.stopPropagation(),e.disabled||(this._activeSubMenu&&(this._activeSubMenu.show=!1),e.subMenu&&(e.subMenu.show=!0),this._activeSubMenu=e.subMenu)},e.el.onclick=t=>{t.stopPropagation(),e.disabled||(e.callback&&e.callback(e),this.show=!1,this.parent&&(this.parent.show=!1))},e}ContextMenuItem(e){}destroy(){}}function _e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function Ce(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=Math.floor(16*Math.random());return("x"===e?t:3&t|8).toString(16)}))}const we=[],{document:be}=window,xe=Object.getPrototypeOf,{slice:Se}=we,{concat:Te}=we,{push:Ae}=we,{indexOf:Ee}=we,Pe={},{toString:Le}=Pe,Me=Pe.hasOwnProperty,De=Me.toString,Ne=De.call(Object),Re={},ke=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},Oe=function(e){return null!=e&&e===e.window},Ie={type:!0,src:!0,nonce:!0,noModule:!0};function Fe(e,t,i){let n,r;const o=(i=i||be).createElement("script");if(o.text=e,t)for(n in Ie)r=t[n]||t.getAttribute&&t.getAttribute(n),r&&o.setAttribute(n,r);i.head.appendChild(o).parentNode.removeChild(o)}function Ge(e){return null==e?`${e}`:"object"==typeof e||"function"==typeof e?Pe[Le.call(e)]||"object":typeof e}const Be="3.4.1";var He=function(e,t){return new He.fn.init(e,t)};const ze=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function Ue(e){const t=!!e&&"length"in e&&e.length,i=Ge(e);return!ke(e)&&!Oe(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}He.fn=He.prototype={jquery:Be,constructor:He,length:0,toArray(){return Se.call(this)},get(e){return null==e?Se.call(this):e<0?this[e+this.length]:this[e]},pushStack(e){const t=He.merge(this.constructor(),e);return t.prevObject=this,t},each(e){return He.each(this,e)},map(e){return this.pushStack(He.map(this,((t,i)=>e.call(t,i,t))))},slice(){return this.pushStack(Se.apply(this,arguments))},first(){return this.eq(0)},last(){return this.eq(-1)},eq(e){const t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end(){return this.prevObject||this.constructor()},push:Ae,sort:we.sort,splice:we.splice},He.extend=He.fn.extend=function(){let e,t,i,n,r,o,s=arguments[0]||{},a=1;const{length:l}=arguments;let c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||ke(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=e[t],"__proto__"!==t&&s!==n&&(c&&n&&(He.isPlainObject(n)||(r=Array.isArray(n)))?(i=s[t],o=r&&!Array.isArray(i)?[]:r||He.isPlainObject(i)?i:{},r=!1,s[t]=He.extend(c,o,n)):void 0!==n&&(s[t]=n));return s},He.extend({expando:`jQuery${(Be+Math.random()).replace(/\D/g,"")}`,isReady:!0,error(e){throw new Error(e)},noop(){},isPlainObject(e){let t,i;return!(!e||"[object Object]"!==Le.call(e))&&(t=xe(e),!t||(i=Me.call(t,"constructor")&&t.constructor,"function"==typeof i&&De.call(i)===Ne))},isEmptyObject(e){let t;for(t in e)return!1;return!0},globalEval(e,t){Fe(e,{nonce:t&&t.nonce})},each(e,t){let i,n=0;if(Ue(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:e=>null==e?"":`${e}`.replace(ze,""),makeArray(e,t){const i=t||[];return null!=e&&(Ue(Object(e))?He.merge(i,"string"==typeof e?[e]:e):Ae.call(i,e)),i},inArray:(e,t,i)=>null==t?-1:Ee.call(t,e,i),merge(e,t){const i=+t.length;let n=0,r=e.length;for(;n<i;n++)e[r++]=t[n];return e.length=r,e},grep(e,t,i){let n;const r=[];let o=0;const{length:s}=e,a=!i;for(;o<s;o++)n=!t(e[o],o),n!==a&&r.push(e[o]);return r},map(e,t,i){let n,r,o=0;const s=[];if(Ue(e))for(n=e.length;o<n;o++)r=t(e[o],o,i),null!=r&&s.push(r);else for(o in e)r=t(e[o],o,i),null!=r&&s.push(r);return Te.apply([],s)},guid:1,support:Re}),"function"==typeof Symbol&&(He.fn[Symbol.iterator]=we[Symbol.iterator]),He.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),((e,t)=>{Pe[`[object ${t}]`]=t.toLowerCase()}));const We=
/*!
     * Sizzle CSS Selector Engine v2.3.4
     * https://sizzlejs.com/
     *
     * Copyright JS Foundation and other contributors
     * Released under the MIT license
     * https://js.foundation/
     *
     * Date: 2019-04-08
     */
function(e){let t,i,n,r,o,s,a,l,c,u,h,d,p,f,m,g,y,v,_;const C="sizzle"+1*new Date,w=e.document;let b=0,x=0;const S=le(),T=le(),A=le(),E=le();let P=function(e,t){return e===t&&(h=!0),0};const L={}.hasOwnProperty;let M=[];const{pop:D}=M,N=M.push;let{push:R}=M;const{slice:k}=M,O=function(e,t){let i=0;const n=e.length;for(;i<n;i++)if(e[i]===t)return i;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",G="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B=`\\[${F}*(${G})(?:${F}*([*^$|!~]?=)${F}*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(${G}))|)${F}*\\]`,H=`:(${G})(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|${B})*)|.*)\\)|)`,z=new RegExp(`${F}+`,"g"),U=new RegExp(`^${F}+|((?:^|[^\\\\])(?:\\\\.)*)${F}+$`,"g"),W=new RegExp(`^${F}*,${F}*`),j=new RegExp(`^${F}*([>+~]|${F})${F}*`),q=new RegExp(`${F}|>`),$=new RegExp(H),V=new RegExp(`^${G}$`),Y={ID:new RegExp(`^#(${G})`),CLASS:new RegExp(`^\\.(${G})`),TAG:new RegExp(`^(${G}|[*])`),ATTR:new RegExp(`^${B}`),PSEUDO:new RegExp(`^${H}`),CHILD:new RegExp(`^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(${F}*(even|odd|(([+-]|)(\\d*)n|)${F}*(?:([+-]|)${F}*(\\d+)|))${F}*\\)|)`,"i"),bool:new RegExp(`^(?:${I})$`,"i"),needsContext:new RegExp(`^${F}*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(${F}*((?:-\\d)?\\d*)${F}*\\)|)(?=[^-]|$)`,"i")},X=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp(`\\\\([\\da-f]{1,6}${F}?|(${F})|.)`,"ig"),ie=function(e,t,i){const n=`0x${t}`-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){return t?"\0"===e?"�":`${e.slice(0,-1)}\\${e.charCodeAt(e.length-1).toString(16)} `:`\\${e}`},oe=function(){d()},se=Ce((e=>!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()),{dir:"parentNode",next:"legend"});try{R.apply(M=k.call(w.childNodes),w.childNodes),M[w.childNodes.length].nodeType}catch(e){R={apply:M.length?function(e,t){N.apply(e,k.call(t))}:function(e,t){let i=e.length,n=0;for(;e[i++]=t[n++];);e.length=i-1}}}function ae(e,t,n,r){let o,a,c,u,h,f,y,v=t&&t.ownerDocument;const b=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==b&&9!==b&&11!==b)return n;if(!r&&((t?t.ownerDocument||t:w)!==p&&d(t),t=t||p,m)){if(11!==b&&(h=K.exec(e)))if(o=h[1]){if(9===b){if(!(c=t.getElementById(o)))return n;if(c.id===o)return n.push(c),n}else if(v&&(c=v.getElementById(o))&&_(t,c)&&c.id===o)return n.push(c),n}else{if(h[2])return R.apply(n,t.getElementsByTagName(e)),n;if((o=h[3])&&i.getElementsByClassName&&t.getElementsByClassName)return R.apply(n,t.getElementsByClassName(o)),n}if(i.qsa&&!E[`${e} `]&&(!g||!g.test(e))&&(1!==b||"object"!==t.nodeName.toLowerCase())){if(y=e,v=t,1===b&&q.test(e)){for((u=t.getAttribute("id"))?u=u.replace(ne,re):t.setAttribute("id",u=C),f=s(e),a=f.length;a--;)f[a]=`#${u} ${_e(f[a])}`;y=f.join(","),v=ee.test(e)&&ye(t.parentNode)||t}try{return R.apply(n,v.querySelectorAll(y)),n}catch(t){E(e,!0)}finally{u===C&&t.removeAttribute("id")}}}return l(e.replace(U,"$1"),t,n,r)}function le(){const e=[];return function t(i,r){return e.push(`${i} `)>n.cacheLength&&delete t[e.shift()],t[`${i} `]=r}}function ce(e){return e[C]=!0,e}function ue(e){let t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){const i=e.split("|");let r=i.length;for(;r--;)n.attrHandle[i[r]]=t}function de(e,t){let i=t&&e;const n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){const i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ce((t=>(t=+t,ce(((i,n)=>{let r;const o=e([],i.length,t);let s=o.length;for(;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))})))))}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=ae.support={},o=ae.isXML=function(e){const t=e.namespaceURI,i=(e.ownerDocument||e).documentElement;return!X.test(t||i&&i.nodeName||"HTML")},d=ae.setDocument=function(e){let t,r;const s=e?e.ownerDocument||e:w;return s!==p&&9===s.nodeType&&s.documentElement?(p=s,f=p.documentElement,m=!o(p),w!==p&&(r=p.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",oe,!1):r.attachEvent&&r.attachEvent("onunload",oe)),i.attributes=ue((e=>(e.className="i",!e.getAttribute("className")))),i.getElementsByTagName=ue((e=>(e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length))),i.getElementsByClassName=Z.test(p.getElementsByClassName),i.getById=ue((e=>(f.appendChild(e).id=C,!p.getElementsByName||!p.getElementsByName(C).length))),i.getById?(n.filter.ID=function(e){const t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){const i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){const t=e.replace(te,ie);return function(e){const i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){let i,n,r,o=t.getElementById(e);if(o){if(i=o.getAttributeNode("id"),i&&i.value===e)return[o];for(r=t.getElementsByName(e),n=0;o=r[n++];)if(i=o.getAttributeNode("id"),i&&i.value===e)return[o]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){let i;const n=[];let r=0;const o=t.getElementsByTagName(e);if("*"===e){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},n.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},y=[],g=[],(i.qsa=Z.test(p.querySelectorAll))&&(ue((e=>{f.appendChild(e).innerHTML=`<a id='${C}'></a><select id='${C}-\r\\' msallowcapture=''><option selected=''></option></select>`,e.querySelectorAll("[msallowcapture^='']").length&&g.push(`[*^$]=${F}*(?:''|"")`),e.querySelectorAll("[selected]").length||g.push(`\\[${F}*(?:value|${I})`),e.querySelectorAll(`[id~=${C}-]`).length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll(`a#${C}+*`).length||g.push(".#.+[+~]")})),ue((e=>{e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";const t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push(`name${F}*[*^$|!~]?=`),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(i.matchesSelector=Z.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ue((e=>{i.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),y.push("!=",H)})),g=g.length&&new RegExp(g.join("|")),y=y.length&&new RegExp(y.join("|")),t=Z.test(f.compareDocumentPosition),_=t||Z.test(f.contains)?function(e,t){const i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},P=t?function(e,t){if(e===t)return h=!0,0;let n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===p||e.ownerDocument===w&&_(w,e)?-1:t===p||t.ownerDocument===w&&_(w,t)?1:u?O(u,e)-O(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return h=!0,0;let i,n=0;const r=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!r||!o)return e===p?-1:t===p?1:r?-1:o?1:u?O(u,e)-O(u,t):0;if(r===o)return de(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)a.unshift(i);for(;s[n]===a[n];)n++;return n?de(s[n],a[n]):s[n]===w?-1:a[n]===w?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&d(e),i.matchesSelector&&m&&!E[`${t} `]&&(!y||!y.test(t))&&(!g||!g.test(t)))try{const n=v.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){E(t,!0)}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==p&&d(e),_(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==p&&d(e);const r=n.attrHandle[t.toLowerCase()];let o=r&&L.call(n.attrHandle,t.toLowerCase())?r(e,t,!m):void 0;return void 0!==o?o:i.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ae.escape=function(e){return`${e}`.replace(ne,re)},ae.error=function(e){throw new Error(`Syntax error, unrecognized expression: ${e}`)},ae.uniqueSort=function(e){let t;const n=[];let r=0,o=0;if(h=!i.detectDuplicates,u=!i.sortStable&&e.slice(0),e.sort(P),h){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return u=null,e},r=ae.getText=function(e){let t,i="",n=0;const{nodeType:o}=e;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=r(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)i+=r(t);return i},n=ae.selectors={cacheLength:50,createPseudo:ce,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:e=>(e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=` ${e[3]} `),e.slice(0,4)),CHILD:e=>(e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e),PSEUDO(e){let t;const i=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&$.test(i)&&(t=s(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG(e){const t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS(e){let t=S[`${e} `];return t||(t=new RegExp(`(^|${F})${e}(${F}|$)`))&&S(e,(e=>t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")))},ATTR:(e,t,i)=>function(n){let r=ae.attr(n,e);return null==r?"!="===t:!t||(r+="","="===t?r===i:"!="===t?r!==i:"^="===t?i&&0===r.indexOf(i):"*="===t?i&&r.indexOf(i)>-1:"$="===t?i&&r.slice(-i.length)===i:"~="===t?` ${r.replace(z," ")} `.indexOf(i)>-1:"|="===t&&(r===i||r.slice(0,i.length+1)===`${i}-`))},CHILD(e,t,i,n,r){const o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){let c,u,h,d,p,f,m=o!==s?"nextSibling":"previousSibling";const g=t.parentNode,y=a&&t.nodeName.toLowerCase(),v=!l&&!a;let _=!1;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&v){for(d=g,h=d[C]||(d[C]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),c=u[e]||[],p=c[0]===b&&c[1],_=p&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(_=p=0)||f.pop();)if(1===d.nodeType&&++_&&d===t){u[e]=[b,p,_];break}}else if(v&&(d=t,h=d[C]||(d[C]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),c=u[e]||[],p=c[0]===b&&c[1],_=p),!1===_)for(;(d=++p&&d&&d[m]||(_=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++_||(v&&(h=d[C]||(d[C]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),u[e]=[b,_]),d!==t)););return _-=r,_===n||_%n==0&&_/n>=0}}},PSEUDO(e,t){let i;const r=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error(`unsupported pseudo: ${e}`);return r[C]?r(t):r.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ce(((e,i)=>{let n;const o=r(e,t);let s=o.length;for(;s--;)n=O(e,o[s]),e[n]=!(i[n]=o[s])})):function(e){return r(e,0,i)}):r}},pseudos:{not:ce((e=>{const t=[],i=[],n=a(e.replace(U,"$1"));return n[C]?ce(((e,t,i,r)=>{let o;const s=n(e,null,r,[]);let a=e.length;for(;a--;)(o=s[a])&&(e[a]=!(t[a]=o))})):function(e,r,o){return t[0]=e,n(t,null,o,i),t[0]=null,!i.pop()}})),has:ce((e=>function(t){return ae(e,t).length>0})),contains:ce((e=>(e=e.replace(te,ie),function(t){return(t.textContent||r(t)).indexOf(e)>-1}))),lang:ce((e=>(V.test(e||"")||ae.error(`unsupported lang: ${e}`),e=e.replace(te,ie).toLowerCase(),function(t){let i;do{if(i=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(`${e}-`)}while((t=t.parentNode)&&1===t.nodeType);return!1}))),target(t){const i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:e=>e===f,focus:e=>e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex),enabled:me(!1),disabled:me(!0),checked(e){const t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:e=>(e.parentNode&&e.parentNode.selectedIndex,!0===e.selected),empty(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:e=>!n.pseudos.empty(e),header:e=>Q.test(e.nodeName),input:e=>J.test(e.nodeName),button(e){const t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text(e){let t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((()=>[0])),last:ge(((e,t)=>[t-1])),eq:ge(((e,t,i)=>[i<0?i+t:i])),even:ge(((e,t)=>{let i=0;for(;i<t;i+=2)e.push(i);return e})),odd:ge(((e,t)=>{let i=1;for(;i<t;i+=2)e.push(i);return e})),lt:ge(((e,t,i)=>{let n=i<0?i+t:i>t?t:i;for(;--n>=0;)e.push(n);return e})),gt:ge(((e,t,i)=>{let n=i<0?i+t:i;for(;++n<t;)e.push(n);return e}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=fe(t);function ve(){}function _e(e){let t=0;const i=e.length;let n="";for(;t<i;t++)n+=e[t].value;return n}function Ce(e,t,i){const{dir:n}=t,r=t.next,o=r||n,s=i&&"parentNode"===o,a=x++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||s)return e(t,i,r);return!1}:function(t,i,l){let c,u,h;const d=[b,a];if(l){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(h=t[C]||(t[C]={}),u=h[t.uniqueID]||(h[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=u[o])&&c[0]===b&&c[1]===a)return d[2]=c[2];if(u[o]=d,d[2]=e(t,i,l))return!0}return!1}}function we(e){return e.length>1?function(t,i,n){let r=e.length;for(;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function be(e,t,i,n,r){let o;const s=[];let a=0;const l=e.length,c=null!=t;for(;a<l;a++)(o=e[a])&&(i&&!i(o,n,r)||(s.push(o),c&&t.push(a)));return s}function xe(e,t,i,n,r,o){return n&&!n[C]&&(n=xe(n)),r&&!r[C]&&(r=xe(r,o)),ce(((o,s,a,l)=>{let c,u,h;const d=[],p=[],f=s.length,m=o||function(e,t,i){let n=0;const r=t.length;for(;n<r;n++)ae(e,t[n],i);return i}(t||"*",a.nodeType?[a]:a,[]),g=!e||!o&&t?m:be(m,d,e,a,l);let y=i?r||(o?e:f||n)?[]:s:g;if(i&&i(g,y,a,l),n)for(c=be(y,p),n(c,[],a,l),u=c.length;u--;)(h=c[u])&&(y[p[u]]=!(g[p[u]]=h));if(o){if(r||e){if(r){for(c=[],u=y.length;u--;)(h=y[u])&&c.push(g[u]=h);r(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=r?O(o,h):d[u])>-1&&(o[c]=!(s[c]=h))}}else y=be(y===s?y.splice(f,y.length):y),r?r(null,s,y,l):R.apply(s,y)}))}function Se(e){let t,i,r;const o=e.length,s=n.relative[e[0].type],a=s||n.relative[" "];let l=s?1:0;const u=Ce((e=>e===t),a,!0),h=Ce((e=>O(t,e)>-1),a,!0);let d=[function(e,i,n){const r=!s&&(n||i!==c)||((t=i).nodeType?u(e,i,n):h(e,i,n));return t=null,r}];for(;l<o;l++)if(i=n.relative[e[l].type])d=[Ce(we(d),i)];else{if(i=n.filter[e[l].type].apply(null,e[l].matches),i[C]){for(r=++l;r<o&&!n.relative[e[r].type];r++);return xe(l>1&&we(d),l>1&&_e(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(U,"$1"),i,l<r&&Se(e.slice(l,r)),r<o&&Se(e=e.slice(r)),r<o&&_e(e))}d.push(i)}return we(d)}return ve.prototype=n.filters=n.pseudos,n.setFilters=new ve,s=ae.tokenize=function(e,t){let i,r,o,s,a,l,c;const u=T[`${e} `];if(u)return t?0:u.slice(0);for(a=e,l=[],c=n.preFilter;a;){for(s in i&&!(r=W.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),i=!1,(r=j.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(U," ")}),a=a.slice(i.length)),n.filter)!(r=Y[s].exec(a))||c[s]&&!(r=c[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return t?a.length:a?ae.error(e):T(e,l).slice(0)},a=ae.compile=function(e,t){let i;const r=[],o=[];let a=A[`${e} `];if(!a){for(t||(t=s(e)),i=t.length;i--;)a=Se(t[i]),a[C]?r.push(a):o.push(a);a=A(e,function(e,t){const i=t.length>0,r=e.length>0,o=function(o,s,a,l,u){let h,f,g,y=0,v="0";const _=o&&[];let C=[];const w=c,x=o||r&&n.find.TAG("*",u),S=b+=null==w?1:Math.random()||.1,T=x.length;for(u&&(c=s===p||s||u);v!==T&&null!=(h=x[v]);v++){if(r&&h){for(f=0,s||h.ownerDocument===p||(d(h),a=!m);g=e[f++];)if(g(h,s||p,a)){l.push(h);break}u&&(b=S)}i&&((h=!g&&h)&&y--,o&&_.push(h))}if(y+=v,i&&v!==y){for(f=0;g=t[f++];)g(_,C,s,a);if(o){if(y>0)for(;v--;)_[v]||C[v]||(C[v]=D.call(l));C=be(C)}R.apply(l,C),u&&!o&&C.length>0&&y+t.length>1&&ae.uniqueSort(l)}return u&&(b=S,c=w),_};return i?ce(o):o}(o,r)),a.selector=e}return a},l=ae.select=function(e,t,i,r){let o,l,c,u,h;const d="function"==typeof e&&e,p=!r&&s(e=d.selector||e);if(i=i||[],1===p.length){if(l=p[0]=p[0].slice(0),l.length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&m&&n.relative[l[1].type]){if(!(t=(n.find.ID(c.matches[0].replace(te,ie),t)||[])[0]))return i;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=Y.needsContext.test(e)?0:l.length;o--&&(c=l[o],!n.relative[u=c.type]);)if((h=n.find[u])&&(r=h(c.matches[0].replace(te,ie),ee.test(l[0].type)&&ye(t.parentNode)||t))){if(l.splice(o,1),!(e=r.length&&_e(l)))return R.apply(i,r),i;break}}return(d||a(e,p))(r,t,!m,i,!t||ee.test(e)&&ye(t.parentNode)||t),i},i.sortStable=C.split("").sort(P).join("")===C,i.detectDuplicates=!!h,d(),i.sortDetached=ue((e=>1&e.compareDocumentPosition(p.createElement("fieldset")))),ue((e=>(e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href"))))||he("type|href|height|width",((e,t,i)=>{if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&ue((e=>(e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value"))))||he("value",((e,t,i)=>{if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((e=>null==e.getAttribute("disabled")))||he(I,((e,t,i)=>{let n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),ae}(window);He.find=We,He.expr=We.selectors,He.expr[":"]=He.expr.pseudos,He.uniqueSort=He.unique=We.uniqueSort,He.text=We.getText,He.isXMLDoc=We.isXML,He.contains=We.contains,He.escapeSelector=We.escape;const je=function(e,t,i){const n=[],r=void 0!==i;for(;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&He(e).is(i))break;n.push(e)}return n},qe=function(e,t){const i=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},$e=He.expr.match.needsContext;function Ve(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}const Ye=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Xe(e,t,i){return ke(t)?He.grep(e,((e,n)=>!!t.call(e,n,e)!==i)):t.nodeType?He.grep(e,(e=>e===t!==i)):"string"!=typeof t?He.grep(e,(e=>Ee.call(t,e)>-1!==i)):He.filter(t,e,i)}let Je;He.filter=function(e,t,i){const n=t[0];return i&&(e=`:not(${e})`),1===t.length&&1===n.nodeType?He.find.matchesSelector(n,e)?[n]:[]:He.find.matches(e,He.grep(t,(e=>1===e.nodeType)))},He.fn.extend({find(e){let t,i;const n=this.length,r=this;if("string"!=typeof e)return this.pushStack(He(e).filter((function(){for(t=0;t<n;t++)if(He.contains(r[t],this))return!0})));for(i=this.pushStack([]),t=0;t<n;t++)He.find(e,r[t],i);return n>1?He.uniqueSort(i):i},filter(e){return this.pushStack(Xe(this,e||[],!1))},not(e){return this.pushStack(Xe(this,e||[],!0))},is(e){return!!Xe(this,"string"==typeof e&&$e.test(e)?He(e):e||[],!1).length}});const Qe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(He.fn.init=function(e,t,i){let n,r;if(!e)return this;if(i=i||Je,"string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Qe.exec(e),n&&(n[1]||!t)){if(n[1]){if(t=t instanceof He?t[0]:t,He.merge(this,He.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:be,!0)),Ye.test(n[1])&&He.isPlainObject(t))for(n in t)ke(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=be.getElementById(n[2]),r&&(this[0]=r,this.length=1),this}return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e)}return e.nodeType?(this[0]=e,this.length=1,this):ke(e)?void 0!==i.ready?i.ready(e):e(He):He.makeArray(e,this)}).prototype=He.fn,Je=He(be);const Ze=/^(?:parents|prev(?:Until|All))/,Ke={children:!0,contents:!0,next:!0,prev:!0};function et(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}He.fn.extend({has(e){const t=He(e,this),i=t.length;return this.filter((function(){let e=0;for(;e<i;e++)if(He.contains(this,t[e]))return!0}))},closest(e,t){let i,n=0;const r=this.length,o=[],s="string"!=typeof e&&He(e);if(!$e.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&He.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?He.uniqueSort(o):o)},index(e){return e?"string"==typeof e?Ee.call(He(e),this[0]):Ee.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add(e,t){return this.pushStack(He.uniqueSort(He.merge(this.get(),He(e,t))))},addBack(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),He.each({parent(e){const t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:e=>je(e,"parentNode"),parentsUntil:(e,t,i)=>je(e,"parentNode",i),next:e=>et(e,"nextSibling"),prev:e=>et(e,"previousSibling"),nextAll:e=>je(e,"nextSibling"),prevAll:e=>je(e,"previousSibling"),nextUntil:(e,t,i)=>je(e,"nextSibling",i),prevUntil:(e,t,i)=>je(e,"previousSibling",i),siblings:e=>qe((e.parentNode||{}).firstChild,e),children:e=>qe(e.firstChild),contents:e=>void 0!==e.contentDocument?e.contentDocument:(Ve(e,"template")&&(e=e.content||e),He.merge([],e.childNodes))},((e,t)=>{He.fn[e]=function(i,n){let r=He.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=He.filter(n,r)),this.length>1&&(Ke[e]||He.uniqueSort(r),Ze.test(e)&&r.reverse()),this.pushStack(r)}}));const tt=/[^\x20\t\r\n\f]+/g;function it(e){return e}function nt(e){throw e}function rt(e,t,i,n){let r;try{e&&ke(r=e.promise)?r.call(e).done(t).fail(i):e&&ke(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}He.Callbacks=function(e){let t,i,n,r;e="string"==typeof e?function(e){const t={};return He.each(e.match(tt)||[],((e,i)=>{t[i]=!0})),t}(e):He.extend({},e);let o=[],s=[],a=-1;const l=function(){for(r=r||e.once,n=t=!0;s.length;a=-1)for(i=s.shift();++a<o.length;)!1===o[a].apply(i[0],i[1])&&e.stopOnFalse&&(a=o.length,i=!1);e.memory||(i=!1),t=!1,r&&(o=i?[]:"")};var c={add(){return o&&(i&&!t&&(a=o.length-1,s.push(i)),function t(i){He.each(i,((i,n)=>{ke(n)?e.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==Ge(n)&&t(n)}))}(arguments),i&&!t&&l()),this},remove(){return He.each(arguments,((e,t)=>{let i;for(;(i=He.inArray(t,o,i))>-1;)o.splice(i,1),i<=a&&a--})),this},has:e=>e?He.inArray(e,o)>-1:o.length>0,empty(){return o&&(o=[]),this},disable(){return r=s=[],o=i="",this},disabled:()=>!o,lock(){return r=s=[],i||t||(o=i=""),this},locked:()=>!!r,fireWith(e,i){return r||(i=[e,(i=i||[]).slice?i.slice():i],s.push(i),t||l()),this},fire(){return c.fireWith(this,arguments),this},fired:()=>!!n};return c},He.extend({Deferred(e){const t=[["notify","progress",He.Callbacks("memory"),He.Callbacks("memory"),2],["resolve","done",He.Callbacks("once memory"),He.Callbacks("once memory"),0,"resolved"],["reject","fail",He.Callbacks("once memory"),He.Callbacks("once memory"),1,"rejected"]];let i="pending";var n={state:()=>i,always(){return r.done(arguments).fail(arguments),this},catch:e=>n.then(null,e),pipe(){let e=arguments;return He.Deferred((i=>{He.each(t,((t,n)=>{const o=ke(e[n[4]])&&e[n[4]];r[n[1]]((function(){const e=o&&o.apply(this,arguments);e&&ke(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[`${n[0]}With`](this,o?[e]:arguments)}))})),e=null})).promise()},then(e,i,n){let r=0;function o(e,t,i,n){return function(){let s=this,a=arguments;const l=function(){let l,c;if(!(e<r)){if(l=i.apply(s,a),l===t.promise())throw new TypeError("Thenable self-resolution");c=l&&("object"==typeof l||"function"==typeof l)&&l.then,ke(c)?n?c.call(l,o(r,t,it,n),o(r,t,nt,n)):(r++,c.call(l,o(r,t,it,n),o(r,t,nt,n),o(r,t,it,t.notifyWith))):(i!==it&&(s=void 0,a=[l]),(n||t.resolveWith)(s,a))}};var c=n?l:function(){try{l()}catch(n){He.Deferred.exceptionHook&&He.Deferred.exceptionHook(n,c.stackTrace),e+1>=r&&(i!==nt&&(s=void 0,a=[n]),t.rejectWith(s,a))}};e?c():(He.Deferred.getStackHook&&(c.stackTrace=He.Deferred.getStackHook()),window.setTimeout(c))}}return He.Deferred((r=>{t[0][3].add(o(0,r,ke(n)?n:it,r.notifyWith)),t[1][3].add(o(0,r,ke(e)?e:it)),t[2][3].add(o(0,r,ke(i)?i:nt))})).promise()},promise:e=>null!=e?He.extend(e,n):n},r={};return He.each(t,((e,o)=>{const s=o[2],a=o[5];n[o[1]]=s.add,a&&s.add((()=>{i=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(o[3].fire),r[o[0]]=function(){return r[`${o[0]}With`](this===r?void 0:this,arguments),this},r[`${o[0]}With`]=s.fireWith})),n.promise(r),e&&e.call(r,r),r},when(e){let t=arguments.length,i=t;const n=Array(i),r=Se.call(arguments),o=He.Deferred(),s=function(e){return function(i){n[e]=this,r[e]=arguments.length>1?Se.call(arguments):i,--t||o.resolveWith(n,r)}};if(t<=1&&(rt(e,o.done(s(i)).resolve,o.reject,!t),"pending"===o.state()||ke(r[i]&&r[i].then)))return o.then();for(;i--;)rt(r[i],s(i),o.reject);return o.promise()}});const ot=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;He.Deferred.exceptionHook=function(e,t){window.console&&window.console.warn&&e&&ot.test(e.name)&&window.console.warn(`jQuery.Deferred exception: ${e.message}`,e.stack,t)},He.readyException=function(e){window.setTimeout((()=>{throw e}))};const st=He.Deferred();function at(){be.removeEventListener("DOMContentLoaded",at),window.removeEventListener("load",at),He.ready()}He.fn.ready=function(e){return st.then(e).catch((e=>{He.readyException(e)})),this},He.extend({isReady:!1,readyWait:1,ready(e){(!0===e?--He.readyWait:He.isReady)||(He.isReady=!0,!0!==e&&--He.readyWait>0||st.resolveWith(be,[He]))}}),He.ready.then=st.then,"complete"===be.readyState||"loading"!==be.readyState&&!be.documentElement.doScroll?window.setTimeout(He.ready):(be.addEventListener("DOMContentLoaded",at),window.addEventListener("load",at));var lt=function(e,t,i,n,r,o,s){let a=0;const l=e.length;let c=null==i;if("object"===Ge(i))for(a in r=!0,i)lt(e,t,a,i[a],!0,o,s);else if(void 0!==n&&(r=!0,ke(n)||(s=!0),c&&(s?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(He(e),i)})),t))for(;a<l;a++)t(e[a],i,s?n:n.call(e[a],a,t(e[a],i)));return r?e:c?t.call(e):l?t(e[0],i):o};const ct=/^-ms-/,ut=/-([a-z])/g;function ht(e,t){return t.toUpperCase()}function dt(e){return e.replace(ct,"ms-").replace(ut,ht)}const pt=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ft(){this.expando=He.expando+ft.uid++}ft.uid=1,ft.prototype={cache(e){let t=e[this.expando];return t||(t={},pt(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set(e,t,i){let n;const r=this.cache(e);if("string"==typeof t)r[dt(t)]=i;else for(n in t)r[dt(n)]=t[n];return r},get(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][dt(t)]},access(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove(e,t){let i;const n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(dt):(t=dt(t))in n?[t]:t.match(tt)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||He.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData(e){const t=e[this.expando];return void 0!==t&&!He.isEmptyObject(t)}};const mt=new ft,gt=new ft,yt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,vt=/[A-Z]/g;function _t(e,t,i){let n;if(void 0===i&&1===e.nodeType)if(n=`data-${t.replace(vt,"-$&").toLowerCase()}`,"string"==typeof(i=e.getAttribute(n))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===""+ +e?+e:yt.test(e)?JSON.parse(e):e)}(i)}catch(e){}gt.set(e,t,i)}else i=void 0;return i}He.extend({hasData:e=>gt.hasData(e)||mt.hasData(e),data:(e,t,i)=>gt.access(e,t,i),removeData(e,t){gt.remove(e,t)},_data:(e,t,i)=>mt.access(e,t,i),_removeData(e,t){mt.remove(e,t)}}),He.fn.extend({data(e,t){let i,n,r;const o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=gt.get(o),1===o.nodeType&&!mt.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=dt(n.slice(5)),_t(o,n,r[n])));mt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each((function(){gt.set(this,e)})):lt(this,(function(t){let i;if(o&&void 0===t)return i=gt.get(o,e),void 0!==i?i:(i=_t(o,e),void 0!==i?i:void 0);this.each((function(){gt.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData(e){return this.each((function(){gt.remove(this,e)}))}}),He.extend({queue(e,t,i){let n;if(e)return t=`${t||"fx"}queue`,n=mt.get(e,t),i&&(!n||Array.isArray(i)?n=mt.access(e,t,He.makeArray(i)):n.push(i)),n||[]},dequeue(e,t){t=t||"fx";const i=He.queue(e,t);let n=i.length,r=i.shift();const o=He._queueHooks(e,t),s=function(){He.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!n&&o&&o.empty.fire()},_queueHooks(e,t){const i=`${t}queueHooks`;return mt.get(e,i)||mt.access(e,i,{empty:He.Callbacks("once memory").add((()=>{mt.remove(e,[`${t}queue`,i])}))})}}),He.fn.extend({queue(e,t){let i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?He.queue(this[0],e):void 0===t?this:this.each((function(){const i=He.queue(this,e,t);He._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&He.dequeue(this,e)}))},dequeue(e){return this.each((function(){He.dequeue(this,e)}))},clearQueue(e){return this.queue(e||"fx",[])},promise(e,t){let i,n=1;const r=He.Deferred(),o=this;let s=this.length;const a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)i=mt.get(o[s],`${e}queueHooks`),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(t)}});const Ct=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wt=new RegExp(`^(?:([+-])=|)(${Ct})([a-z%]*)$`,"i"),bt=["Top","Right","Bottom","Left"],{documentElement:xt}=be;let St=function(e){return He.contains(e.ownerDocument,e)};const Tt={composed:!0};xt.getRootNode&&(St=function(e){return He.contains(e.ownerDocument,e)||e.getRootNode(Tt)===e.ownerDocument});const At=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&St(e)&&"none"===He.css(e,"display")},Et=function(e,t,i,n){let r,o;const s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in r=i.apply(e,n||[]),t)e.style[o]=s[o];return r};function Pt(e,t,i,n){let r,o,s=20;const a=n?function(){return n.cur()}:function(){return He.css(e,t,"")};let l=a(),c=i&&i[3]||(He.cssNumber[t]?"":"px"),u=e.nodeType&&(He.cssNumber[t]||"px"!==c&&+l)&&wt.exec(He.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)He.style(e,t,u+c),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),u/=o;u*=2,He.style(e,t,u+c),i=i||[]}return i&&(u=+u||+l||0,r=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=u,n.end=r)),r}const Lt={};function Mt(e){let t;const i=e.ownerDocument,{nodeName:n}=e;let r=Lt[n];return r||(t=i.body.appendChild(i.createElement(n)),r=He.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),Lt[n]=r,r)}function Dt(e,t){let i,n;const r=[];let o=0;const{length:s}=e;for(;o<s;o++)n=e[o],n.style&&(i=n.style.display,t?("none"===i&&(r[o]=mt.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&At(n)&&(r[o]=Mt(n))):"none"!==i&&(r[o]="none",mt.set(n,"display",i)));for(o=0;o<s;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}He.fn.extend({show(){return Dt(this,!0)},hide(){return Dt(this)},toggle(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){At(this)?He(this).show():He(this).hide()}))}});const Nt=/^(?:checkbox|radio)$/i,Rt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,kt=/^$|^module$|\/(?:java|ecma)script/i,Ot={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function It(e,t){let i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&Ve(e,t)?He.merge([e],i):i}function Ft(e,t){let i=0;const n=e.length;for(;i<n;i++)mt.set(e[i],"globalEval",!t||mt.get(t[i],"globalEval"))}Ot.optgroup=Ot.option,Ot.tbody=Ot.tfoot=Ot.colgroup=Ot.caption=Ot.thead,Ot.th=Ot.td;const Gt=/<|&#?\w+;/;function Bt(e,t,i,n,r){let o,s,a,l,c,u;const h=t.createDocumentFragment(),d=[];let p=0;const f=e.length;for(;p<f;p++)if(o=e[p],o||0===o)if("object"===Ge(o))He.merge(d,o.nodeType?[o]:o);else if(Gt.test(o)){for(s=s||h.appendChild(t.createElement("div")),a=(Rt.exec(o)||["",""])[1].toLowerCase(),l=Ot[a]||Ot._default,s.innerHTML=l[1]+He.htmlPrefilter(o)+l[2],u=l[0];u--;)s=s.lastChild;He.merge(d,s.childNodes),s=h.firstChild,s.textContent=""}else d.push(t.createTextNode(o));for(h.textContent="",p=0;o=d[p++];)if(n&&He.inArray(o,n)>-1)r&&r.push(o);else if(c=St(o),s=It(h.appendChild(o),"script"),c&&Ft(s),i)for(u=0;o=s[u++];)kt.test(o.type||"")&&i.push(o);return h}!function(){const e=be.createDocumentFragment().appendChild(be.createElement("div")),t=be.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),Re.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Re.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();const Ht=/^key/,zt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ut=/^([^.]*)(?:\.(.+)|)/;function Wt(){return!0}function jt(){return!1}function qt(e,t){return e===function(){try{return be.activeElement}catch(e){}}()==("focus"===t)}function $t(e,t,i,n,r,o){let s,a;if("object"==typeof t){for(a in"string"!=typeof i&&(n=n||i,i=void 0),t)$t(e,a,i,n,t[a],o);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=jt;else if(!r)return e;return 1===o&&(s=r,r=function(e){return He().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=He.guid++)),e.each((function(){He.event.add(this,t,r,n,i)}))}function Vt(e,t,i){i?(mt.set(e,t,!1),He.event.add(e,t,{namespace:!1,handler(e){let n,r,o=mt.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(He.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=Se.call(arguments),mt.set(this,t,o),n=i(this,t),this[t](),r=mt.get(this,t),o!==r||n?mt.set(this,t,!1):r={},o!==r)return e.stopImmediatePropagation(),e.preventDefault(),r.value}else o.length&&(mt.set(this,t,{value:He.event.trigger(He.extend(o[0],He.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===mt.get(e,t)&&He.event.add(e,t,Wt)}He.event={global:{},add(e,t,i,n,r){let o,s,a,l,c,u,h,d,p,f,m;const g=mt.get(e);if(g)for(i.handler&&(o=i,i=o.handler,r=o.selector),r&&He.find.matchesSelector(xt,r),i.guid||(i.guid=He.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return void 0!==He&&He.event.triggered!==t.type?He.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(tt)||[""]).length;c--;)a=Ut.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(h=He.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=He.event.special[p]||{},u=He.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&He.expr.match.needsContext.test(r),namespace:f.join(".")},o),(d=l[p])||(d=l[p]=[],d.delegateCount=0,h.setup&&!1!==h.setup.call(e,n,f,s)||e.addEventListener&&e.addEventListener(p,s)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),He.event.global[p]=!0)},remove(e,t,i,n,r){let o,s,a,l,c,u,h,d,p,f,m;const g=mt.hasData(e)&&mt.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(tt)||[""]).length;c--;)if(a=Ut.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(h=He.event.special[p]||{},p=(n?h.delegateType:h.bindType)||p,d=l[p]||[],a=a[2]&&new RegExp(`(^|\\.)${f.join("\\.(?:.*\\.|)")}(\\.|$)`),s=o=d.length;o--;)u=d[o],!r&&m!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,f,g.handle)||He.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)He.event.remove(e,p+t[c],i,n,!0);He.isEmptyObject(l)&&mt.remove(e,"handle events")}},dispatch(e){const t=He.event.fix(e);let i,n,r,o,s,a;const l=new Array(arguments.length),c=(mt.get(this,"events")||{})[t.type]||[],u=He.event.special[t.type]||{};for(l[0]=t,i=1;i<arguments.length;i++)l[i]=arguments[i];if(t.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(a=He.event.handlers.call(this,t,c),i=0;(o=a[i++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,n=0;(s=o.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!1!==s.namespace&&!t.rnamespace.test(s.namespace)||(t.handleObj=s,t.data=s.data,r=((He.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,l),void 0!==r&&!1===(t.result=r)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers(e,t){let i,n,r,o,s;const a=[],{delegateCount:l}=t;let c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],s={},i=0;i<l;i++)n=t[i],r=`${n.selector} `,void 0===s[r]&&(s[r]=n.needsContext?He(r,this).index(c)>-1:He.find(r,this,null,[c]).length),s[r]&&o.push(n);o.length&&a.push({elem:c,handlers:o})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp(e,t){Object.defineProperty(He.Event.prototype,e,{enumerable:!0,configurable:!0,get:ke(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:e=>e[He.expando]?e:new He.Event(e),special:{load:{noBubble:!0},click:{setup(e){const t=this||e;return Nt.test(t.type)&&t.click&&Ve(t,"input")&&Vt(t,"click",Wt),!1},trigger(e){const t=this||e;return Nt.test(t.type)&&t.click&&Ve(t,"input")&&Vt(t,"click"),!0},_default(e){const{target:t}=e;return Nt.test(t.type)&&t.click&&Ve(t,"input")&&mt.get(t,"click")||Ve(t,"a")}},beforeunload:{postDispatch(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},He.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},He.Event=function(e,t){if(!(this instanceof He.Event))return new He.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Wt:jt,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&He.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[He.expando]=!0},He.Event.prototype={constructor:He.Event,isDefaultPrevented:jt,isPropagationStopped:jt,isImmediatePropagationStopped:jt,isSimulated:!1,preventDefault(){const e=this.originalEvent;this.isDefaultPrevented=Wt,e&&!this.isSimulated&&e.preventDefault()},stopPropagation(){const e=this.originalEvent;this.isPropagationStopped=Wt,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation(){const e=this.originalEvent;this.isImmediatePropagationStopped=Wt,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},He.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which(e){const{button:t}=e;return null==e.which&&Ht.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&zt.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},He.event.addProp),He.each({focus:"focusin",blur:"focusout"},((e,t)=>{He.event.special[e]={setup(){return Vt(this,e,qt),!1},trigger(){return Vt(this,e),!0},delegateType:t}})),He.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},((e,t)=>{He.event.special[e]={delegateType:t,bindType:t,handle(e){let i;const n=e.relatedTarget,{handleObj:r}=e;return n&&(n===this||He.contains(this,n))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}})),He.fn.extend({on(e,t,i,n){return $t(this,e,t,i,n)},one(e,t,i,n){return $t(this,e,t,i,n,1)},off(e,t,i){let n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,He(e.delegateTarget).off(n.namespace?`${n.origType}.${n.namespace}`:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=jt),this.each((function(){He.event.remove(this,e,i,t)}))}});const Yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Xt=/<script|<style|<link/i,Jt=/checked\s*(?:[^=]|=\s*.checked.)/i,Qt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Zt(e,t){return Ve(e,"table")&&Ve(11!==t.nodeType?t:t.firstChild,"tr")&&He(e).children("tbody")[0]||e}function Kt(e){return e.type=`${null!==e.getAttribute("type")}/${e.type}`,e}function ei(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function ti(e,t){let i,n,r,o,s,a,l,c;if(1===t.nodeType){if(mt.hasData(e)&&(o=mt.access(e),s=mt.set(t,o),c=o.events,c))for(r in delete s.handle,s.events={},c)for(i=0,n=c[r].length;i<n;i++)He.event.add(t,r,c[r][i]);gt.hasData(e)&&(a=gt.access(e),l=He.extend({},a),gt.set(t,l))}}function ii(e,t){const i=t.nodeName.toLowerCase();"input"===i&&Nt.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function ni(e,t,i,n){let r,o,s,a,l,c;t=Te.apply([],t);let u=0;const h=e.length,d=h-1,p=t[0],f=ke(p);if(f||h>1&&"string"==typeof p&&!Re.checkClone&&Jt.test(p))return e.each((function(r){const o=e.eq(r);f&&(t[0]=p.call(this,r,o.html())),ni(o,t,i,n)}));if(h&&(r=Bt(t,e[0].ownerDocument,!1,e,n),o=r.firstChild,1===r.childNodes.length&&(r=o),o||n)){for(s=He.map(It(r,"script"),Kt),a=s.length;u<h;u++)l=r,u!==d&&(l=He.clone(l,!0,!0),a&&He.merge(s,It(l,"script"))),i.call(e[u],l,u);if(a)for(c=s[s.length-1].ownerDocument,He.map(s,ei),u=0;u<a;u++)l=s[u],kt.test(l.type||"")&&!mt.access(l,"globalEval")&&He.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?He._evalUrl&&!l.noModule&&He._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")}):Fe(l.textContent.replace(Qt,""),l,c))}return e}function ri(e,t,i){let n;const r=t?He.filter(t,e):e;let o=0;for(;null!=(n=r[o]);o++)i||1!==n.nodeType||He.cleanData(It(n)),n.parentNode&&(i&&St(n)&&Ft(It(n,"script")),n.parentNode.removeChild(n));return e}He.extend({htmlPrefilter:e=>e.replace(Yt,"<$1></$2>"),clone(e,t,i){let n,r,o,s;const a=e.cloneNode(!0),l=St(e);if(!(Re.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||He.isXMLDoc(e)))for(s=It(a),o=It(e),n=0,r=o.length;n<r;n++)ii(o[n],s[n]);if(t)if(i)for(o=o||It(e),s=s||It(a),n=0,r=o.length;n<r;n++)ti(o[n],s[n]);else ti(e,a);return s=It(a,"script"),s.length>0&&Ft(s,!l&&It(e,"script")),a},cleanData(e){let t,i,n;const{special:r}=He.event;let o=0;for(;void 0!==(i=e[o]);o++)if(pt(i)){if(t=i[mt.expando]){if(t.events)for(n in t.events)r[n]?He.event.remove(i,n):He.removeEvent(i,n,t.handle);i[mt.expando]=void 0}i[gt.expando]&&(i[gt.expando]=void 0)}}}),He.fn.extend({detach(e){return ri(this,e,!0)},remove(e){return ri(this,e)},text(e){return lt(this,(function(e){return void 0===e?He.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append(){return ni(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){Zt(this,e).appendChild(e)}}))},prepend(){return ni(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){const t=Zt(this,e);t.insertBefore(e,t.firstChild)}}))},before(){return ni(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after(){return ni(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty(){let e,t=0;for(;null!=(e=this[t]);t++)1===e.nodeType&&(He.cleanData(It(e,!1)),e.textContent="");return this},clone(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return He.clone(this,e,t)}))},html(e){return lt(this,(function(e){let t=this[0]||{},i=0;const n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Xt.test(e)&&!Ot[(Rt.exec(e)||["",""])[1].toLowerCase()]){e=He.htmlPrefilter(e);try{for(;i<n;i++)t=this[i]||{},1===t.nodeType&&(He.cleanData(It(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith(){const e=[];return ni(this,arguments,(function(t){const i=this.parentNode;He.inArray(this,e)<0&&(He.cleanData(It(this)),i&&i.replaceChild(t,this))}),e)}}),He.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},((e,t)=>{He.fn[e]=function(e){let i;const n=[],r=He(e),o=r.length-1;let s=0;for(;s<=o;s++)i=s===o?this:this.clone(!0),He(r[s])[t](i),Ae.apply(n,i.get());return this.pushStack(n)}}));const oi=new RegExp(`^(${Ct})(?!px)[a-z%]+$`,"i"),si=function(e){let t=e.ownerDocument.defaultView;return t&&t.opener||(t=window),t.getComputedStyle(e)},ai=new RegExp(bt.join("|"),"i");function li(e,t,i){let n,r,o,s;const{style:a}=e;return(i=i||si(e))&&(s=i.getPropertyValue(t)||i[t],""!==s||St(e)||(s=He.style(e,t)),!Re.pixelBoxStyles()&&oi.test(s)&&ai.test(t)&&(n=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=r,a.maxWidth=o)),void 0!==s?`${s}`:s}function ci(e,t){return{get(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(!l)return;a.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",xt.appendChild(a).appendChild(l);const e=window.getComputedStyle(l);i="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),n=36===t(e.width),l.style.position="absolute",r=12===t(l.offsetWidth/3),xt.removeChild(a),l=null}function t(e){return Math.round(parseFloat(e))}let i,n,r,o,s;var a=be.createElement("div"),l=be.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",Re.clearCloneStyle="content-box"===l.style.backgroundClip,He.extend(Re,{boxSizingReliable:()=>(e(),n),pixelBoxStyles:()=>(e(),o),pixelPosition:()=>(e(),i),reliableMarginLeft:()=>(e(),s),scrollboxSize:()=>(e(),r)}))}();const ui=["Webkit","Moz","ms"],hi=be.createElement("div").style,di={};function pi(e){const t=He.cssProps[e]||di[e];return t||(e in hi?e:di[e]=function(e){const t=e[0].toUpperCase()+e.slice(1);let i=ui.length;for(;i--;)if((e=ui[i]+t)in hi)return e}(e)||e)}const fi=/^(none|table(?!-c[ea]).+)/,mi=/^--/,gi={position:"absolute",visibility:"hidden",display:"block"},yi={letterSpacing:"0",fontWeight:"400"};function vi(e,t,i){const n=wt.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function _i(e,t,i,n,r,o){let s="width"===t?1:0,a=0,l=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=He.css(e,i+bt[s],!0,r)),n?("content"===i&&(l-=He.css(e,`padding${bt[s]}`,!0,r)),"margin"!==i&&(l-=He.css(e,`border${bt[s]}Width`,!0,r))):(l+=He.css(e,`padding${bt[s]}`,!0,r),"padding"!==i?l+=He.css(e,`border${bt[s]}Width`,!0,r):a+=He.css(e,`border${bt[s]}Width`,!0,r));return!n&&o>=0&&(l+=Math.max(0,Math.ceil(e[`offset${t[0].toUpperCase()}${t.slice(1)}`]-o-l-a-.5))||0),l}function Ci(e,t,i){const n=si(e);let r=(!Re.boxSizingReliable()||i)&&"border-box"===He.css(e,"boxSizing",!1,n),o=r,s=li(e,t,n);const a=`offset${t[0].toUpperCase()}${t.slice(1)}`;if(oi.test(s)){if(!i)return s;s="auto"}return(!Re.boxSizingReliable()&&r||"auto"===s||!parseFloat(s)&&"inline"===He.css(e,"display",!1,n))&&e.getClientRects().length&&(r="border-box"===He.css(e,"boxSizing",!1,n),o=a in e,o&&(s=e[a])),s=parseFloat(s)||0,`${s+_i(e,t,i||(r?"border":"content"),o,n,s)}px`}function wi(e,t,i,n,r){return new wi.prototype.init(e,t,i,n,r)}let bi,xi;He.extend({cssHooks:{opacity:{get(e,t){if(t){const t=li(e,"opacity");return""===t?"1":t}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style(e,t,i,n){if(!e||3===e.nodeType||8===e.nodeType||!e.style)return;let r,o,s;const a=dt(t),l=mi.test(t),{style:c}=e;if(l||(t=pi(a)),s=He.cssHooks[t]||He.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(e,!1,n))?r:c[t];o=typeof i,"string"===o&&(r=wt.exec(i))&&r[1]&&(i=Pt(e,t,r),o="number"),null!=i&&i==i&&("number"!==o||l||(i+=r&&r[3]||(He.cssNumber[a]?"":"px")),Re.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(l?c.setProperty(t,i):c[t]=i))},css(e,t,i,n){let r,o,s;const a=dt(t);return mi.test(t)||(t=pi(a)),s=He.cssHooks[t]||He.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,i)),void 0===r&&(r=li(e,t,n)),"normal"===r&&t in yi&&(r=yi[t]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),He.each(["height","width"],((e,t)=>{He.cssHooks[t]={get(e,i,n){if(i)return!fi.test(He.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ci(e,t,n):Et(e,gi,(()=>Ci(e,t,n)))},set(e,i,n){let r;const o=si(e),s=!Re.scrollboxSize()&&"absolute"===o.position,a=(s||n)&&"border-box"===He.css(e,"boxSizing",!1,o);let l=n?_i(e,t,n,a,o):0;return a&&s&&(l-=Math.ceil(e[`offset${t[0].toUpperCase()}${t.slice(1)}`]-parseFloat(o[t])-_i(e,t,"border",!1,o)-.5)),l&&(r=wt.exec(i))&&"px"!==(r[3]||"px")&&(e.style[t]=i,i=He.css(e,t)),vi(0,i,l)}}})),He.cssHooks.marginLeft=ci(Re.reliableMarginLeft,((e,t)=>{if(t)return`${parseFloat(li(e,"marginLeft"))||e.getBoundingClientRect().left-Et(e,{marginLeft:0},(()=>e.getBoundingClientRect().left))}px`})),He.each({margin:"",padding:"",border:"Width"},((e,t)=>{He.cssHooks[e+t]={expand(i){let n=0;const r={},o="string"==typeof i?i.split(" "):[i];for(;n<4;n++)r[e+bt[n]+t]=o[n]||o[n-2]||o[0];return r}},"margin"!==e&&(He.cssHooks[e+t].set=vi)})),He.fn.extend({css(e,t){return lt(this,((e,t,i)=>{let n,r;const o={};let s=0;if(Array.isArray(t)){for(n=si(e),r=t.length;s<r;s++)o[t[s]]=He.css(e,t[s],!1,n);return o}return void 0!==i?He.style(e,t,i):He.css(e,t)}),e,t,arguments.length>1)}}),He.Tween=wi,wi.prototype={constructor:wi,init(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||He.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(He.cssNumber[i]?"":"px")},cur(){const e=wi.propHooks[this.prop];return e&&e.get?e.get(this):wi.propHooks._default.get(this)},run(e){let t;const i=wi.propHooks[this.prop];return this.options.duration?this.pos=t=He.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):wi.propHooks._default.set(this),this}},wi.prototype.init.prototype=wi.prototype,wi.propHooks={_default:{get(e){let t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=He.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set(e){He.fx.step[e.prop]?He.fx.step[e.prop](e):1!==e.elem.nodeType||!He.cssHooks[e.prop]&&null==e.elem.style[pi(e.prop)]?e.elem[e.prop]=e.now:He.style(e.elem,e.prop,e.now+e.unit)}}},wi.propHooks.scrollTop=wi.propHooks.scrollLeft={set(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},He.easing={linear:e=>e,swing:e=>.5-Math.cos(e*Math.PI)/2,_default:"swing"},He.fx=wi.prototype.init,He.fx.step={};const Si=/^(?:toggle|show|hide)$/,Ti=/queueHooks$/;function Ai(){xi&&(!1===be.hidden&&window.requestAnimationFrame?window.requestAnimationFrame(Ai):window.setTimeout(Ai,He.fx.interval),He.fx.tick())}function Ei(){return window.setTimeout((()=>{bi=void 0})),bi=Date.now()}function Pi(e,t){let i,n=0;const r={height:e};for(t=t?1:0;n<4;n+=2-t)i=bt[n],r[`margin${i}`]=r[`padding${i}`]=e;return t&&(r.opacity=r.width=e),r}function Li(e,t,i){let n;const r=(Mi.tweeners[t]||[]).concat(Mi.tweeners["*"]);let o=0;const{length:s}=r;for(;o<s;o++)if(n=r[o].call(i,t,e))return n}function Mi(e,t,i){let n,r,o=0;const{length:s}=Mi.prefilters,a=He.Deferred().always((()=>{delete l.elem}));var l=function(){if(r)return!1;const t=bi||Ei(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0);let o=0;const{length:s}=c.tweens;for(;o<s;o++)c.tweens[o].run(n);return a.notifyWith(e,[c,n,i]),n<1&&s?i:(s||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:He.extend({},t),opts:He.extend(!0,{specialEasing:{},easing:He.easing._default},i),originalProperties:t,originalOptions:i,startTime:bi||Ei(),duration:i.duration,tweens:[],createTween(t,i){const n=He.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop(t){let i=0;const n=t?c.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)c.tweens[i].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}});const{props:u}=c;for(!function(e,t){let i,n,r,o,s;for(i in e)if(n=dt(i),r=t[n],o=e[i],Array.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),s=He.cssHooks[n],s&&"expand"in s)for(i in o=s.expand(o),delete e[n],o)i in e||(e[i]=o[i],t[i]=r);else t[n]=r}(u,c.opts.specialEasing);o<s;o++)if(n=Mi.prefilters[o].call(c,e,u,c.opts),n)return ke(n.stop)&&(He._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return He.map(u,Li,c),ke(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),He.fx.timer(He.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}let Di;He.Animation=He.extend(Mi,{tweeners:{"*":[function(e,t){const i=this.createTween(e,t);return Pt(i.elem,e,wt.exec(t),i),i}]},tweener(e,t){let i;ke(e)?(t=e,e=["*"]):e=e.match(tt);let n=0;const{length:r}=e;for(;n<r;n++)i=e[n],Mi.tweeners[i]=Mi.tweeners[i]||[],Mi.tweeners[i].unshift(t)},prefilters:[function(e,t,i){let n,r,o,s,a,l,c,u;const h="width"in t||"height"in t,d=this,p={},{style:f}=e;let m=e.nodeType&&At(e),g=mt.get(e,"fxshow");for(n in i.queue||(s=He._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always((()=>{d.always((()=>{s.unqueued--,He.queue(e,"fx").length||s.empty.fire()}))}))),t)if(r=t[n],Si.test(r)){if(delete t[n],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;m=!0}p[n]=g&&g[n]||He.style(e,n)}if(l=!He.isEmptyObject(t),l||!He.isEmptyObject(p))for(n in h&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],c=g&&g.display,null==c&&(c=mt.get(e,"display")),u=He.css(e,"display"),"none"===u&&(c?u=c:(Dt([e],!0),c=e.style.display||c,u=He.css(e,"display"),Dt([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===He.css(e,"float")&&(l||(d.done((()=>{f.display=c})),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always((()=>{f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=mt.access(e,"fxshow",{display:c}),o&&(g.hidden=!m),m&&Dt([e],!0),d.done((()=>{for(n in m||Dt([e]),mt.remove(e,"fxshow"),p)He.style(e,n,p[n])}))),l=Li(m?g[n]:0,n,d),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter(e,t){t?Mi.prefilters.unshift(e):Mi.prefilters.push(e)}}),He.speed=function(e,t,i){const n=e&&"object"==typeof e?He.extend({},e):{complete:i||!i&&t||ke(e)&&e,duration:e,easing:i&&t||t&&!ke(t)&&t};return He.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in He.fx.speeds?n.duration=He.fx.speeds[n.duration]:n.duration=He.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){ke(n.old)&&n.old.call(this),n.queue&&He.dequeue(this,n.queue)},n},He.fn.extend({fadeTo(e,t,i,n){return this.filter(At).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate(e,t,i,n){const r=He.isEmptyObject(e),o=He.speed(t,i,n),s=function(){const t=Mi(this,He.extend({},e),o);(r||mt.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop(e,t,i){const n=function(e){const{stop:t}=e;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){let t=!0,r=null!=e&&`${e}queueHooks`;const{timers:o}=He,s=mt.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&Ti.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(i),t=!1,o.splice(r,1));!t&&i||He.dequeue(this,e)}))},finish(e){return!1!==e&&(e=e||"fx"),this.each((function(){let t;const i=mt.get(this),n=i[`${e}queue`],r=i[`${e}queueHooks`],{timers:o}=He,s=n?n.length:0;for(i.finish=!0,He.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),He.each(["toggle","show","hide"],((e,t)=>{const i=He.fn[t];He.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(Pi(t,!0),e,n,r)}})),He.each({slideDown:Pi("show"),slideUp:Pi("hide"),slideToggle:Pi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},((e,t)=>{He.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),He.timers=[],He.fx.tick=function(){let e,t=0;const{timers:i}=He;for(bi=Date.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||He.fx.stop(),bi=void 0},He.fx.timer=function(e){He.timers.push(e),He.fx.start()},He.fx.interval=13,He.fx.start=function(){xi||(xi=!0,Ai())},He.fx.stop=function(){xi=null},He.fx.speeds={slow:600,fast:200,_default:400},He.fn.delay=function(e,t){return e=He.fx&&He.fx.speeds[e]||e,t=t||"fx",this.queue(t,((t,i)=>{const n=window.setTimeout(t,e);i.stop=function(){window.clearTimeout(n)}}))},function(){let e=be.createElement("input");const t=be.createElement("select").appendChild(be.createElement("option"));e.type="checkbox",Re.checkOn=""!==e.value,Re.optSelected=t.selected,e=be.createElement("input"),e.value="t",e.type="radio",Re.radioValue="t"===e.value}();const{attrHandle:Ni}=He.expr;He.fn.extend({attr(e,t){return lt(this,He.attr,e,t,arguments.length>1)},removeAttr(e){return this.each((function(){He.removeAttr(this,e)}))}}),He.extend({attr(e,t,i){let n,r;const o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?He.prop(e,t,i):(1===o&&He.isXMLDoc(e)||(r=He.attrHooks[t.toLowerCase()]||(He.expr.match.bool.test(t)?Di:void 0)),void 0!==i?null===i?void He.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,`${i}`),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:(n=He.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set(e,t){if(!Re.radioValue&&"radio"===t&&Ve(e,"input")){const i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr(e,t){let i,n=0;const r=t&&t.match(tt);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),Di={set:(e,t,i)=>(!1===t?He.removeAttr(e,i):e.setAttribute(i,i),i)},He.each(He.expr.match.bool.source.match(/\w+/g),((e,t)=>{const i=Ni[t]||He.find.attr;Ni[t]=function(e,t,n){let r,o;const s=t.toLowerCase();return n||(o=Ni[s],Ni[s]=r,r=null!=i(e,t,n)?s:null,Ni[s]=o),r}}));const Ri=/^(?:input|select|textarea|button)$/i,ki=/^(?:a|area)$/i;function Oi(e){return(e.match(tt)||[]).join(" ")}function Ii(e){return e.getAttribute&&e.getAttribute("class")||""}function Fi(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(tt)||[]}He.fn.extend({prop(e,t){return lt(this,He.prop,e,t,arguments.length>1)},removeProp(e){return this.each((function(){delete this[He.propFix[e]||e]}))}}),He.extend({prop(e,t,i){let n,r;const o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&He.isXMLDoc(e)||(t=He.propFix[t]||t,r=He.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get(e){const t=He.find.attr(e,"tabindex");return t?parseInt(t,10):Ri.test(e.nodeName)||ki.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Re.optSelected||(He.propHooks.selected={get(e){const t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set(e){const t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),He.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){He.propFix[this.toLowerCase()]=this})),He.fn.extend({addClass(e){let t,i,n,r,o,s,a,l=0;if(ke(e))return this.each((function(t){He(this).addClass(e.call(this,t,Ii(this)))}));if(t=Fi(e),t.length)for(;i=this[l++];)if(r=Ii(i),n=1===i.nodeType&&` ${Oi(r)} `,n){for(s=0;o=t[s++];)n.indexOf(` ${o} `)<0&&(n+=`${o} `);a=Oi(n),r!==a&&i.setAttribute("class",a)}return this},removeClass(e){let t,i,n,r,o,s,a,l=0;if(ke(e))return this.each((function(t){He(this).removeClass(e.call(this,t,Ii(this)))}));if(!arguments.length)return this.attr("class","");if(t=Fi(e),t.length)for(;i=this[l++];)if(r=Ii(i),n=1===i.nodeType&&` ${Oi(r)} `,n){for(s=0;o=t[s++];)for(;n.indexOf(` ${o} `)>-1;)n=n.replace(` ${o} `," ");a=Oi(n),r!==a&&i.setAttribute("class",a)}return this},toggleClass(e,t){const i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):ke(e)?this.each((function(i){He(this).toggleClass(e.call(this,i,Ii(this),t),t)})):this.each((function(){let t,r,o,s;if(n)for(r=0,o=He(this),s=Fi(e);t=s[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==i||(t=Ii(this),t&&mt.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":mt.get(this,"__className__")||""))}))},hasClass(e){let t,i,n=0;for(t=` ${e} `;i=this[n++];)if(1===i.nodeType&&` ${Oi(Ii(i))} `.indexOf(t)>-1)return!0;return!1}});const Gi=/\r/g;He.fn.extend({val(e){let t,i,n;const r=this[0];return arguments.length?(n=ke(e),this.each((function(i){let r;1===this.nodeType&&(r=n?e.call(this,i,He(this).val()):e,null==r?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=He.map(r,(e=>null==e?"":`${e}`))),t=He.valHooks[this.type]||He.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=He.valHooks[r.type]||He.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(Gi,""):null==i?"":i)):void 0}}),He.extend({valHooks:{option:{get(e){const t=He.find.attr(e,"value");return null!=t?t:Oi(He.text(e))}},select:{get(e){let t,i,n;const{options:r}=e,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],l=s?o+1:r.length;for(n=o<0?l:s?o:0;n<l;n++)if(i=r[n],(i.selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!Ve(i.parentNode,"optgroup"))){if(t=He(i).val(),s)return t;a.push(t)}return a},set(e,t){let i,n;const{options:r}=e,o=He.makeArray(t);let s=r.length;for(;s--;)n=r[s],(n.selected=He.inArray(He.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),He.each(["radio","checkbox"],(function(){He.valHooks[this]={set(e,t){if(Array.isArray(t))return e.checked=He.inArray(He(e).val(),t)>-1}},Re.checkOn||(He.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),Re.focusin="onfocusin"in window;const Bi=/^(?:focusinfocus|focusoutblur)$/,Hi=function(e){e.stopPropagation()};He.extend(He.event,{trigger(e,t,i,n){let r,o,s,a,l,c,u,h;const d=[i||be];let p=Me.call(e,"type")?e.type:e,f=Me.call(e,"namespace")?e.namespace.split("."):[];if(o=h=s=i=i||be,3!==i.nodeType&&8!==i.nodeType&&!Bi.test(p+He.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),l=p.indexOf(":")<0&&`on${p}`,(e=e[He.expando]?e:new He.Event(p,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp(`(^|\\.)${f.join("\\.(?:.*\\.|)")}(\\.|$)`):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:He.makeArray(t,[e]),u=He.event.special[p]||{},n||!u.trigger||!1!==u.trigger.apply(i,t))){if(!n&&!u.noBubble&&!Oe(i)){for(a=u.delegateType||p,Bi.test(a+p)||(o=o.parentNode);o;o=o.parentNode)d.push(o),s=o;s===(i.ownerDocument||be)&&d.push(s.defaultView||s.parentWindow||window)}for(r=0;(o=d[r++])&&!e.isPropagationStopped();)h=o,e.type=r>1?a:u.bindType||p,c=(mt.get(o,"events")||{})[e.type]&&mt.get(o,"handle"),c&&c.apply(o,t),c=l&&o[l],c&&c.apply&&pt(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=p,n||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(d.pop(),t)||!pt(i)||l&&ke(i[p])&&!Oe(i)&&(s=i[l],s&&(i[l]=null),He.event.triggered=p,e.isPropagationStopped()&&h.addEventListener(p,Hi),i[p](),e.isPropagationStopped()&&h.removeEventListener(p,Hi),He.event.triggered=void 0,s&&(i[l]=s)),e.result}},simulate(e,t,i){const n=He.extend(new He.Event,i,{type:e,isSimulated:!0});He.event.trigger(n,null,t)}}),He.fn.extend({trigger(e,t){return this.each((function(){He.event.trigger(e,t,this)}))},triggerHandler(e,t){const i=this[0];if(i)return He.event.trigger(e,t,i,!0)}}),Re.focusin||He.each({focus:"focusin",blur:"focusout"},((e,t)=>{const i=function(e){He.event.simulate(t,e.target,He.event.fix(e))};He.event.special[t]={setup(){const n=this.ownerDocument||this,r=mt.access(n,t);r||n.addEventListener(e,i,!0),mt.access(n,t,(r||0)+1)},teardown(){const n=this.ownerDocument||this,r=mt.access(n,t)-1;r?mt.access(n,t,r):(n.removeEventListener(e,i,!0),mt.remove(n,t))}}}));const{location:zi}=window;let Ui=Date.now();const Wi=/\?/;He.parseXML=function(e){let t;if(!e||"string"!=typeof e)return null;try{t=(new window.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||He.error(`Invalid XML: ${e}`),t};const ji=/\[\]$/,qi=/\r?\n/g,$i=/^(?:submit|button|image|reset|file)$/i,Vi=/^(?:input|select|textarea|keygen)/i;function Yi(e,t,i,n){let r;if(Array.isArray(t))He.each(t,((t,r)=>{i||ji.test(e)?n(e,r):Yi(`${e}[${"object"==typeof r&&null!=r?t:""}]`,r,i,n)}));else if(i||"object"!==Ge(t))n(e,t);else for(r in t)Yi(`${e}[${r}]`,t[r],i,n)}He.param=function(e,t){let i;const n=[],r=function(e,t){const i=ke(t)?t():t;n[n.length]=`${encodeURIComponent(e)}=${encodeURIComponent(null==i?"":i)}`};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!He.isPlainObject(e))He.each(e,(function(){r(this.name,this.value)}));else for(i in e)Yi(i,e[i],t,r);return n.join("&")},He.fn.extend({serialize(){return He.param(this.serializeArray())},serializeArray(){return this.map((function(){const e=He.prop(this,"elements");return e?He.makeArray(e):this})).filter((function(){const{type:e}=this;return this.name&&!He(this).is(":disabled")&&Vi.test(this.nodeName)&&!$i.test(e)&&(this.checked||!Nt.test(e))})).map((function(e,t){const i=He(this).val();return null==i?null:Array.isArray(i)?He.map(i,(e=>({name:t.name,value:e.replace(qi,"\r\n")}))):{name:t.name,value:i.replace(qi,"\r\n")}})).get()}});const Xi=/%20/g,Ji=/#.*$/,Qi=/([?&])_=[^&]*/,Zi=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ki=/^(?:GET|HEAD)$/,en=/^\/\//,tn={},nn={},rn="*/".concat("*"),on=be.createElement("a");function sn(e){return function(t,i){let n;"string"!=typeof t&&(i=t,t="*");let r=0;const o=t.toLowerCase().match(tt)||[];if(ke(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function an(e,t,i,n){const r={},o=e===nn;function s(a){let l;return r[a]=!0,He.each(e[a]||[],((e,a)=>{const c=a(t,i,n);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)})),l}return s(t.dataTypes[0])||!r["*"]&&s("*")}function ln(e,t){let i,n;const r=He.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&He.extend(!0,e,n),e}on.href=zi.href,He.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zi.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(zi.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":rn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":He.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:(e,t)=>t?ln(ln(e,He.ajaxSettings),t):ln(He.ajaxSettings,e),ajaxPrefilter:sn(tn),ajaxTransport:sn(nn),ajax(e,t){let i,n,r,o,s,a,l,c,u,h;"object"==typeof e&&(t=e,e=void 0),t=t||{};const d=He.ajaxSetup({},t),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?He(p):He.event,m=He.Deferred(),g=He.Callbacks("once memory");let y=d.statusCode||{};const v={},_={};let C="canceled";var w={readyState:0,getResponseHeader(e){let t;if(l){if(!o)for(o={};t=Zi.exec(r);)o[`${t[1].toLowerCase()} `]=(o[`${t[1].toLowerCase()} `]||[]).concat(t[2]);t=o[`${e.toLowerCase()} `]}return null==t?null:t.join(", ")},getAllResponseHeaders:()=>l?r:null,setRequestHeader(e,t){return null==l&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,v[e]=t),this},overrideMimeType(e){return null==l&&(d.mimeType=e),this},statusCode(e){let t;if(e)if(l)w.always(e[w.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort(e){const t=e||C;return i&&i.abort(t),b(0,t),this}};if(m.promise(w),d.url=`${e||d.url||zi.href}`.replace(en,`${zi.protocol}//`),d.type=t.method||t.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(tt)||[""],null==d.crossDomain){a=be.createElement("a");try{a.href=d.url,a.href=a.href,d.crossDomain=`${on.protocol}//${on.host}`!=`${a.protocol}//${a.host}`}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=He.param(d.data,d.traditional)),an(tn,d,t,w),l)return w;for(u in c=He.event&&d.global,c&&0==He.active++&&He.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Ki.test(d.type),n=d.url.replace(Ji,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Xi,"+")):(h=d.url.slice(n.length),d.data&&(d.processData||"string"==typeof d.data)&&(n+=(Wi.test(n)?"&":"?")+d.data,delete d.data),!1===d.cache&&(n=n.replace(Qi,"$1"),h=`${Wi.test(n)?"&":"?"}_=${Ui++}${h}`),d.url=n+h),d.ifModified&&(He.lastModified[n]&&w.setRequestHeader("If-Modified-Since",He.lastModified[n]),He.etag[n]&&w.setRequestHeader("If-None-Match",He.etag[n])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?`, ${rn}; q=0.01`:""):d.accepts["*"]),d.headers)w.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(!1===d.beforeSend.call(p,w,d)||l))return w.abort();if(C="abort",g.add(d.complete),w.done(d.success),w.fail(d.error),i=an(nn,d,t,w),i){if(w.readyState=1,c&&f.trigger("ajaxSend",[w,d]),l)return w;d.async&&d.timeout>0&&(s=window.setTimeout((()=>{w.abort("timeout")}),d.timeout));try{l=!1,i.send(v,b)}catch(e){if(l)throw e;b(-1,e)}}else b(-1,"No Transport");function b(e,t,o,a){let u,h,v,_,C,b=t;l||(l=!0,s&&window.clearTimeout(s),i=void 0,r=a||"",w.readyState=e>0?4:0,u=e>=200&&e<300||304===e,o&&(_=function(e,t,i){let n,r,o,s;const{contents:a}=e,{dataTypes:l}=e;for(;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||e.converters[`${r} ${l[0]}`]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),i[o]}(d,w,o)),_=function(e,t,i,n){let r,o,s,a,l;const c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=u.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift(),o)if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[`${l} ${o}`]||c[`* ${o}`],!s)for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[`${l} ${a[0]}`]||c[`* ${a[0]}`],s)){!0===s?s=c[r]:!0!==c[r]&&(o=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:`No conversion from ${l} to ${o}`}}}return{state:"success",data:t}}(d,_,w,u),u?(d.ifModified&&(C=w.getResponseHeader("Last-Modified"),C&&(He.lastModified[n]=C),C=w.getResponseHeader("etag"),C&&(He.etag[n]=C)),204===e||"HEAD"===d.type?b="nocontent":304===e?b="notmodified":(b=_.state,h=_.data,v=_.error,u=!v)):(v=b,!e&&b||(b="error",e<0&&(e=0))),w.status=e,w.statusText=`${t||b}`,u?m.resolveWith(p,[h,b,w]):m.rejectWith(p,[w,b,v]),w.statusCode(y),y=void 0,c&&f.trigger(u?"ajaxSuccess":"ajaxError",[w,d,u?h:v]),g.fireWith(p,[w,b]),c&&(f.trigger("ajaxComplete",[w,d]),--He.active||He.event.trigger("ajaxStop")))}return w},getJSON:(e,t,i)=>He.get(e,t,i,"json"),getScript:(e,t)=>He.get(e,void 0,t,"script")}),He.each(["get","post"],((e,t)=>{He[t]=function(e,i,n,r){return ke(i)&&(r=r||n,n=i,i=void 0),He.ajax(He.extend({url:e,type:t,dataType:r,data:i,success:n},He.isPlainObject(e)&&e))}})),He._evalUrl=function(e,t){return He.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter(e){He.globalEval(e,t)}})},He.fn.extend({wrapAll(e){let t;return this[0]&&(ke(e)&&(e=e.call(this[0])),t=He(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){let e=this;for(;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner(e){return ke(e)?this.each((function(t){He(this).wrapInner(e.call(this,t))})):this.each((function(){const t=He(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap(e){const t=ke(e);return this.each((function(i){He(this).wrapAll(t?e.call(this,i):e)}))},unwrap(e){return this.parent(e).not("body").each((function(){He(this).replaceWith(this.childNodes)})),this}}),He.expr.pseudos.hidden=function(e){return!He.expr.pseudos.visible(e)},He.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},He.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};const cn={0:200,1223:204};let un=He.ajaxSettings.xhr();Re.cors=!!un&&"withCredentials"in un,Re.ajax=un=!!un,He.ajaxTransport((e=>{let t,i;if(Re.cors||un&&!e.crossDomain)return{send(n,r){let o;const s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)s.setRequestHeader(o,n[o]);t=function(e){return function(){t&&(t=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(cn[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),i=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&window.setTimeout((()=>{t&&i()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort(){t&&t()}}})),He.ajaxPrefilter((e=>{e.crossDomain&&(e.contents.script=!1)})),He.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return He.globalEval(e),e}}}),He.ajaxPrefilter("script",(e=>{void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),He.ajaxTransport("script",(e=>{if(e.crossDomain||e.scriptAttrs){let t,i;return{send(n,r){t=He("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),be.head.appendChild(t[0])},abort(){i&&i()}}}}));const hn=[],dn=/(=)\?(?=&|$)|\?\?/;He.ajaxSetup({jsonp:"callback",jsonpCallback(){const e=hn.pop()||`${He.expando}_${Ui++}`;return this[e]=!0,e}}),He.ajaxPrefilter("json jsonp",((e,t,i)=>{let n,r,o;const s=!1!==e.jsonp&&(dn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&dn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=ke(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(dn,`$1${n}`):!1!==e.jsonp&&(e.url+=`${(Wi.test(e.url)?"&":"?")+e.jsonp}=${n}`),e.converters["script json"]=function(){return o||He.error(`${n} was not called`),o[0]},e.dataTypes[0]="json",r=window[n],window[n]=function(){o=arguments},i.always((()=>{void 0===r?He(window).removeProp(n):window[n]=r,e[n]&&(e.jsonpCallback=t.jsonpCallback,hn.push(n)),o&&ke(r)&&r(o[0]),o=r=void 0})),"script"})),Re.createHTMLDocument=function(){const{body:e}=be.implementation.createHTMLDocument("");return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),He.parseHTML=function(e,t,i){if("string"!=typeof e)return[];let n,r,o;return"boolean"==typeof t&&(i=t,t=!1),t||(Re.createHTMLDocument?(n=(t=be.implementation.createHTMLDocument("")).createElement("base"),n.href=be.location.href,t.head.appendChild(n)):t=be),r=Ye.exec(e),o=!i&&[],r?[t.createElement(r[1])]:(r=Bt([e],t,o),o&&o.length&&He(o).remove(),He.merge([],r.childNodes))},He.fn.load=function(e,t,i){let n,r,o;const s=this,a=e.indexOf(" ");return a>-1&&(n=Oi(e.slice(a)),e=e.slice(0,a)),ke(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&He.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){o=arguments,s.html(n?He("<div>").append(He.parseHTML(e)).find(n):e)})).always(i&&((e,t)=>{s.each((function(){i.apply(this,o||[e.responseText,t,e])}))})),this},He.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],((e,t)=>{He.fn[t]=function(e){return this.on(t,e)}})),He.expr.pseudos.animated=function(e){return He.grep(He.timers,(t=>e===t.elem)).length},He.offset={setOffset(e,t,i){let n,r,o,s,a,l,c;const u=He.css(e,"position"),h=He(e),d={};"static"===u&&(e.style.position="relative"),a=h.offset(),o=He.css(e,"top"),l=He.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1,c?(n=h.position(),s=n.top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),ke(t)&&(t=t.call(e,i,He.extend({},a))),null!=t.top&&(d.top=t.top-a.top+s),null!=t.left&&(d.left=t.left-a.left+r),"using"in t?t.using.call(e,d):h.css(d)}},He.fn.extend({offset(e){if(arguments.length)return void 0===e?this:this.each((function(t){He.offset.setOffset(this,e,t)}));let t,i;const n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position(){if(!this[0])return;let e,t,i;const n=this[0];let r={top:0,left:0};if("fixed"===He.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===He.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&(r=He(e).offset(),r.top+=He.css(e,"borderTopWidth",!0),r.left+=He.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-He.css(n,"marginTop",!0),left:t.left-r.left-He.css(n,"marginLeft",!0)}},offsetParent(){return this.map((function(){let{offsetParent:e}=this;for(;e&&"static"===He.css(e,"position");)e=e.offsetParent;return e||xt}))}}),He.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},((e,t)=>{const i="pageYOffset"===t;He.fn[e]=function(n){return lt(this,((e,n,r)=>{let o;if(Oe(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r)return o?o[t]:e[n];o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):e[n]=r}),e,n,arguments.length)}})),He.each(["top","left"],((e,t)=>{He.cssHooks[t]=ci(Re.pixelPosition,((e,i)=>{if(i)return i=li(e,t),oi.test(i)?`${He(e).position()[t]}px`:i}))})),He.each({Height:"height",Width:"width"},((e,t)=>{He.each({padding:`inner${e}`,content:t,"":`outer${e}`},((i,n)=>{He.fn[n]=function(r,o){const s=arguments.length&&(i||"boolean"!=typeof r),a=i||(!0===r||!0===o?"margin":"border");return lt(this,((t,i,r)=>{let o;return Oe(t)?0===n.indexOf("outer")?t[`inner${e}`]:t.document.documentElement[`client${e}`]:9===t.nodeType?(o=t.documentElement,Math.max(t.body[`scroll${e}`],o[`scroll${e}`],t.body[`offset${e}`],o[`offset${e}`],o[`client${e}`])):void 0===r?He.css(t,i,a):He.style(t,i,r,a)}),t,s?r:void 0,s)}}))})),He.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),((e,t)=>{He.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}})),He.fn.extend({hover(e,t){return this.mouseenter(e).mouseleave(t||e)}}),He.fn.extend({bind(e,t,i){return this.on(e,null,t,i)},unbind(e,t){return this.off(e,null,t)},delegate(e,t,i,n){return this.on(t,e,i,n)},undelegate(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),He.proxy=function(e,t){let i,n,r;if("string"==typeof t&&(i=e[t],t=e,e=i),ke(e))return n=Se.call(arguments,2),r=function(){return e.apply(t||this,n.concat(Se.call(arguments)))},r.guid=e.guid=e.guid||He.guid++,r},He.holdReady=function(e){e?He.readyWait++:He.ready(!0)},He.isArray=Array.isArray,He.parseJSON=JSON.parse,He.nodeName=Ve,He.isFunction=ke,He.isWindow=Oe,He.camelCase=dt,He.type=Ge,He.now=Date.now,He.isNumeric=function(e){const t=He.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))};class pn{constructor(e={}){const{text:t,id:i,viewer:n}=e;i&&document.getElementById(i)&&!e.reduplicate&&He(`#${i}`).remove();const r=document.createElement("div");r.id=B(i,Ce()),r.className="cursor-tip-class",r.innerHTML=t;const o=n?n.container:document.body;o.appendChild(r),this.ele=r,this._show=B(e.show,!0),this._isDestryoed=!1,this._target=o,this._id=r.id,this._text=t,this._position=void 0;const s=this;this.show=this._show,n instanceof Cesium.Viewer&&(this._handler=new Cesium.ScreenSpaceEventHandler(n.canvas),this._handler.setInputAction((e=>{s.updatePosition(e.endPosition)}),Cesium.ScreenSpaceEventType.MOUSE_MOVE))}updatePosition(e){this.ele.style.left=`${e.x+10}px`,this.ele.style.top=`${e.y+10}px`}updateText(e){this.ele.innerHTML=e}destroy(){this._isDestryoed||(this._target.removeChild(this.ele),this._handler.isDestroyed()&&this._handler.destroy(),this._isDestryoed=!0)}get show(){return this._show}set show(e){this._show=e,this.ele.style.display=e?"block":"none"}get id(){return this._id}get text(){return this._text}set text(e){this._text=e,this.updateText(e)}get position(){return this._position}set position(e){e.x&&e.y?(this._position=e,this.updatePosition(e)):console.warn("CursorTip:设置了一个无效的位置，将被忽略.")}}function fn(e,t){let i;const n={"y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()},r=Object.keys(n);for(const t of r)i=new RegExp(`(${t})`).exec(e),i&&(e=e.replace(i[1],1===i[1].length?n[t]:n[t].padStart(i[1].length,"0")));return e}function mn(){return!0}function gn(e,t){function i(){}const n=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertyNames(Object.getPrototypeOf(e))];for(var r of n)"function"==typeof e[r]&&(e[r]=i);e.isDestroyed=mn}window.Date.prototype.format=function(e){fn(e,this)};class yn{constructor(e){this._options=e,this._id=B(e.id,_e()),this._primitive=null,this._oldPrimitive=null,this._definedChanged=new r,this._clampToGround=B(!!e.clampToGround,!1),this._show=B(!!e.show,!0),this._removed=!1,this._allowPicking=B(e.allowPicking,!0),this._property=B(e,e.property)}get id(){return this._id}get property(){return this._property}get allowPicking(){return this._allowPicking}set allowPicking(e){!!e!==this._allowPicking&&(this._allowPicking=e,this.updatePrimitive&&this.updatePrimitive())}get clampToGround(){return this._clampToGround}set clampToGround(e){if(e!==this._clampToGround){this.oldPrimitive=this.primitive;const t=Object.assign({},this._options,{clampToGround:e,asynchronous:!1});this._primitive=new this.constructor(t).primitive}this._clampToGround=e}get show(){return this._show}set show(e){e!==this._show&&(this.definedChanged.raise("show",v,this._show),this._show=e,this.primitive&&(this.primitive.show=e))}get primitive(){return this._primitive}get definedChanged(){return this._definedChanged}get readyPromise(){return this.primitive?this.primitive.readyPromise:new Primise}get material(){if(this.primitive)return this.primitive.appearance.material}toJson(){z(this.primitive)}update(){}updateAttribute(e,t){if(this.isDestroyed())return;if(!this.primitive)return;const i=this.primitive.appearance.material;if(!i)return;const n=i.uniforms;n&&(n[e]=t)}addTo(e){z(this.primitive)&&(this._viewer=e,e.graphicGroup.add(this))}zoomTo(){}remove(){if(z(this.primitive))return this._viewer?(this.group.remove(this),this):void 0}isDestroyed(){return!1}destroy(){this.primitive&&!this.primitive.isDestroyed()&&(this.primitive.destroy(),this.primitive=void 0),Cesium.destroyObject(this)}}const{AssociativeArray:vn}=Cesium;class _n{constructor(e){this.values=new vn,this.id=_e(),this.viewer=e}add(e){e instanceof _n&&this.values.set(e.id,e),e instanceof yn&&(this.values.set(e.id,e),e.primitive&&this.viewer.primitives.add(e.primitive),e._viewer=this.viewer,e.group=this)}get(e){return this.values.get(e)}remove(e){this.values.remove(e.id),e instanceof _n&&e.clear(),e.primitive&&this.viewer.primitives.remove(e.primitive),e.destroy()}removeById(e){const t=this.values.get(e);this.remove(t)}has(e){return this.values.contains(e)}update(e){const t=this.values._array;for(let i of t)z(i.oldPrimitive)&&(this.viewer.primitives.remove(i.oldPrimitive),this.viewer.primitives.add(i.primitive),i.oldPrimitive=null),i.update(e)}clear(){const e=this.values._array;this.values.removeAll();for(let t of e)t.primitive&&this.viewer.primitives.remove(t.primitive)}}const Cn="uniform samplerCube u_cubeMap;\n  varying vec3 v_texCoord;\n  void main()\n  {\n  vec4 color = textureCube(u_cubeMap, normalize(v_texCoord));\n  gl_FragColor = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);\n  }\n  ",wn="attribute vec3 position;\n  varying vec3 v_texCoord;\n  uniform mat3 u_rotateMatrix;\n  void main()\n  {\n  vec3 p = czm_viewRotation * u_rotateMatrix * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));\n  gl_Position = czm_projection * vec4(p, 1.0);\n  v_texCoord = position.xyz;\n  }\n  ",{defaultValue:bn,destroyObject:xn,Matrix4:Sn,DrawCommand:Tn,BoxGeometry:An,Cartesian3:En,defined:Pn,GeometryPipeline:Ln,Transforms:Mn,VertexFormat:Dn,BufferUsage:Nn,CubeMap:Rn,loadCubeMap:kn,RenderState:On,VertexArray:In,BlendingState:Fn,SceneMode:Gn,ShaderProgram:Bn,ShaderSource:Hn,Matrix3:zn}=Cesium;const Un=Object.freeze({LEFT:-1,RIGHT:1,NONE:0,TOP:-10,BOTTOM:10}),{Cartesian2:Wn,Rectangle:jn,GeographicProjection:qn,Ellipsoid:$n}=Cesium,Vn=Cesium.Math;function Yn(e){e=B(e,B.EMPTY_OBJECT),this._ellipsoid=B(e.ellipsoid,$n.WGS84),this._rectangle=B(e.rectangle,jn.MAX_VALUE),this._projection=new qn(this._ellipsoid),this._numberOfLevelZeroTilesX=36,this._numberOfLevelZeroTilesY=18,this._intervalOfZeorLevel=B(e.intervalOfZeorLevel,16)}Object.defineProperties(Yn.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),Yn.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},Yn.prototype.modifyLevel=function(e){return e<3?0:e<6?1:void 0},Yn.prototype.getDelatXY=function(e){const t=this._intervalOfZeorLevel;return{dx:t/2**e,dy:t/2**e}},Yn.prototype.getLonLatValuee=function(e,t,i){const n=this.getDelatXY(e);return{lon:n.dx*t-180,lat:90-n.dy*i}},Yn.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},Yn.prototype.rectangleToNativeRectangle=function(e,t){const i=Vn.toDegrees(e.west),n=Vn.toDegrees(e.south),r=Vn.toDegrees(e.east),o=Vn.toDegrees(e.north);return z(t)?(t.west=i,t.south=n,t.east=r,t.north=o,t):new jn(i,n,r,o)},Yn.prototype.tileXYToNativeRectangle=function(e,t,i,n){const r=this.tileXYToRectangle(e,t,i,n);return r.west=Vn.toDegrees(r.west),r.south=Vn.toDegrees(r.south),r.east=Vn.toDegrees(r.east),r.north=Vn.toDegrees(r.north),r},Yn.prototype.tileXYToRectangle=function(e,t,i,n){var r=this._rectangle,o=this.getNumberOfXTilesAtLevel(i),s=this.getNumberOfYTilesAtLevel(i),a=r.width/o,l=e*a+r.west,c=(e+1)*a+r.west,u=r.height/s,h=r.north-t*u,d=r.north-(t+1)*u;return z(n)||(n=new jn(l,d,c,h)),n.west=l,n.south=d,n.east=c,n.north=h,n},Yn.prototype.positionToTileXY=function(e,t,i){var n=this._rectangle;if(jn.contains(n,e)){var r=this.getNumberOfXTilesAtLevel(t),o=this.getNumberOfYTilesAtLevel(t),s=n.width/r,a=n.height/o,l=e.longitude;n.east<n.west&&(l+=Vn.TWO_PI);var c=(l-n.west)/s|0;c>=r&&(c=r-1);var u=(n.north-e.latitude)/a|0;return u>=o&&(u=o-1),z(i)?(i.x=c,i.y=u,i):new Wn(c,u)}};const{CesiumTerrainProvider:Xn,when:Jn,TerrainProvider:Qn,Resource:Zn,CustomDataSource:Kn,Cartesian3:er,Entity:tr,Color:ir,Rectangle:nr}=Cesium;function rr(e){let t=[];const i=[e.bounds.west,e.bounds.south,e.bounds.east,e.bounds.north];return"EPSG:4326"===e.projection.toUpperCase()&&(t=[i[0],i[1],i[0],i[3],i[2],i[3],i[2],i[1],i[0],i[1]]),new tr({polyline:{positions:er.fromRadiansArray(t),material:ir.fromRandom({alpha:1}),width:3,clampToGround:!0}})}function or(e,t){const i=Zn.createIfNeeded(t);i.appendForwardSlash();const n=i.getDerivedResource({url:"layer.json"});return new Promise(((t,i)=>{Jn(n.fetchJson()).then((i=>{e.projection=i.projection,e.bounds=nr.fromDegrees(...i.valid_bounds),t(!0)}))}))}function sr(e,t,i=!0){let n;t.scene.globe.ellipsoid;const r=t.camera.getPickRay(e);n=t.scene.globe.pick(r,t.scene);return function(e){if(!e)return!1;if(e.primitive instanceof Cesium.Model||e.primitive instanceof Cesium.Cesium3DTileset)return!0;return!1}(t.scene.pick(e))&&i&&(t.scene.pickPositionSupported?n=t.scene.pickPosition(e)||n:console.warn("This browser does not support pickPosition.")),n}const ar=52.35987755982988,lr=3.141592653589793,cr=6378245,ur=.006693421622965943;function hr(e,t){let i=this.transformLng(e-105,t-35),n=this.transformLat(e-105,t-35);const r=t/180*lr;let o=Math.sin(r);o=1-ur*o*o;const s=Math.sqrt(o);return i=180*i/(cr/s*Math.cos(r)*lr),n=180*n/(cr*(1-ur)/(o*s)*lr),[i,n]}const dr={};function pr(e,t=!1){const i=`_${e}`;return{configurable:t,get(){return this[i]},set(t){const n=this[i];t!==n&&(this[i]=t,this._definitionChanged.raise(e,t,n))}}}dr.get=function(e="EPSG:3857",i){const n=e.toUpperCase();if("EPSG:3857"===n)return new Cesium.WebMercatorTilingScheme(i);if("EPSG:4326"===n)return new Cesium.GeographicTilingScheme(i);throw new t("未知的坐标系.")},dr.BD09ToGCJ02=function(e,t){const i=+e-.0065,n=+t-.006,r=Math.sqrt(i*i+n*n)-2e-5*Math.sin(n*ar),o=Math.atan2(n,i)-3e-6*Math.cos(i*ar);return[r*Math.cos(o),r*Math.sin(o)]},dr.GCJ02ToBD09=function(e,t){t=+t,e=+e;const i=Math.sqrt(e*e+t*t)+2e-5*Math.sin(t*ar),n=Math.atan2(t,e)+3e-6*Math.cos(e*ar);return[i*Math.cos(n)+.0065,i*Math.sin(n)+.006]},dr.WGS84ToGCJ02=function(e,t){if(t=+t,e=+e,me.inChina(e,t)){const i=hr(e,t);return[e+i[0],t+i[1]]}return[e,t]},dr.GCJ02ToWGS84=function(e,t){if(t=+t,e=+e,me.inChina(e,t)){const i=hr(e,t);return[2*e-(e+i[0]),2*t-(t+i[1])]}return[e,t]};class fr{constructor(e={}){this._definitionChange=new r,this._propertyNames=[];for(const t in e)e.hasOwnProperty(t)&&(this[`_${t}`]=e[t],this._propertyNames.push(t),Object.defineProperty(this,t,pr(t)))}get propertyNames(){return this._propertyNames}addProperty(e,i){if(!z(e))throw new t("key is reqiured.");if(this.propertyNames.includes(e))throw new t(`${e}has be a registered property.`);this[`_${e}`]=i,this._propertyNames.push(e),Object.defineProperty(this,e,pr(e))}removeProperty(e){if(!z(e))throw new t("key is reqiured.");if(this.propertyNames.includes(e)){delete this[e],delete this[`_${e}`];const t=this.propertyNames.indexOf(e);this.propertyNames.slice(t,1),this.definitionChanged.raise(e)}}toString(){const e=this.toJson();return JSON.stringify(e)}toJson(){const e={};for(const t of this.propertyNames)e[t]=this[t];return e}hasProperty(e){if(!z(e))throw new t("key is reqiured.");return this.propertyNames.includes(e)}get definitionChanged(){return this._definitionChanged}destroy(){this._definitionChanged=void 0,this._propertyNames=void 0}}function mr(e,t=!0){G(e),e.scene.screenSpaceCameraController.enableRotate=t}const{Color:gr}=Cesium;class yr{constructor(){}static pointColor=gr.AQUA;static fillColor=gr.AQUA;static strokeColor=gr.AQUA}class vr extends Cesium.UrlTemplateImageryProvider{constructor(e){"string"==typeof e&&(e={url:e}),e.getFeatureInfoFormats=B(e.getFeatureInfoFormats,vr.defaultFeatureInfoFormats),super(e)}get url(){return super.url}get minimumLevel(){return super.minimumLevel}get maximumLevel(){return super.maximumLevel}get rectangle(){return super.rectangle}get errorEvent(){return super.errorEvent}get ready(){return super.ready}get readyPromise(){return super.readyPromise}get tilingScheme(){return super.tilingScheme}get enablePickFeatures(){return super.enablePickFeatures}set enablePickFeatures(e){super.enablePickFeatures=e}pickFeatures(e,t,i,n,r){return super.pickFeatures(e,t,i,n,r)}requestImage(e,t,i,n){return super.requestImage(e,t,i,n)}}function _r(){return new vr({url:Q.buildModuleUrl("assets/tiles/{z}/{x}/{y}.png"),maximumLevel:4})}vr.defaultFeatureInfoFormats=Object.freeze([Object.freeze(new Cesium.GetFeatureInfoFormat("json","application/json")),Object.freeze(new Cesium.GetFeatureInfoFormat("xml","text/xml")),Object.freeze(new Cesium.GetFeatureInfoFormat("text","text/html"))]);const{defined:Cr,defaultValue:wr,ColorMaterialProperty:br,ConstantPositionProperty:xr,ConstantProperty:Sr,DataSource:Tr,PolygonGraphics:Ar,PolylineGraphics:Er,EntityCluster:Pr,PinBuilder:Lr,createGuid:Mr,Cartesian3:Dr,PointGraphics:Nr,ArcType:Rr,PolygonHierarchy:kr,Color:Or,EntityCollection:Ir,HeightReference:Fr,when:Gr,Resource:Br,describe:Hr,Event:zr}=Cesium,Ur={small:24,medium:48,large:64},Wr={},jr={},qr={"urn:ogc:def:crs:OGC:1.3:CRS84":ho,"EPSG:4326":ho,"urn:ogc:def:crs:EPSG::4326":ho},$r=["title","description","marker-size","marker-symbol","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"],Vr={Feature:Qr,FeatureCollection:function(e,t,i,n,r){for(var o=t.features,s=0,a=o.length;s<a;s++)Qr(e,o[s],void 0,n,r)},GeometryCollection:Zr,LineString:ro,MultiLineString:oo,MultiPoint:to,MultiPolygon:lo,Point:eo,Polygon:ao,Topology:co},Yr={GeometryCollection:Zr,LineString:ro,MultiLineString:oo,MultiPoint:to,MultiPolygon:lo,Point:eo,Polygon:ao,Topology:co};function Xr(e,t){for(var i=new Array(e.length),n=0;n<e.length;n++)i[n]=t(e[n]);return i}function Jr(e,t,i){var n=e.id;if(Cr(n)&&"Feature"===e.type){for(var r=2,o=n;Cr(t.getById(o));)o=n+"_"+r,r++;n=o}else n=Mr();var s=t.getOrCreateEntity(n),a=e.properties;if(Cr(a)){var l;s.properties=a;var c=a.title;if(Cr(c))s.name=c,l="title";else{var u=Number.MAX_VALUE;for(var h in a)if(a.hasOwnProperty(h)&&a[h]){var d=h.toLowerCase();if(u>1&&"title"===d){u=1,l=h;break}u>2&&"name"===d?(u=2,l=h):u>3&&/title/i.test(h)?(u=3,l=h):u>4&&/name/i.test(h)&&(u=4,l=h)}Cr(l)&&(s.name=a[l])}var p=a.description;null!==p&&(s.description=Cr(p)?new Sr(p):i(a,l))}return s}function Qr(e,i,n,r,o){if(null!==i.geometry){if(!Cr(i.geometry))throw new t("feature.geometry is required.");var s=i.geometry.type,a=Yr[s];if(!Cr(a))throw new t("Unknown geometry type: "+s);a(e,i,i.geometry,r,o)}else Jr(i,e._entityCollection,o.describe)}function Zr(e,i,n,r,o){for(var s=n.geometries,a=0,l=s.length;a<l;a++){var c=s[a],u=c.type,h=Yr[u];if(!Cr(h))throw new t("Unknown geometry type: "+u);h(e,i,c,r,o)}}function Kr(e,t,i,n,r){let o=r.pointSize,s=r.pointColor;const a=t.properties;if(Cr(a)){const e=a["point-color"];Cr(e)&&(s=Or.fromCssColorString(e)),o=wr(Ur[a["point-size"]],o)}const l=new Nr;2===n.length&&r.clampToGround&&(l.heightReference=Fr.CLAMP_TO_GROUND);const c=Jr(t,e._entityCollection,r.describe);c.point=l,c.point.color=s,c.point.pixelSize=o,c.position=new xr(i(n))}function eo(e,t,i,n,r){Kr(e,t,n,i.coordinates,r)}function to(e,t,i,n,r){for(var o=i.coordinates,s=0;s<o.length;s++)Kr(e,t,n,o[s],r)}function io(e,t,i,n,r){const o=r.lineColor,s=r.lineWidth,a=t.properties;if(Cr(a)){const e=a["stroke-width"];let t;Cr(e)&&(s=new Sr(e));let i=a.stroke;Cr(i)&&(t=Or.fromCssColorString(i));let n=a["stroke-opacity"];Cr(n)&&1!==n&&(Cr(t)||(t=o.color.clone()),t.alpha=n),Cr(t)&&(o=new br(t))}const l=Jr(t,e._entityCollection,r.describe),c=new Er;l.polyline=c,c.clampToGround=r.clampToGround,c.material=o,c.width=s,c.positions=new Sr(Xr(n,i)),c.arcType=Rr.RHUMB}function no(e,t){var i="";for(var n in e)if(e.hasOwnProperty(n)){if(n===t||-1!==$r.indexOf(n))continue;var r=e[n];Cr(r)&&(i+="object"==typeof r?"<tr><th>"+n+"</th><td>"+no(r)+"</td></tr>":"<tr><th>"+n+"</th><td>"+r+"</td></tr>")}return i.length>0&&(i='<table class="cesium-infoBox-defaultTable"><tbody>'+i+"</tbody></table>"),i}function ro(e,t,i,n,r){io(e,t,n,i.coordinates,r)}function oo(e,t,i,n,r){for(var o=i.coordinates,s=0;s<o.length;s++)io(e,t,n,o[s],r)}function so(e,t,i,n,r){if(0===n.length||0===n[0].length)return;let o=r.outlineColor.color,s=r.fill,a=r.outlineWidth;const l=t.properties;if(Cr(l)){const e=l["stroke-width"];let t;Cr(e)&&(a=new Sr(e));const i=l.stroke;Cr(i)&&(t=Or.fromCssColorString(i));let n,c=l["stroke-opacity"];Cr(c)&&1!==c&&(Cr(t)||(t=r.outlineColor.color.clone()),t.alpha=c),Cr(t)&&(o=new Sr(t));const u=l.fill;Cr(u)&&(n=Or.fromCssColorString(u),n.alpha=s.color.alpha),c=l["fill-opacity"],Cr(c)&&c!==s.color.alpha&&(Cr(n)||(n=s.color.clone()),n.alpha=c),Cr(n)&&(s=new br(n))}const c=new Ar;c.outline=new Sr(r.outline),c.outlineColor=o,c.outlineWidth=a,c.material=s,c.arcType=Rr.RHUMB;const u=r.extrudedHeight;if(u)if("number"==typeof u)c.extrudedHeight=u;else if("string"==typeof u){const e=u.match(/\$\{\s*.*?\s*\}/gi);if(e){let t=u;for(let i of e){const e=/\$\{\s*(.*?)\s*\}/gi.exec(i);Cr(e)&&Cr(e[1])&&(t=t.replace(i,l[e[1]]))}try{const e=window.eval(t);"number"==typeof e&&(c.extrudedHeight=e)}catch(e){}}}const h=[];for(var d=1,p=n.length;d<p;d++)h.push(new kr(Xr(n[d],i)));const f=n[0];c.hierarchy=new Sr(new kr(Xr(f,i),h)),f[0].length>2?c.perPositionHeight=new Sr(!0):r.clampToGround||(c.height=0);Jr(t,e._entityCollection,r.describe).polygon=c}function ao(e,t,i,n,r){so(e,t,n,i.coordinates,r)}function lo(e,t,i,n,r){for(var o=i.coordinates,s=0;s<o.length;s++)so(e,t,n,o[s],r)}function co(e,t,i,n,r){for(var o in i.objects)if(i.objects.hasOwnProperty(o)){var s=topojson.feature(i,i.objects[o]);(0,Vr[s.type])(e,s,s,n,r)}}function uo(e,t){return new Cesium.CallbackProperty(function(e,t,i){var n;return function(r,o){return Cr(n)||(n=e(t,i)),n}}(no,e,t),!0)}function ho(e){return Dr.fromDegrees(e[0],e[1],e[2])}class po{constructor(e){this._name=e,this._changed=new zr,this._error=new zr,this._isLoading=!1,this._loading=new zr,this._entityCollection=new Ir(this),this._promises=[],this._pinBuilder=new Lr,this._entityCluster=new Pr,this._credit=void 0,this._resourceCredits=[]}static pointSize=5;static pointColor=Or.ROYALBLUE;static lineColor=Or.YELLOW;static fill=Or.fromBytes(255,255,0,100);static outline=!0;static outlineColor=Or.YELLOW;static lineWidth=2;static clampToGround=!1;static outlineWidth=1;static crsNames(){return qr}static crsLinkHrefs(){return Wr}static crsLinkTypes(){return jr}get entities(){return this._entityCollection}get name(){return this._name}set name(e){this._name!==e&&(this._name=e,this._changed.raiseEvent(this))}get clock(){}get isLoading(){return this._isLoading}get changedEvent(){return this._changed}get errorEvent(){return this._error}get loadingEvent(){return this._loading}get show(){return this._entityCollection.show}set show(e){this._entityCollection.show=e}get clustering(){return this._entityCluster}set clustering(e){this._entityCluster=e}get credit(){return this._credit}load(e,i){Tr.setLoading(this,!0);let n=(i=wr(i,{})).credit;"string"==typeof n&&(n=new Credit(n)),this._credit=n;let r=e,o=i.sourceUri;if("string"==typeof e||e instanceof Br){r=(e=Br.createIfNeeded(e)).fetchJson(),o=wr(o,e.getUrlComponent());const t=this._resourceCredits,i=e.credits;if(Cr(i)){const e=i.length;for(const n=0;n<e;n++)t.push(i[n])}}i={describe:wr(i.describe,uo),pointSize:wr(i.pointSize,po.pointSize),pointColor:wr(i.pointColor,po.pointColor),lineWidth:new Sr(wr(i.lineWidth,po.lineWidth)),outlineColor:new br(wr(i.outlineColor,po.outlineColor)),lineColor:new br(wr(i.lineColor,po.lineColor)),outlineWidth:wr(i.outlineWidth,po.outlineWidth),fill:new br(wr(i.fill,po.fill)),outline:wr(i.outline,po.outline),clampToGround:wr(i.clampToGround,po.clampToGround),extrudedHeight:i.extrudedHeight};const s=this;return Gr(r,(function(e){return function(e,i,n,r){let o;Cr(r)&&(o=Cesium.getFilenameFromUri(r)),Cr(o)&&e._name!==o&&(e._name=o,e._changed.raiseEvent(e));const s=Vr[i.type];if(!Cr(s))throw new t("Unsupported GeoJSON object type: "+i.type);const a=i.crs;let l=null!==a?ho:null;if(Cr(a)){if(!Cr(a.properties))throw new t("crs.properties is undefined.");const e=a.properties;if("name"===a.type){if(l=qr[e.name],!Cr(l))throw new t("Unknown crs name: "+e.name)}else if("link"===a.type){var c=Wr[e.href];if(Cr(c)||(c=jr[e.type]),!Cr(c))throw new t("Unable to resolve crs link: "+JSON.stringify(e));l=c(e)}else{if("EPSG"!==a.type)throw new t("Unknown crs type: "+a.type);if(l=qr["EPSG:"+e.code],!Cr(l))throw new t("Unknown crs EPSG code: "+e.code)}}return Cesium.when(l,(function(t){return e._entityCollection.removeAll(),null!==t&&s(e,i,i,t,n),Cesium.when.all(e._promises,(function(){return e._promises.length=0,Tr.setLoading(e,!1),e}))}))}(s,e,i,o)})).otherwise((function(e){return Tr.setLoading(s,!1),s._error.raiseEvent(s,e),console.log(e),Gr.reject(e)}))}update(){return!0}}po.load=function(e,t){return(new po).load(e,t)};const fo={};function mo(e){return new go(e instanceof Uint8Array?e:new Uint8Array(e))}function go(e){this._array=e}go.prototype.read=function(){var e=this._array;return this._array=null,Promise.resolve(e?{done:!1,value:e}:{done:!0,value:void 0})},go.prototype.cancel=function(){return this._array=null,Promise.resolve()};var yo=function(e){return fetch(e).then((function(e){return e.body&&e.body.getReader?e.body.getReader():e.arrayBuffer().then(mo)}))},vo=function(e){return new Promise((function(t,i){var n=new XMLHttpRequest;n.responseType="arraybuffer",n.onload=function(){t(mo(n.response))},n.onerror=i,n.ontimeout=i,n.open("GET",e,!0),n.send()}))};function _o(e){return("function"==typeof fetch?yo:vo)(e)}function Co(e){return"function"==typeof e.read?e:e.getReader()}var wo=new Uint8Array(0);function bo(e,t){if(!e.length)return t;if(!t.length)return e;var i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}function xo(e){return"function"==typeof e.slice?e:new So("function"==typeof e.read?e:e.getReader())}function So(e){this._source=e,this._array=wo,this._index=0}So.prototype.read=function(){var e=this,t=e._array.subarray(e._index);return e._source.read().then((function(i){return e._array=wo,e._index=0,i.done?t.length>0?{done:!1,value:t}:{done:!0,value:void 0}:{done:!1,value:bo(t,i.value)}}))},So.prototype.slice=function(e){if((e|=0)<0)throw new Error("invalid length");var t=this,i=this._array.length-this._index;if(this._index+e<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=e));var n=new Uint8Array(e);return n.set(this._array.subarray(this._index)),function r(){return t._source.read().then((function(o){return o.done?(t._array=wo,t._index=0,i>0?n.subarray(0,i):null):i+o.value.length>=e?(t._array=o.value,t._index=e-i,n.set(o.value.subarray(0,e-i),i),n):(n.set(o.value,i),i+=o.value.length,r())}))}()},So.prototype.cancel=function(){return this._source.cancel()};var To=function(e){return!(e=e.trim())||isNaN(e=+e)?null:e},Ao={B:To,C:function(e){return e.trim()||null},D:function(e){return new Date(+e.substring(0,4),e.substring(4,6)-1,+e.substring(6,8))},F:To,L:function(e){return!/^[nf]$/i.test(e)&&(!!/^[yt]$/i.test(e)||null)},M:To,N:To},Eo=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},Po=function(e,t){return(e=xo(e)).slice(32).then((function(i){var n=Eo(i);return e.slice(n.getUint16(8,!0)-32).then((function(i){return new Lo(e,t,n,Eo(i))}))}))};function Lo(e,t,i,n){this._source=e,this._decode=t.decode.bind(t),this._recordLength=i.getUint16(10,!0),this._fields=[];for(var r=0;13!==n.getUint8(r);r+=32){for(var o=0;o<11&&0!==n.getUint8(r+o);++o);this._fields.push({name:this._decode(new Uint8Array(n.buffer,n.byteOffset+r,o)),type:String.fromCharCode(n.getUint8(r+11)),length:n.getUint8(r+16)})}}var Mo=Lo.prototype;Mo.read=function(){var e=this,t=1;return e._source.slice(e._recordLength).then((function(i){return i&&26!==i[0]?{done:!1,value:e._fields.reduce((function(n,r){return n[r.name]=Ao[r.type](e._decode(i.subarray(t,t+=r.length))),n}),{})}:{done:!0,value:void 0}}))},Mo.cancel=function(){return this._source.cancel()};var Do=function(e){var t,i=40,n=e.getInt32(36,!0),r=new Array(n);for(t=0;t<n;++t,i+=16)r[t]=[e.getFloat64(i,!0),e.getFloat64(i+8,!0)];return{type:"MultiPoint",coordinates:r}},No=function(e){return{type:"Point",coordinates:[e.getFloat64(4,!0),e.getFloat64(12,!0)]}},Ro=function(e){var t,i=44,n=e.getInt32(36,!0),r=e.getInt32(40,!0),o=new Array(n),s=new Array(r),a=[],l=[];for(t=0;t<n;++t,i+=4)o[t]=e.getInt32(i,!0);for(t=0;t<r;++t,i+=16)s[t]=[e.getFloat64(i,!0),e.getFloat64(i+8,!0)];return o.forEach((function(e,t){var i=s.slice(e,o[t+1]);!function(e){if((t=e.length)<4)return!1;var t,i=0,n=e[t-1][1]*e[0][0]-e[t-1][0]*e[0][1];for(;++i<t;)n+=e[i-1][1]*e[i][0]-e[i-1][0]*e[i][1];return n>=0}(i)?l.push(i):a.push([i])})),l.forEach((function(e){a.some((function(t){if(function(e,t){var i,n=-1,r=t.length;for(;++n<r;)if(i=ko(e,t[n]))return i>0;return!1}(t[0],e))return t.push(e),!0}))||a.push([e])})),1===a.length?{type:"Polygon",coordinates:a[0]}:{type:"MultiPolygon",coordinates:a}};function ko(e,t){for(var i=t[0],n=t[1],r=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],c=l[0],u=l[1],h=e[a],d=h[0],p=h[1];if(Oo(l,h,t))return 0;u>n!=p>n&&i<(d-c)*(n-u)/(p-u)+c&&(r=-r)}return r}function Oo(e,t,i){var n=i[0]-e[0],r=i[1]-e[1];if(0===n&&0===r)return!0;var o=t[0]-e[0],s=t[1]-e[1];if(0===o&&0===s)return!1;var a=(n*o+r*s)/(o*o+s*s);return!(a<0||a>1)&&(0===a||1===a||a*o===n&&a*s===r)}var Io=function(e){var t,i=44,n=e.getInt32(36,!0),r=e.getInt32(40,!0),o=new Array(n),s=new Array(r);for(t=0;t<n;++t,i+=4)o[t]=e.getInt32(i,!0);for(t=0;t<r;++t,i+=16)s[t]=[e.getFloat64(i,!0),e.getFloat64(i+8,!0)];return 1===n?{type:"LineString",coordinates:s}:{type:"MultiLineString",coordinates:o.map((function(e,t){return s.slice(e,o[t+1])}))}},Fo=function(e,t){var i=new Uint8Array(e.length+t.length);return i.set(e,0),i.set(t,e.length),i},Go={0:function(){return null},1:No,3:Io,5:Ro,8:Do,11:No,13:Io,15:Ro,18:Do,21:No,23:Io,25:Ro,28:Do},Bo=function(e){return(e=xo(e)).slice(100).then((function(t){return new Ho(e,Eo(t))}))};function Ho(e,t){var i=t.getInt32(32,!0);if(!(i in Go))throw new Error("unsupported shape type: "+i);this._source=e,this._type=i,this._index=0,this._parse=Go[i],this.bbox=[t.getFloat64(36,!0),t.getFloat64(44,!0),t.getFloat64(52,!0),t.getFloat64(60,!0)]}var zo=Ho.prototype;function Uo(){}zo.read=function(){var e=this;return++e._index,e._source.slice(12).then((function(t){if(null==t)return{done:!0,value:void 0};var i=Eo(t);function n(){return e._source.slice(4).then((function(o){return null==o?{done:!0,value:void 0}:(i=Eo(t=Fo(t.slice(4),o))).getInt32(0,!1)!==e._index?n():r()}))}function r(){var r=2*i.getInt32(4,!1)-4,o=i.getInt32(8,!0);return r<0||o&&o!==e._type?n():e._source.slice(r).then((function(i){return{done:!1,value:o?e._parse(Eo(Fo(t.slice(8),i))):null}}))}return r()}))},zo.cancel=function(){return this._source.cancel()};function Wo(e,t){this._shp=e,this._dbf=t,this.bbox=e.bbox}var jo=Wo.prototype;function qo(e,t,i){return"string"==typeof t?(/\.dbf$/.test(t)||(t+=".dbf"),t=_o(t)):t instanceof ArrayBuffer||t instanceof Uint8Array?t=mo(t):null!=t&&(t=Co(t)),"string"==typeof e?(/\.shp$/.test(e)||(e+=".shp"),void 0===t&&(t=_o(e.substring(0,e.length-4)+".dbf").catch((function(){}))),e=_o(e)):e=e instanceof ArrayBuffer||e instanceof Uint8Array?mo(e):Co(e),Promise.all([e,t]).then((function(e){var t,n,r,o=e[0],s=e[1],a="windows-1252";return i&&null!=i.encoding&&(a=i.encoding),t=o,n=s,r=s&&new TextDecoder(a),Promise.all([Bo(t),n&&Po(n,r)]).then((function(e){return new Wo(e[0],e[1])}))}))}jo.read=function(){var e=this;return Promise.all([e._dbf?e._dbf.read():{value:{}},e._shp.read()]).then((function(e){var t=e[0],i=e[1];return i.done?i:{done:!1,value:{type:"Feature",properties:t.value,geometry:i.value}}}))},jo.cancel=function(){return Promise.all([this._dbf&&this._dbf.cancel(),this._shp.cancel()]).then(Uo)},fo.open=qo,fo.openShp=function(e,t){return"string"==typeof e?(/\.shp$/.test(e)||(e+=".shp"),e=_o(e)):e=e instanceof ArrayBuffer||e instanceof Uint8Array?mo(e):Co(e),Promise.resolve(e).then(Bo)},fo.openDbf=function(e,t){var i="windows-1252";return t&&null!=t.encoding&&(i=t.encoding),i=new TextDecoder(i),"string"==typeof e?(/\.dbf$/.test(e)||(e+=".dbf"),e=_o(e)):e=e instanceof ArrayBuffer||e instanceof Uint8Array?mo(e):Co(e),Promise.resolve(e).then((function(e){return Po(e,i)}))},fo.read=function(e,t,i){return qo(e,t,i).then((function(e){var t=[],i={type:"FeatureCollection",features:t,bbox:e.bbox};return e.read().then((function n(r){return r.done?i:(t.push(r.value),e.read().then(n))}))}))},Object.defineProperty(fo,"__esModule",{value:!0});const{defined:$o,defaultValue:Vo,ColorMaterialProperty:Yo,ConstantPositionProperty:Xo,ConstantProperty:Jo,DataSource:Qo,PolygonGraphics:Zo,PolylineGraphics:Ko,createGuid:es,Cartesian3:ts,PointGraphics:is,ArcType:ns,PolygonHierarchy:rs,Color:os,HeightReference:ss,Resource:as}=Cesium,ls={small:24,medium:48,large:64},cs={},us={},hs={"urn:ogc:def:crs:OGC:1.3:CRS84":Ds,"EPSG:4326":Ds,"urn:ogc:def:crs:EPSG::4326":Ds},ds={Feature:gs,FeatureCollection:function(e,t,i,n,r){for(var o=t.features,s=0,a=o.length;s<a;s++)gs(e,o[s],void 0,n,r)},GeometryCollection:ys,LineString:bs,MultiLineString:xs,MultiPoint:Cs,MultiPolygon:As,Point:_s,Polygon:Ts,Topology:Es},ps={GeometryCollection:ys,LineString:bs,MultiLineString:xs,MultiPoint:Cs,MultiPolygon:As,Point:_s,Polygon:Ts,Topology:Es};function fs(e,t){for(var i=new Array(e.length),n=0;n<e.length;n++)i[n]=t(e[n]);return i}function ms(e,t,i){var n=e.id;if($o(n)&&"Feature"===e.type){for(var r=2,o=n;$o(t.getById(o));)o=n+"_"+r,r++;n=o}else n=es();var s=t.getOrCreateEntity(n),a=e.properties;if($o(a)){var l;s.properties=a;var c=a.title;if($o(c))s.name=c,l="title";else{var u=Number.MAX_VALUE;for(var h in a)if(a.hasOwnProperty(h)&&a[h]){var d=h.toLowerCase();if(u>1&&"title"===d){u=1,l=h;break}u>2&&"name"===d?(u=2,l=h):u>3&&/title/i.test(h)?(u=3,l=h):u>4&&/name/i.test(h)&&(u=4,l=h)}$o(l)&&(s.name=a[l])}var p=a.description;null!==p&&(s.description=$o(p)?new Jo(p):i(a,l))}return s}function gs(e,i,n,r,o){if(null!==i.geometry){if(!$o(i.geometry))throw new t("feature.geometry is required.");var s=i.geometry.type,a=ps[s];if(!$o(a))throw new t("Unknown geometry type: "+s);a(e,i,i.geometry,r,o)}else ms(i,e._entityCollection,o.describe)}function ys(e,i,n,r,o){for(var s=n.geometries,a=0,l=s.length;a<l;a++){var c=s[a],u=c.type,h=ps[u];if(!$o(h))throw new t("Unknown geometry type: "+u);h(e,i,c,r,o)}}function vs(e,t,i,n,r){let o=r.pointSize,s=r.pointColor;const a=t.properties;if($o(a)){const e=a["point-color"];$o(e)&&(s=os.fromCssColorString(e)),o=Vo(ls[a["point-size"]],o)}const l=new is;2===n.length&&r.clampToGround&&(l.heightReference=ss.CLAMP_TO_GROUND);const c=ms(t,e._entityCollection,r.describe);c.point=l,c.point.color=s,c.point.pixelSize=o,c.position=new Xo(i(n))}function _s(e,t,i,n,r){vs(e,t,n,i.coordinates,r)}function Cs(e,t,i,n,r){for(var o=i.coordinates,s=0;s<o.length;s++)vs(e,t,n,o[s],r)}function ws(e,t,i,n,r){const o=r.lineColor,s=r.lineWidth,a=t.properties;if($o(a)){const e=a["stroke-width"];let t;$o(e)&&(s=new Jo(e));let i=a.stroke;$o(i)&&(t=os.fromCssColorString(i));let n=a["stroke-opacity"];$o(n)&&1!==n&&($o(t)||(t=o.color.clone()),t.alpha=n),$o(t)&&(o=new Yo(t))}const l=ms(t,e._entityCollection,r.describe),c=new Ko;l.polyline=c,c.clampToGround=r.clampToGround,c.material=o,c.width=s,c.positions=new Jo(fs(n,i)),c.arcType=ns.RHUMB}function bs(e,t,i,n,r){ws(e,t,n,i.coordinates,r)}function xs(e,t,i,n,r){for(var o=i.coordinates,s=0;s<o.length;s++)ws(e,t,n,o[s],r)}function Ss(e,t,i,n,r){if(0===n.length||0===n[0].length)return;let o=r.outlineColor.color,s=r.fill,a=r.outlineWidth;const l=t.properties;if($o(l)){const e=l["stroke-width"];let t;$o(e)&&(a=new Jo(e));const i=l.stroke;$o(i)&&(t=os.fromCssColorString(i));let n,c=l["stroke-opacity"];$o(c)&&1!==c&&($o(t)||(t=r.outlineColor.color.clone()),t.alpha=c),$o(t)&&(o=new Jo(t));const u=l.fill;$o(u)&&(n=os.fromCssColorString(u),n.alpha=s.color.alpha),c=l["fill-opacity"],$o(c)&&c!==s.color.alpha&&($o(n)||(n=s.color.clone()),n.alpha=c),$o(n)&&(s=new Yo(n))}const c=new Zo;c.outline=new Jo(r.outline),c.outlineColor=o,c.outlineWidth=a,c.material=s,c.arcType=ns.RHUMB;const u=r.extrudedHeight;if(u)if("number"==typeof u)c.extrudedHeight=u;else if("string"==typeof u){const e=u.match(/\$\{\s*.*?\s*\}/gi);if(e){let t=u;for(let i of e){const e=/\$\{\s*(.*?)\s*\}/gi.exec(i);$o(e)&&$o(e[1])&&(t=t.replace(i,l[e[1]]))}try{const e=window.eval(t);"number"==typeof e&&(c.extrudedHeight=e)}catch(e){}}}const h=[];for(var d=1,p=n.length;d<p;d++)h.push(new rs(fs(n[d],i)));const f=n[0];c.hierarchy=new Jo(new rs(fs(f,i),h)),f[0].length>2?c.perPositionHeight=new Jo(!0):r.clampToGround||(c.height=0);ms(t,e._entityCollection,r.describe).polygon=c}function Ts(e,t,i,n,r){Ss(e,t,n,i.coordinates,r)}function As(e,t,i,n,r){for(var o=i.coordinates,s=0;s<o.length;s++)Ss(e,t,n,o[s],r)}function Es(e,t,i,n,r){for(var o in i.objects)if(i.objects.hasOwnProperty(o)){var s=topojson.feature(i,i.objects[o]);(0,ds[s.type])(e,s,s,n,r)}}function Ps(e,t){var i="";for(var n in e)if(e.hasOwnProperty(n)){if(n===t||-1!==Ls.indexOf(n))continue;var r=e[n];$o(r)&&(i+="object"==typeof r?"<tr><th>"+n+"</th><td>"+Ps(r)+"</td></tr>":"<tr><th>"+n+"</th><td>"+r+"</td></tr>")}return i.length>0&&(i='<table class="cesium-infoBox-defaultTable"><tbody>'+i+"</tbody></table>"),i}const Ls=["title","description","marker-size","marker-symbol","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"];function Ms(e,t){return new Cesium.CallbackProperty(function(e,t,i){var n;return function(r,o){return $o(n)||(n=e(t,i)),n}}(Ps,e,t),!0)}function Ds(e){return ts.fromDegrees(e[0],e[1],e[2])}class Ns extends po{constructor(e){super(e),this._geoJson=void 0}get geoJson(){return this._geoJson}set geoJson(e){this._geoJson?this._geoJson.features.push(e):this._geoJson={type:"FeatureCollection",features:[e]}}static pointSize=5;static pointColor=os.ROYALBLUE;static lineColor=os.YELLOW;static fill=os.fromBytes(255,255,0,100);static outline=!0;static outlineColor=os.YELLOW;static lineWidth=2;static clampToGround=!1;static outlineWidth=1;static crsNames(){return hs}static crsLinkHrefs(){return cs}static crsLinkTypes(){return us}load(e,i={encoding:"utf-8"}){if(!$o(e))throw new t("data is required.");Cesium.DataSource.setLoading(this,!0);const n=i.credit;"string"==typeof n&&(n=new Cesium.Credit(n)),this._credit=n;const r=this;let o=e,s=i.sourceUri;if("string"==typeof e||e instanceof as){o=new Promise(((t,n)=>{fo.open(e,void 0,{encoding:i.encoding}).then((e=>e.read().then((function i(n){if(!n.done)return r.geoJson=n.value,e.read().then(i);t(r.geoJson)})))).catch((e=>n(e.stack)))})),s=Vo(s,"");var a=this._resourceCredits,l=e.credits;if($o(l))for(var c=l.length,u=0;u<c;u++)a.push(l[u])}return i={describe:Vo(i.describe,Ms),pointSize:Vo(i.pointSize,Ns.pointSize),pointColor:Vo(i.pointColor,Ns.pointColor),lineWidth:new Jo(Vo(i.lineWidth,Ns.lineWidth)),outlineColor:new Yo(Vo(i.outlineColor,Ns.outlineColor)),lineColor:new Yo(Vo(i.lineColor,Ns.lineColor)),outlineWidth:Vo(i.outlineWidth,Ns.outlineWidth),fill:new Yo(Vo(i.fill,Ns.fill)),outline:Vo(i.outline,Ns.outline),clampToGround:Vo(i.clampToGround,Ns.clampToGround),extrudedHeight:i.extrudedHeight},Cesium.when(o,(function(e){return function(e,i,n,r){let o;$o(r)&&(o=Cesium.getFilenameFromUri(r)),$o(o)&&e._name!==o&&(e._name=o,e._changed.raiseEvent(e));const s=ds[i.type];if(!$o(s))throw new t("Unsupported GeoJSON object type: "+i.type);const a=i.crs;let l=null!==a?Ds:null;if($o(a)){if(!$o(a.properties))throw new t("crs.properties is undefined.");const e=a.properties;if("name"===a.type){if(l=hs[e.name],!$o(l))throw new t("Unknown crs name: "+e.name)}else if("link"===a.type){var c=cs[e.href];if($o(c)||(c=us[e.type]),!$o(c))throw new t("Unable to resolve crs link: "+JSON.stringify(e));l=c(e)}else{if("EPSG"!==a.type)throw new t("Unknown crs type: "+a.type);if(l=hs["EPSG:"+e.code],!$o(l))throw new t("Unknown crs EPSG code: "+e.code)}}return Cesium.when(l,(function(t){return e._entityCollection.removeAll(),null!==t&&s(e,i,i,t,n),Cesium.when.all(e._promises,(function(){return e._promises.length=0,Qo.setLoading(e,!1),e}))}))}(r,e,i,s)})).otherwise((function(e){return Cesium.DataSource.setLoading(r,!1),r._error.raiseEvent(r,e),console.log(e),Cesium.when.reject(e)}))}}Ns.load=function(e,t){return(new Ns).load(e,t)};const{buildModuleUrl:Rs,Color:ks,defined:Os,destroyObject:Is,knockout:Fs,getElement:Gs,subscribeAndEvaluate:Bs,InfoBoxViewModel:Hs}=Cesium;class zs{constructor(e){e=Gs(e);var t=document.createElement("div");t.className="cesium-infoBox",t.setAttribute("data-bind",'      css: { "cesium-infoBox-visible" : showInfo, "cesium-infoBox-bodyless" : _bodyless }'),e.appendChild(t);var i=document.createElement("div");i.className="cesium-infoBox-title",i.setAttribute("data-bind","text: titleText"),t.appendChild(i);var n=document.createElement("button");n.type="button",n.className="cesium-infoBox-close",n.setAttribute("data-bind","      click: function () { closeClicked.raiseEvent(this); }"),n.innerHTML="&times;",t.appendChild(n);var r=document.createElement("iframe");r.className="cesium-infoBox-iframe",r.setAttribute("sandbox","allow-same-origin allow-popups allow-forms"),r.setAttribute("data-bind","style : { maxHeight : maxHeightOffset(40) }"),r.setAttribute("allowfullscreen",!0),t.appendChild(r);var o=new Hs;Fs.applyBindings(o,t),this._container=e,this._element=t,this._frame=r,this._viewModel=o,this._descriptionSubscription=void 0;var s=this;r.addEventListener("load",(function(){var e=r.contentDocument,i=e.createElement("link");i.href=Rs("Widgets/InfoBox/InfoBoxDescription.css"),i.rel="stylesheet",i.type="text/css";var n=e.createElement("div");n.className="cesium-infoBox-description",e.head.appendChild(i),e.body.appendChild(n),s._descriptionSubscription=Bs(o,"description",(function(e){r.style.height="5px",n.innerHTML=e;var i=null,o=n.firstElementChild;if(null!==o&&1===n.childNodes.length){var s=window.getComputedStyle(o);if(null!==s){var a=s["background-color"],l=ks.fromCssColorString(a);Os(l)&&0!==l.alpha&&(i=s["background-color"])}}t.style["background-color"]=i;var c=n.getBoundingClientRect().height;r.style.height=c+"px"}))})),r.setAttribute("src","about:blank")}get container(){return this._container}get viewModel(){return this._viewModel}get frame(){return this._frame}isDestroyed(){return!1}destroy(){var e=this._container;return Fs.cleanNode(this._element),e.removeChild(this._element),Os(this._descriptionSubscription)&&this._descriptionSubscription.dispose(),Is(this)}}const{Transforms:Us,Cartesian3:Ws}=Cesium;class js{constructor(e={}){if(!z(e.modelMatrix)&&z(e.position)){let t;e.position instanceof Ws?t=e.position:e.position instanceof me&&(t=e.position.toCartesian()),t&&(e.modelMatrix=Us.eastNorthUpToFixedFrame(t))}if(z(e.gltf))this.delegate=new Cesium.Model(e);else{if(!z(e.url))throw new t("one of parameters url or gltf must be provided.");this.delegate=Cesium.Model.fromGltf(e)}this._readyPromise=this.delegate._readyPromise,this._ready=this.delegate._ready}get ready(){return this._ready}get readyPromise(){return this._readyPromise}get activeAnimations(){return this.delegate.activeAnimations}set activeAnimations(e){this.delegate.activeAnimations=e}get allowPicking(){return this.delegate.allowPicking}get asynchronous(){return this.delegate.asynchronous}get backFaceCulling(){return this.delegate.backFaceCulling}get basePath(){return this.delegate.basePath}get boundingSphere(){return this.delegate.boundingSphere}get clippingPlanes(){return this.delegate.clippingPlanes}set clippingPlanes(e){this.delegate.clippingPlanes=e}get color(){return this.delegate.color}set color(e){this.delegate.color=e}get colorBlendMode(){return this.delegate.colorBlendMode}set colorBlendMode(e){this.delegate.colorBlendMode=e}get colorBlendAmount(){return this.delegate.colorBlendAmount}set colorBlendAmount(e){this.delegate.colorBlendAmount=e}get credit(){return this.delegate.credit}set credit(e){this.delegate.credit=e}get debugShowBoundingVolume(){return this.delegate.debugShowBoundingVolume}set debugShowBoundingVolume(e){this.delegate.debugShowBoundingVolume=e}get debugWireframe(){return this.delegate.debugWireframe}set debugWireframe(e){this.delegate.debugWireframe=e}get distanceDisplayCondition(){return this.delegate.distanceDisplayCondition}set distanceDisplayCondition(e){this.delegate.distanceDisplayCondition=e}get gltf(){return this.delegate.gltf}get id(){return this.delegate.id}set id(e){this.delegate.id=e}get maximumScale(){return this.delegate.maximumScale}set maximumScale(e){this.delegate.maximumScale=e}get minimumPixelSize(){return this.delegate.minimumPixelSize}set minimumPixelSize(e){this.delegate.minimumPixelSize=e}get modelMatrix(){return this.delegate.modelMatrix}set modelMatrix(e){this.delegate.modelMatrix=e}get scale(){return this.delegate.scale}set scale(e){this.delegate.scale=e}get shadows(){return this.delegate.shadows}set shadows(e){this.delegate.shadows=e}get show(){return this.delegate.show}set show(e){this.delegate.show=e}get showOutline(){return this.delegate.showOutline}get silhouetteColor(){return this.delegate.silhouetteColor}set silhouetteColor(e){this.delegate.silhouetteColor=e}get silhouetteSize(){return this.delegate.silhouetteSize}set silhouetteSize(e){this.delegate.silhouetteSize=e}static silhouetteSupported(e){return Cesium.Model.silhouetteSupported(e.scene)}destroy(){this.delegate.destroy()}isDestroyed(){this.delegate.isDestroyed()}getMaterial(e){return this.delegate.getMaterial(e)}getMesh(e){return this.delegate.getMesh(e)}getNode(e){return this.delegate.getNode(e)}get rootNodes(){return this.delegate._runtime.rootNodes}get nodes(){return this.delegate._runtime.nodesByName}get materials(){return this.delegate._runtime.materialsByName}get meshs(){return this.delegate._runtime.meshesByName}}function qs(e,t){const{center:i}=e.boundingSphere,n=me.fromCartesian(i),r=Cesium.Cartesian3.fromDegrees(n.lon,n.lat,0),o=Cesium.Cartesian3.fromDegrees(n.lon,n.lat,t),s=Cesium.Cartesian3.subtract(o,r,new Cesium.Cartesian3);e.modelMatrix=Cesium.Matrix4.multiply(e.modelMatrix,Cesium.Matrix4.fromTranslation(s),e.modelMatrix)}class $s{constructor(e={},t={}){this._params={height:0,position:new Cesium.Cartesian3(0,0,0),rotation:0};let{transform:i,position:n,height:r,rotationZ:o,debug:s}=e;const a=new Cesium.Cesium3DTileset(e);a.readyPromise.then((e=>{if(viewer.scene.primitives.add(e),Cesium.defined(n)&&function(e,t,i,n){if(t)e.root.transform=t;else{const t=Cesium.Transforms.eastNorthUpToFixedFrame(i),r=Cesium.Matrix3.fromRotationZ(n);Cesium.Matrix4.multiplyByMatrix3(t,r,t),Cesium.Matrix4.multiply(e.root.transform,t,e.root.transform)}}(e,i,n,o),Cesium.defined(r)&&qs(e,r),s){let t=0,i=new Cesium.Cartesian3,n=0;parent.onkeypress=function(r){r.keyCode==="Q".charCodeAt()||r.keyCode==="q".charCodeAt()?t=1:r.keyCode==="E".charCodeAt()||r.keyCode==="e".charCodeAt()?t=-1:r.keyCode==="A".charCodeAt()||r.keyCode==="a".charCodeAt()?i=new Cesium.Cartesian3(-2,0,0):r.keyCode==="D".charCodeAt()||r.keyCode==="d".charCodeAt()?i=new Cesium.Cartesian3(2,0,0):r.keyCode==="W".charCodeAt()||r.keyCode==="w".charCodeAt()?i=new Cesium.Cartesian3(0,-2,0):r.keyCode==="S".charCodeAt()||r.keyCode==="s".charCodeAt()?i=new Cesium.Cartesian3(0,2,0):r.keyCode==="Z".charCodeAt()||r.keyCode==="z".charCodeAt()?n=-1:r.keyCode!=="X".charCodeAt()&&r.keyCode!=="x".charCodeAt()||(n=1),function(e,t){const i=new Cesium.Matrix4;Cesium.Matrix4.fromTranslation(t,i),Cesium.Matrix4.multiply(e.modelMatrix,i,e.modelMatrix)}(e,i),function(e,t){const i=Cesium.Matrix3.fromRotationZ(Cesium.Math.toRadians(t));Cesium.Matrix4.multiplyByMatrix3(e.root.transform,i,e.root.transform)}(e,n),qs(e,t),n=0,i=new Cesium.Cartesian3,t=0}}})),this.delegate=a}get allTilesLoaded(){return this.delegate.allTilesLoaded}get readyPromise(){return this.delegate.readyPromise}get boundingSphere(){return this.delegate.boundingSphere}get colorBlendAmount(){return this.delegate.colorBlendAmount}set colorBlendAmount(e){this.delegate.colorBlendAmount=e}get colorBlendMode(){return this.delegate.colorBlendMode}set colorBlendMode(e){this.delegate.colorBlendMode=e}get style(){return this.delegate.style}set style(e){this.delegate.style=e}get customShader(){return this.delegate.customShader}set customShader(e){this.delegate.customShader=e}get debugColorizeTiles(){return this.delegate.debugColorizeTiles}set debugColorizeTiles(e){this.delegate.debugColorizeTiles=e}get debugFreezeFrame(){return this.delegate.debugFreezeFrame}set debugFreezeFrame(e){this.delegate.debugFreezeFrame=e}get debugShowBoundingVolume(){return this.delegate.debugShowBoundingVolume}set debugShowBoundingVolume(e){this.delegate.debugShowBoundingVolume=e}get debugShowContentBoundingVolume(){return this.delegate.debugShowContentBoundingVolume}set debugShowContentBoundingVolume(e){this.delegate.debugShowContentBoundingVolume=e}get debugShowGeometricError(){return this.delegate.debugShowGeometricError}set debugShowGeometricError(e){this.delegate.debugShowGeometricError=e}get debugShowMemoryUsage(){return this.delegate.debugShowMemoryUsage}set debugShowMemoryUsage(e){this.delegate.debugShowMemoryUsage=e}get debugShowRenderingStatistics(){return this.delegate.debugShowRenderingStatistics}set debugShowRenderingStatistics(e){this.delegate.debugShowRenderingStatistics=e}get debugShowUrl(){return this.delegate.debugShowUrl}set debugShowUrl(e){this.delegate.debugShowUrl=e}get debugWireframe(){return this.delegate.debugWireframe}set debugWireframe(e){this.delegate.debugWireframe=e}get dynamicScreenSpaceError(){return this.delegate.dynamicScreenSpaceError}set dynamicScreenSpaceError(e){this.delegate.dynamicScreenSpaceError=e}get dynamicScreenSpaceErrorFactor(){return this.delegate.dynamicScreenSpaceErrorFactor}set dynamicScreenSpaceErrorFactor(e){this.delegate.dynamicScreenSpaceErrorFactor=e}get extensions(){return this.delegate.extensions}get extras(){return this.delegate.extras}get dynamicScreenSpaceErrorDensity(){return this.delegate.dynamicScreenSpaceErrorDensity}set dynamicScreenSpaceErrorDensity(e){this.delegate.dynamicScreenSpaceErrorDensity=e}get foveatedScreenSpaceError(){return this.delegate.foveatedScreenSpaceError}set foveatedScreenSpaceError(e){this.delegate.foveatedScreenSpaceError=e}get foveatedConeSize(){return this.delegate.foveatedConeSize}set foveatedConeSize(e){this.delegate.foveatedConeSize=e}get foveatedInterpolationCallback(){return this.delegate.foveatedInterpolationCallback}set foveatedInterpolationCallback(e){this.delegate.foveatedInterpolationCallback=e}get foveatedMinimumScreenSpaceErrorRelaxation(){return this.delegate.foveatedMinimumScreenSpaceErrorRelaxation}set foveatedMinimumScreenSpaceErrorRelaxation(e){this.delegate.foveatedMinimumScreenSpaceErrorRelaxation=e}get foveatedTimeDelay(){return this.delegate.foveatedTimeDelay}set foveatedTimeDelay(e){this.delegate.foveatedTimeDelay=e}get imageBasedLightingFactor(){return this.delegate.imageBasedLightingFactor}set imageBasedLightingFactor(e){this.delegate.imageBasedLightingFactor=e}get immediateLoadDesiredLevelOfDetail(){return this.delegate.immediateLoadDesiredLevelOfDetail}set immediateLoadDesiredLevelOfDetail(e){this.delegate.immediateLoadDesiredLevelOfDetail=e}get initialTilesLoaded(){return this.delegate.initialTilesLoaded}get lightColor(){return this.delegate.lightColor}set lightColor(e){this.delegate.lightColor=e}get loadProgress(){return this.delegate.loadProgress}get loadSiblings(){return this.delegate.loadSiblings}get maximumMemoryUsage(){return this.delegate.maximumMemoryUsage}set maximumMemoryUsage(e){this.delegate.maximumMemoryUsage=e}get maximumScreenSpaceError(){return this.delegate.maximumScreenSpaceError}set maximumScreenSpaceError(e){this.delegate.maximumScreenSpaceError=e}get modelMatrix(){return this.delegate.modelMatrix}set modelMatrix(e){this.delegate.modelMatrix=e}get pointCloudShading(){return this.delegate.pointCloudShading}set pointCloudShading(e){this.delegate.pointCloudShading}get preferLeaves(){return this.delegate.preferLeaves}set preferLeaves(e){this.delegate.preferLeaves=e}get preloadFlightDestinations(){return this.delegate.preloadFlightDestinations}set preloadFlightDestinations(e){this.delegate.preloadFlightDestinations}get preloadWhenHidden(){return this.delegate.preloadWhenHidden}set preloadWhenHidden(e){this.delegate.preloadWhenHidden}get progressResolutionHeightFraction(){return this.delegate.progressResolutionHeightFraction}set progressResolutionHeightFraction(e){this.delegate.progressResolutionHeightFraction=e}get properties(){return this.delegate.properties}get resource(){return this.delegate.resource}get root(){return this.delegate.root}get shadows(){return this.delegate.shadows}set shadows(e){this.delegate.shadows=e}get showOutline(){return this.delegate.showOutline}get skipLevelOfDetail(){return this.delegate.skipLevelOfDetail}set skipLevelOfDetail(e){this.delegate.skipLevelOfDetail}get skipLevels(){return this.delegate.skipLevels}set skipLevels(e){this.delegate.skipLevels=e}get skipScreenSpaceErrorFactor(){return this.delegate.skipScreenSpaceErrorFactor}set skipScreenSpaceErrorFactor(e){this.delegate.skipScreenSpaceErrorFactor=e}get clippingPlanes(){return this.delegate.clippingPlanes}set clippingPlanes(e){this.delegate.clippingPlanes=e}get specularEnvironmentMaps(){return this.delegate.specularEnvironmentMaps}set specularEnvironmentMaps(e){this.delegate.specularEnvironmentMaps=e}get tileFailed(){return this.delegate.tileFailed}get tileLoad(){return this.delegate.tileLoad}set tileLoad(e){this.delegate.tileLoad=e}get tileUnload(){return this.delegate.tileUnload}set tileUnload(e){this.delegate.tileUnload=e}get tilesLoaded(){return this.delegate.tilesLoaded}get tileVisible(){return this.delegate.tileVisible}set tileVisible(e){this.delegate.tileVisible=e}get timeSinceLoad(){return this.delegate.timeSinceLoad}get totalMemoryUsageInBytes(){return this.delegate.totalMemoryUsageInBytes}get classificationType(){return this.delegate.classificationType}set classificationType(e){this.delegate.classificationType=e}get baseScreenSpaceError(){return this.delegate.baseScreenSpaceError}set baseScreenSpaceError(e){this.delegate.baseScreenSpaceError=e}destroy(){this.delegate.destroy()}hasExtension(e){return this.delegate.hasExtension(e)}isDestroyed(){return this.delegate.isDestroyed()}makeStyleDirty(){return this.delegate.makeStyleDirty()}trimLoadedTiles(){this.delegate.trimLoadedTiles()}static loadJson(e){return Cesium3DTileset.loadJson(e)}}class Vs{constructor(e={}){this._id=B(e.id,_e()),this._maxClusterLevel=B(e.maxClusterLevel,12),this._minLoadLevel=B(e.minLoadLevel,12),this._objects=void 0}get id(){return this._id}get minLoadLevel(){return this._minLoadLevel}set minLoadLevel(e){this._minLoadLevel=e}get objects(){return this._objects}set objects(e){this._objects=e}updateCluster(e){t.throwInstantiationError()}beginUpdate(e){t.throwInstantiationError()}endUpdate(e){t.throwInstantiationError()}initialize(e,i){t.throwInstantiationError()}createGeometry(e,i,n){t.throwInstantiationError()}removeGeometry(e,t){}removeAll(){t.throwInstantiationError()}isDestroyed(){return!1}destroy(){t.throwInstantiationError()}}const{AssociativeArray:Ys}=Cesium;class Xs{constructor(){this._layers=new Ys}get layer(){return this._layers}get length(){return this._layers.length}get values(){return this._layers.values}get(e){return this._layers.get(e)}add(e){e instanceof Vs&&this._layers.set(e.id,e)}has(e){return e instanceof Vs?this._layers.contains(e):"string"==typeof e&&this._layers.contains(this.get(e))}remove(e){if(e instanceof Vs)return e.destroy(),this._layers.remove(e.id);if("string"==typeof e){const t=this._layers.get(e);return t&&t.destroy(),this._layers.remove(e)}return!1}removeAll(){return this._layers.removeAll()}}var Js=function(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&i.path)}},i.exports),i.exports}((function(e,t){
/** @license MIT License (c) copyright B Cavalier & J Hann */
var i;i=function(){var e,t,i;function n(e,t,i,n){return r(e).then(t,i,n)}function r(e){var t,i,n;return e instanceof o?t=e:l(e)?(i=a(),e.then((function(e){i.resolve(e)}),(function(e){i.reject(e)}),(function(e){i.progress(e)})),t=i.promise):(n=e,t=new o((function(e){try{return r(e?e(n):n)}catch(e){return s(e)}}))),t}function o(e){this.then=e}function s(e){return new o((function(t,i){try{return i?r(i(e)):s(e)}catch(e){return s(e)}}))}function a(){var e,t,n,l,c,u;return e=new o(h),t=[],n=[],l=function(e,i,r){var o,s;return o=a(),s="function"==typeof r?function(e){try{o.progress(r(e))}catch(e){o.progress(e)}}:function(e){o.progress(e)},t.push((function(t){t.then(e,i).then(o.resolve,o.reject,s)})),n.push(s),o.promise},c=function(e){return d(n,e),e},u=function(e){return e=r(e),l=e.then,u=r,c=f,d(t,e),n=t=i,e},{then:h,resolve:p,reject:m,progress:g,promise:e,resolver:{resolve:p,reject:m,progress:g}};function h(e,t,i){return l(e,t,i)}function p(e){return u(e)}function m(e){return u(s(e))}function g(e){return c(e)}}function l(e){return e&&"function"==typeof e.then}function c(e,t,i,r,o){return p(2,arguments),n(e,(function(e){var s,l,c,u,h,d,p,m,g,y;if(g=e.length>>>0,s=Math.max(0,Math.min(t,g)),c=[],l=g-s+1,u=[],h=a(),s)for(m=h.progress,p=function(e){u.push(e),--l||(d=p=f,h.reject(u))},d=function(e){c.push(e),--s||(d=p=f,h.resolve(c))},y=0;y<g;++y)y in e&&n(e[y],_,v,m);else h.resolve(c);return h.then(i,r,o);function v(e){p(e)}function _(e){d(e)}}))}function u(e,t,i,n){return p(1,arguments),h(e,m).then(t,i,n)}function h(e,t){return n(e,(function(e){var i,r,o,s,l,c;if(o=r=e.length>>>0,i=[],c=a(),o)for(s=function(e,r){n(e,t).then((function(e){i[r]=e,--o||c.resolve(i)}),c.reject)},l=0;l<r;l++)l in e?s(e[l],l):--o;else c.resolve(i);return c.promise}))}function d(e,t){for(var i,n=0;i=e[n++];)i(t)}function p(e,t){for(var i,n=t.length;n>e;)if(null!=(i=t[--n])&&"function"!=typeof i)throw new Error("arg "+n+" must be a function")}function f(){}function m(e){return e}return n.defer=a,n.resolve=r,n.reject=function(e){return n(e,s)},n.join=function(){return h(arguments,m)},n.all=u,n.map=h,n.reduce=function(i,r){var o=t.call(arguments,1);return n(i,(function(t){var i;return i=t.length,o[0]=function(e,t,o){return n(e,(function(e){return n(t,(function(t){return r(e,t,o,i)}))}))},e.apply(t,o)}))},n.any=function(e,t,i,n){return c(e,1,(function(e){return t?t(e[0]):e[0]}),i,n)},n.some=c,n.chain=function(e,t,i){var r=arguments.length>2;return n(e,(function(e){return e=r?i:e,t.resolve(e),e}),(function(e){return t.reject(e),s(e)}),t.progress)},n.isPromise=l,o.prototype={always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(i,e)},yield:function(e){return this.then((function(){return e}))},spread:function(e){return this.then((function(t){return u(t,(function(t){return e.apply(i,t)}))}))}},t=[].slice,e=[].reduce||function(e){var t,i,n,r,o;if(o=0,r=(t=Object(this)).length>>>0,(i=arguments).length<=1)for(;;){if(o in t){n=t[o++];break}if(++o>=r)throw new TypeError}else n=i[1];for(;o<r;++o)o in t&&(n=e(n,t[o],o,t));return n},n},e.exports=i()}));const{GeographicTilingScheme:Qs,GlobeSurfaceTileProvider:Zs,Event:Ks,TerrainState:ea,RequestType:ta,Request:ia,Rectangle:na,QuadtreeTileLoadState:ra,Visibility:oa,AssociativeArray:sa,Cartesian3:aa,Cartographic:la,getTimestamp:ca}=Cesium;const ua={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0,throttle:!0};function ha(e,t,i,n,r){const o=e.data;o.terrainState===ea.UNLOADED&&function(e,t,i){let n=e.data;function r(e){n.terrainData=e,n.terrainState=ea.RECEIVED,n.request=void 0}function o(e){if(n.request.state===RequestState.CANCELLED)return n.terrainData=void 0,n.terrainState=ea.UNLOADED,void(n.request=void 0);n.terrainState=ea.FAILED,n.request=void 0}!function(){const t=new ia({throttle:!1,throttleByServer:!0,type:ta.TERRAIN});n.request=t;const s=i.requestTileGeometry(e.x,e.y,e.level,t);z(s)?(n.terrainState=ea.RECEIVING,Js(s,r,o)):(n.terrainState=ea.UNLOADED,n.request=void 0)}()}(e,0,i),o.terrainState===ea.RECEIVED&&function(e,t,i,n,r,o){const s=i.tilingScheme,a=ua;a.tilingScheme=s,a.x=n,a.y=r,a.level=o,a.exaggeration=t.terrainExaggeration,a.exaggerationRelativeHeight=t.terrainExaggerationRelativeHeight,a.throttle=!0;const l=e.terrainData.createMesh(a);z(l)&&(e.terrainState=ea.TRANSFORMING,Js(l,(function(t){e.mesh=t,e.terrainState=ea.TRANSFORMED}),(function(){e.terrainState=ea.FAILED})))}(o,t,i,e.x,e.y,e.level),o.terrainState===ea.TRANSFORMED&&(e.renderable=!0)}function da(e,t){const i=[];for(let n of e)z(n)&&(z(n.id)||(n.id=_e()),z(n)&&z(n.position)&&(n.position instanceof aa?n.cartesian=n.position:n.position instanceof la?(n.cartesian=la.toCartesian(n.position),n.catographic=n.position):n.position instanceof me?(n.cartesian=n.position.toCartesian(),n.cartographic=n.position.toCartoGraphic()):n.cartesian=n.position,n.cartographic||(n.cartographic=la.fromCartesian(n.cartesian)),na.contains(t.rectangle,n.cartographic)&&i.push(n)));return i}class pa{constructor(){this.boundingVolumeSourceTile=void 0,this.terrainState=Cesium.TerrainState.UNLOADED,this.mesh=void 0,this.terrainData=void 0,this.objects=void 0,this._geometryOfTile=new sa,this._objectsOfTile=new sa,this._needRenderObjects=new sa}static processStateMachine(e,t,i,n,r){pa.initialize(e,i),e.state===ra.LOADING&&ha(e,t,i)}static initialize(e,t){let i=e.data;z(i)||(i=e.data=new pa),e.state===ra.START&&(e.state=ra.LOADING)}}function fa(e,t,i,n,r){let o=i.data._geometryOfTile.get(t.id),s=e._hasRenderCached.get(t.id);s||(s={},e._hasRenderCached.set(t.id,s)),o||(o=[]);for(let e of r){if(s[e.id])return;const r=t.createGeometry(i,n,e);r&&(s[e.id]=!0,o.push({id:e.id,geometry:r}))}i.data._geometryOfTile.set(t.id,o)}function ma(e,t,i,n,r){const o=e._hasRenderCached.get(t.id);for(let e of r){const{id:i,geometry:r}=e;t.removeGeometry(n,r),delete o[i]}i.data._geometryOfTile.remove(t.id)}class ga{constructor(e={}){this._ready=!0,this._scene=e.scene,this._tilingSceheme=new Qs,this._readyPromise=Js.defer(),this._readyPromise.resolve(!0),this._errorEvent=new Ks,this._terrainProvider=e.terrainProvider,this._show=!0,this.cartographicLimitRectangle=na.clone(na.MAX_VALUE),this.tree=void 0,this._layers=new Xs,this._lastTilesToRender=[],this._hasRenderCached=new sa,this._tilesCahced=[]}get terrainProvider(){return this._terrainProvider}get show(){return this._show}set show(e){this._show=e}get ready(){return this._ready}get tilingScheme(){return this._tilingSceheme}get readyPromise(){return this._readyPromise}get quadtree(){return this._quadtree}set quadtree(e){z(e)&&(this._quadtree=e)}initialize(e){for(let t of this._layers.values)t.initialize(e,this._scene)}beginUpdate(e){const t=this._layers.values;for(let i of t)i.beginUpdate(e);this._frameNumber++}showTileThisFrame(e,t){const i=e.data;if(!z(i))return;this._tilesCahced.includes(e)||this._tilesCahced.push(e);const n=this._layers.values;ca();for(let r of n){if(!z(r.objects)||!Array.isArray(r.objects))continue;const n=r.id;if(i._geometryOfTile.get(n)&&!r._needReclass)return;let o=i._objectsOfTile.get(n);z(o)&&!r._needReclass||(o=da(r.objects,e),i._objectsOfTile.set(n,o)),fa(this,r,e,t,o)}}endUpdate(e){const t=this._quadtree;if(!t)return;const i=this._lastTilesToRender,n=t._tilesToRender,r=this._layers.values;for(let t of i)if(!n.includes(t))for(let i of r){const n=t.data._geometryOfTile.get(i.id)||[];ma(this,i,t,e,n)}for(let t of r){t.endUpdate(e)&&n.forEach((i=>{const n=i.data._geometryOfTile.get(t.id)||[];ma(this,t,i,e,n)}))}this._lastTilesToRender=[...n]}loadTile(e,t){if(!this.terrainProvider.ready)return;let i,n=!0;t.data&&(i=t.data.terrainState,n=t.data.boundingVolumeSourceTile!==t),pa.processStateMachine(t,e,this.terrainProvider,this._layers,this.quadtree);const r=t.data;n&&i!==t.data.terrainState&&this.computeTileVisibility(t,e,this.quadtree.occluders)!==oa.NONE&&r.boundingVolumeSourceTile===t&&pa.processStateMachine(t,e,this.terrainProvider,this._layers,this.quadtree)}getLevelMaximumGeometricError(e){return this._terrainProvider.getLevelMaximumGeometricError(e)}canRefine(e){return Zs.prototype.canRefine.call(this,e)}computeTileVisibility(e,t,i){return z(e.data)||(e.data=new pa),Zs.prototype.computeTileVisibility.call(this,e,t,i)}computeDistanceToTile(e,t){return e.data||(e.data=new pa),Zs.prototype.computeDistanceToTile.call(this,e,t)}clearTile(e){const t=this._tilesCahced;for(let i of t)i.data._geometryOfTile.remove(e),i.data._objectsOfTile.remove(e);this._hasRenderCached.remove(e)}isDestroyed(){return!1}destroy(){this._removeEventListener();const e=this._layers.values;for(let t of e)t.destroy()}computeTileLoadPriority(e,t){return Zs.prototype.computeTileLoadPriority(e,t)}_onLayerAdded(e,t){}_onLayerRemoved(e,t){}_onLayerShownOrHidden(e,t,i){i?this._onLayerAdded(e,t):this._onLayerRemoved(e,t)}}const{BoundingSphere:ya,buildModuleUrl:va,Cartesian3:_a,Cartographic:Ca,Color:wa,defaultValue:ba,defined:xa,destroyObject:Sa,DeveloperError:Ta,Ellipsoid:Aa,EllipsoidTerrainProvider:Ea,Event:Pa,IntersectionTests:La,NearFarScalar:Ma,Ray:Da,Rectangle:Na,Resource:Ra,ShaderSource:ka,Texture:Oa,when:Ia,GlobeSurfaceShaderSet:Fa,GlobeSurfaceTileProvider:Ga,GlobeTranslucency:Ba,ImageryLayerCollection:Ha,QuadtreePrimitive:za,SceneMode:Ua,ShadowMode:Wa}=Cesium,ja=Cesium._shadersGlobeVS,qa=Cesium._shadersGlobeFS,$a=Cesium._shadersAtmosphereCommon,Va=Cesium._shadersGroundAtmosphere;function Ya(e){e=ba(e,Aa.WGS84);const t=new Ea({ellipsoid:e}),i=new Ha;this._ellipsoid=e,this._imageryLayerCollection=i,this._from="cesiumpro-globe",this._surfaceShaderSet=new Fa,this._material=void 0,this._surface=new za({tileProvider:new Ga({terrainProvider:t,imageryLayers:i,surfaceShaderSet:this._surfaceShaderSet})}),this._terrainProvider=t,this._terrainProviderChanged=new Pa,this._undergroundColor=wa.clone(wa.BLACK),this._undergroundColorAlphaByDistance=new Ma(e.maximumRadius/1e3,0,e.maximumRadius/5,1),this._translucency=new Ba,Xa(this),this.show=!0,this._oceanNormalMapResourceDirty=!0,this._oceanNormalMapResource=new Ra({url:va("Assets/Textures/waterNormalsSmall.jpg")}),this.maximumScreenSpaceError=2,this.tileCacheSize=100,this.loadingDescendantLimit=20,this.preloadAncestors=!0,this.preloadSiblings=!1,this.fillHighlightColor=void 0,this.enableLighting=!1,this.lambertDiffuseMultiplier=.9,this.dynamicAtmosphereLighting=!0,this.dynamicAtmosphereLightingFromSun=!1,this.showGroundAtmosphere=!0,this.atmosphereLightIntensity=10,this.atmosphereRayleighCoefficient=new _a(55e-7,13e-6,284e-7),this.atmosphereMieCoefficient=new _a(21e-6,21e-6,21e-6),this.atmosphereRayleighScaleHeight=1e4,this.atmosphereMieScaleHeight=3200,this.atmosphereMieAnisotropy=.9,this.lightingFadeOutDistance=1e7,this.lightingFadeInDistance=2e7,this.nightFadeOutDistance=1e7,this.nightFadeInDistance=5e7,this.showWaterEffect=!0,this.depthTestAgainstTerrain=!1,this.shadows=Wa.RECEIVE_ONLY,this.atmosphereHueShift=0,this.atmosphereSaturationShift=0,this.atmosphereBrightnessShift=0,this.terrainExaggeration=1,this.terrainExaggerationRelativeHeight=0,this.showSkirts=!0,this.backFaceCulling=!0,this._oceanNormalMap=void 0,this._zoomedOutOceanSpecularIntensity=void 0}function Xa(e){const t=[],i=xa(e._material)&&(e._material.shaderSource.match(/slope/)||e._material.shaderSource.match("normalEC")),n=[$a,Va];!xa(e._material)||i&&!e._terrainProvider.requestVertexNormals?e._surface._tileProvider.materialUniformMap=void 0:(n.push(e._material.shaderSource),t.push("APPLY_MATERIAL"),e._surface._tileProvider.materialUniformMap=e._material._uniforms),n.push(qa),e._surfaceShaderSet.baseVertexShaderSource=new ka({sources:[$a,Va,ja],defines:t}),e._surfaceShaderSet.baseFragmentShaderSource=new ka({sources:n,defines:t}),e._surfaceShaderSet.material=e._material}Object.defineProperties(Ya.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},imageryLayers:{get:function(){return this._imageryLayerCollection}},imageryLayersUpdatedEvent:{get:function(){return this._surface.tileProvider.imageryLayersUpdatedEvent}},tilesLoaded:{get:function(){return!xa(this._surface)||this._surface.tileProvider.ready&&0===this._surface._tileLoadQueueHigh.length&&0===this._surface._tileLoadQueueMedium.length&&0===this._surface._tileLoadQueueLow.length}},baseColor:{get:function(){return this._surface.tileProvider.baseColor},set:function(e){this._surface.tileProvider.baseColor=e}},clippingPlanes:{get:function(){return this._surface.tileProvider.clippingPlanes},set:function(e){this._surface.tileProvider.clippingPlanes=e}},cartographicLimitRectangle:{get:function(){return this._surface.tileProvider.cartographicLimitRectangle},set:function(e){xa(e)||(e=Na.clone(Na.MAX_VALUE)),this._surface.tileProvider.cartographicLimitRectangle=e}},oceanNormalMapUrl:{get:function(){return this._oceanNormalMapResource.url},set:function(e){this._oceanNormalMapResource.url=e,this._oceanNormalMapResourceDirty=!0}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){e!==this._terrainProvider&&(this._terrainProvider=e,this._terrainProviderChanged.raiseEvent(e),xa(this._material)&&Xa(this))}},terrainProviderChanged:{get:function(){return this._terrainProviderChanged}},tileLoadProgressEvent:{get:function(){return this._surface.tileLoadProgressEvent}},material:{get:function(){return this._material},set:function(e){this._material!==e&&(this._material=e,Xa(this))}},undergroundColor:{get:function(){return this._undergroundColor},set:function(e){this._undergroundColor=wa.clone(e,this._undergroundColor)}},undergroundColorAlphaByDistance:{get:function(){return this._undergroundColorAlphaByDistance},set:function(e){this._undergroundColorAlphaByDistance=Ma.clone(e,this._undergroundColorAlphaByDistance)}},translucency:{get:function(){return this._translucency}}});const Ja=[],Qa={start:0,stop:0};Ya.prototype.pickWorldCoordinates=function(e,t,i,n){i=ba(i,!0);const r=t.mode,o=t.mapProjection,s=Ja;s.length=0;const a=this._surface._tilesToRender;let l,c,u=a.length;for(c=0;c<u;++c){l=a[c];const t=l.data;if(!xa(t))continue;let i=t.pickBoundingSphere;if(r!==Ua.SCENE3D)t.pickBoundingSphere=i=ya.fromRectangleWithHeights2D(l.rectangle,o,t.tileBoundingRegion.minimumHeight,t.tileBoundingRegion.maximumHeight,i),_a.fromElements(i.center.z,i.center.x,i.center.y,i.center);else{if(!xa(t.renderedMesh))continue;ya.clone(t.tileBoundingRegion.boundingSphere,i)}const n=La.raySphere(e,i,Qa);xa(n)&&s.push(t)}var h;let d;for(s.sort((h=e.origin,function(e,t){return ya.distanceSquaredTo(e.pickBoundingSphere,h)-ya.distanceSquaredTo(t.pickBoundingSphere,h)})),u=s.length,c=0;c<u&&(d=s[c].pick(e,t.mode,t.mapProjection,i,n),!xa(d));++c);return d};const Za=new Ca;Ya.prototype.pick=function(e,t,i){if(i=this.pickWorldCoordinates(e,t,!0,i),xa(i)&&t.mode!==Ua.SCENE3D){i=_a.fromElements(i.y,i.z,i.x,i);const e=t.mapProjection.unproject(i,Za);i=t.globe.ellipsoid.cartographicToCartesian(e,i)}return i};const Ka=new _a,el=new _a,tl=new Ca,il=new Da;function nl(e,t){return xa(e)&&Na.contains(e.rectangle,t)?e:void 0}Ya.prototype.getHeight=function(e){const t=this._surface._levelZeroTiles;if(!xa(t))return;let i,n;const r=t.length;for(n=0;n<r&&(i=t[n],!Na.contains(i.rectangle,e));++n);if(n>=r)return;let o=i;for(;xa(i);)i=nl(i._southwestChild,e)||nl(i._southeastChild,e)||nl(i._northwestChild,e)||i._northeastChild,xa(i)&&xa(i.data)&&xa(i.data.renderedMesh)&&(o=i);if(i=o,!xa(i)||!xa(i.data)||!xa(i.data.renderedMesh))return;const s=this._surface._tileProvider.tilingScheme.projection,a=this._surface._tileProvider.tilingScheme.ellipsoid,l=_a.fromRadians(e.longitude,e.latitude,0,a,Ka),c=il,u=a.geodeticSurfaceNormal(l,c.direction),h=a.getSurfaceNormalIntersectionWithZAxis(l,11500,c.origin);if(!xa(h)){let e;xa(i.data.tileBoundingRegion)&&(e=i.data.tileBoundingRegion.minimumHeight);const t=Math.min(ba(e,0),-11500),n=_a.multiplyByScalar(u,Math.abs(t)+1,el);_a.subtract(l,n,c.origin)}const d=i.data.pick(c,void 0,s,!1,el);return xa(d)?a.cartesianToCartographic(d,tl).height:void 0},Ya.prototype.update=function(e){this.show&&e.passes.render&&this._surface.update(e)},Ya.prototype.beginFrame=function(e){const t=this._surface,i=t.tileProvider,n=this.terrainProvider,r=this.showWaterEffect&&n.ready&&n.hasWaterMask;if(r&&this._oceanNormalMapResourceDirty){this._oceanNormalMapResourceDirty=!1;const t=this._oceanNormalMapResource,i=t.url;if(xa(i)){const n=this;t.fetchImage().then((function(t){i===n._oceanNormalMapResource.url&&(n._oceanNormalMap=n._oceanNormalMap&&n._oceanNormalMap.destroy(),n._oceanNormalMap=new Oa({context:e.context,source:t}))}))}else this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy()}const o=e.passes,s=e.mode;o.render&&(this.showGroundAtmosphere?this._zoomedOutOceanSpecularIntensity=.4:this._zoomedOutOceanSpecularIntensity=.5,t.maximumScreenSpaceError=this.maximumScreenSpaceError,t.tileCacheSize=this.tileCacheSize,t.loadingDescendantLimit=this.loadingDescendantLimit,t.preloadAncestors=this.preloadAncestors,t.preloadSiblings=this.preloadSiblings,i.terrainProvider=this.terrainProvider,i.lightingFadeOutDistance=this.lightingFadeOutDistance,i.lightingFadeInDistance=this.lightingFadeInDistance,i.nightFadeOutDistance=this.nightFadeOutDistance,i.nightFadeInDistance=this.nightFadeInDistance,i.zoomedOutOceanSpecularIntensity=s===Ua.SCENE3D?this._zoomedOutOceanSpecularIntensity:0,i.hasWaterMask=r,i.oceanNormalMap=this._oceanNormalMap,i.enableLighting=this.enableLighting,i.dynamicAtmosphereLighting=this.dynamicAtmosphereLighting,i.dynamicAtmosphereLightingFromSun=this.dynamicAtmosphereLightingFromSun,i.showGroundAtmosphere=this.showGroundAtmosphere,i.atmosphereLightIntensity=this.atmosphereLightIntensity,i.atmosphereRayleighCoefficient=this.atmosphereRayleighCoefficient,i.atmosphereMieCoefficient=this.atmosphereMieCoefficient,i.atmosphereRayleighScaleHeight=this.atmosphereRayleighScaleHeight,i.atmosphereMieScaleHeight=this.atmosphereMieScaleHeight,i.atmosphereMieAnisotropy=this.atmosphereMieAnisotropy,i.shadows=this.shadows,i.hueShift=this.atmosphereHueShift,i.saturationShift=this.atmosphereSaturationShift,i.brightnessShift=this.atmosphereBrightnessShift,i.fillHighlightColor=this.fillHighlightColor,i.showSkirts=this.showSkirts,i.backFaceCulling=this.backFaceCulling,i.undergroundColor=this._undergroundColor,i.undergroundColorAlphaByDistance=this._undergroundColorAlphaByDistance,i.lambertDiffuseMultiplier=this.lambertDiffuseMultiplier,t.beginFrame(e))},Ya.prototype.render=function(e){this.show&&(xa(this._material)&&this._material.update(e.context),this._surface.render(e))},Ya.prototype.endFrame=function(e){this.show&&e.passes.render&&this._surface.endFrame(e)},Ya.prototype.isDestroyed=function(){return!1},Ya.prototype.destroy=function(){return this._surfaceShaderSet=this._surfaceShaderSet&&this._surfaceShaderSet.destroy(),this._surface=this._surface&&this._surface.destroy(),this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy(),Sa(this)};const{ShaderProgram:rl,RuntimeError:ol,createUniform:sl,defined:al,createUniformArray:ll,WebGLConstants:cl}=Cesium;function ul(e){this._size=e.size,this._datatype=e.datatype,this.getValue=e.getValue}const hl=Cesium.AutomaticUniforms,dl="[Cesium WebGL] ",pl={...hl,czm_p_drawingBufferWidth:new ul({size:1,datatype:cl.FLOAT,getValue:function(e){return e._frameState.context.drawingBufferWidth}}),czm_p_drawingBufferHeight:new ul({size:1,datatype:cl.FLOAT,getValue:function(e){return e._frameState.context.drawingBufferHeight}}),czm_p_imagerySplitPosition:new ul({size:1,datatype:cl.FLOAT,getValue:function(e){return e._frameState.imagerySplitPosition}})};function fl(e){al(e._program)||ml(e)}function ml(e){var t=e._program,i=e._gl,n=function(e,t){var i=t._vertexShaderText,n=t._fragmentShaderText,r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,i),e.compileShader(r);var o=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(o,n),e.compileShader(o);var s=e.createProgram();e.attachShader(s,r),e.attachShader(s,o),e.deleteShader(r),e.deleteShader(o);var a,l=t._attributeLocations;if(al(l))for(var c in l)l.hasOwnProperty(c)&&e.bindAttribLocation(s,l[c],c);if(e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS)){var u=t._debugShaders;if(!e.getShaderParameter(o,e.COMPILE_STATUS)){if(a=e.getShaderInfoLog(o),console.error(dl+"Fragment shader compile log: "+a),al(u)){var h=u.getTranslatedShaderSource(o);""!==h?console.error(dl+"Translated fragment shader source:\n"+h):console.error(dl+"Fragment shader translation failed.")}throw e.deleteProgram(s),new ol("Fragment shader failed to compile.  Compile log: "+a)}if(!e.getShaderParameter(r,e.COMPILE_STATUS)){if(a=e.getShaderInfoLog(r),console.error(dl+"Vertex shader compile log: "+a),al(u)){var d=u.getTranslatedShaderSource(r);""!==d?console.error(dl+"Translated vertex shader source:\n"+d):console.error(dl+"Vertex shader translation failed.")}throw e.deleteProgram(s),new ol("Vertex shader failed to compile.  Compile log: "+a)}throw a=e.getProgramInfoLog(s),console.error(dl+"Shader program link log: "+a),al(u)&&(console.error(dl+"Translated vertex shader source:\n"+u.getTranslatedShaderSource(r)),console.error(dl+"Translated fragment shader source:\n"+u.getTranslatedShaderSource(o))),e.deleteProgram(s),new ol("Program failed to link.  Link log: "+a)}var p=t._logShaderCompilation;return p&&(a=e.getShaderInfoLog(r),al(a)&&a.length>0&&console.log(dl+"Vertex shader compile log: "+a)),p&&(a=e.getShaderInfoLog(o),al(a)&&a.length>0&&console.log(dl+"Fragment shader compile log: "+a)),p&&(a=e.getProgramInfoLog(s),al(a)&&a.length>0&&console.log(dl+"Shader program link log: "+a)),s}(i,e,e._debugShaders),r=i.getProgramParameter(n,i.ACTIVE_ATTRIBUTES),o=function(e,t){for(var i={},n=[],r=[],o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=0;s<o;++s){var a=e.getActiveUniform(t,s),l=-1!==a.name.indexOf("[0]",a.name.length-"[0]".length)?a.name.slice(0,a.name.length-3):a.name;if(0!==l.indexOf("gl_"))if(a.name.indexOf("[")<0){var c=e.getUniformLocation(t,l);if(null!==c){var u=sl(e,a,l,c);i[l]=u,n.push(u),u._setSampler&&r.push(u)}}else{var h,d,p,f,m=l.indexOf("[");if(m>=0){if(h=i[l.slice(0,m)],!al(h))continue;(d=h._locations).length<=1&&(p=h.value,null!==(f=e.getUniformLocation(t,l))&&(d.push(f),p.push(e.getUniform(t,f))))}else{d=[];for(var g=0;g<a.size;++g)null!==(f=e.getUniformLocation(t,l+"["+g+"]"))&&d.push(f);h=ll(e,a,l,d),i[l]=h,n.push(h),h._setSampler&&r.push(h)}}}return{uniformsByName:i,uniforms:n,samplerUniforms:r}}(i,n),s=function(e,t){var i=[],n=[];for(var r in t)if(t.hasOwnProperty(r)){var o=t[r],s=r,a=e._duplicateUniformNames[s];al(a)&&(o.name=a,s=a);var l=pl[s];al(l)?i.push({uniform:o,automaticUniform:l}):n.push(o)}return{automaticUniforms:i,manualUniforms:n}}(e,o.uniformsByName);e._program=n,e._numberOfVertexAttributes=r,e._vertexAttributes=function(e,t,i){for(var n={},r=0;r<i;++r){var o=e.getActiveAttrib(t,r),s=e.getAttribLocation(t,o.name);n[o.name]={name:o.name,type:o.type,index:s}}return n}(i,n,r),e._uniformsByName=o.uniformsByName,e._uniforms=o.uniforms,e._automaticUniforms=s.automaticUniforms,e._manualUniforms=s.manualUniforms,e.maximumTextureUnitIndex=function(e,t,i){e.useProgram(t);for(var n=0,r=i.length,o=0;o<r;++o)n=i[o]._setSampler(n);return e.useProgram(null),n}(i,n,o.samplerUniforms),t&&e._gl.deleteProgram(t),"undefined"!=typeof spector&&(e._program.__SPECTOR_rebuildProgram=function(t,i,n,r){var o=e._vertexShaderText,s=e._fragmentShaderText,a=/ ! = /g;e._vertexShaderText=t.replace(a," != "),e._fragmentShaderText=i.replace(a," != ");try{ml(e),n(e._program)}catch(t){e._vertexShaderText=o,e._fragmentShaderText=s;var l=/(?:Compile|Link) error: ([^]*)/.exec(t.message);r(l?l[1]:t.message)}})}function gl(){const e=rl.prototype;rl.prototype={},rl.prototype._bind=function(){fl(this),this._gl.useProgram(this._program)},rl.prototype.destroy=e.destroy,rl.prototype._setUniforms=function(t,i,n){e._setUniforms.call(this,t,i,n)},rl.prototype.isDestroyed=e.isDestroyed,rl.prototype.finalDestroy=e.finalDestroy,Object.defineProperties(rl.prototype,{vertexAttributes:{get:function(){return fl(this),this._vertexAttributes}},numberOfVertexAttributes:{get:function(){return fl(this),this._numberOfVertexAttributes}},allUniforms:{get:function(){return fl(this),this._uniformsByName}},vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}}})}const yl=Cesium.Scene,{JulianDate:vl,defined:_l,RequestScheduler:Cl,PerformanceDisplay:wl,Cesium3DTilePassState:bl,Cesium3DTilePass:xl,defaultValue:Sl,Color:Tl,BoundingRectangle:Al,Pass:El,SunLight:Pl,Cartesian3:Ll}=Cesium,Ml=new bl({pass:xl.PRELOAD}),Dl=new bl({pass:xl.PRELOAD_FLIGHT}),Nl=new bl({pass:xl.REQUEST_RENDER_MODE_DEFER_CHECK});function Rl(e,t){try{t(e)}catch(t){if(e._renderError.raiseEvent(e,t),e.rethrowRenderErrors)throw t}}function kl(e){e._jobScheduler.resetBudgets();var t=e._frameState;e.primitives.prePassesUpdate(t),_l(e.globe)&&e.globe.update(t),e._picking.update(),t.creditDisplay.update()}function Ol(e){return e._picking.updateMostDetailedRayPicks(e)}function Il(e){var t=e._frameState;Ml.camera=t.camera,Ml.cullingVolume=t.cullingVolume,e.primitives.updateForPass(t,Ml)}function Fl(e){var t=e._frameState;t.camera.canPreloadFlight()&&(Dl.camera=e.preloadFlightCamera,Dl.cullingVolume=e.preloadFlightCullingVolume,e.primitives.updateForPass(t,Dl))}const Gl=new bl({pass:xl.RENDER});function Bl(e){e.primitives.updateForPass(e._frameState,Nl)}function Hl(e){var t=e._frameState;e.primitives.postPassesUpdate(t),Cl.update()}function zl(e){var t=e._frameState,i=e.context,n=i.uniformState,r=e._defaultView;e._view=r,e.updateFrameState(),t.passes.render=!0,t.passes.postProcess=e.postProcessStages.hasSelected,t.tilesetPassState=Gl;var o=Sl(e.backgroundColor,Tl.BLACK);e._hdr&&((o=Tl.clone(o,scratchBackgroundColor)).red=Math.pow(o.red,e.gamma),o.green=Math.pow(o.green,e.gamma),o.blue=Math.pow(o.blue,e.gamma)),t.backgroundColor=o,e.fog.update(t),n.update(t);var s=e.shadowMap;_l(s)&&s.enabled&&(!_l(e.light)||e.light instanceof Pl?Ll.negate(n.sunDirectionWC,e._shadowMapCamera.direction):Ll.clone(e.light.direction,e._shadowMapCamera.direction),t.shadowMaps.push(s)),e._computeCommandList.length=0,e._overlayCommandList.length=0;var a=r.viewport;a.x=0,a.y=0,a.width=i.drawingBufferWidth,a.height=i.drawingBufferHeight;var l=r.passState;l.framebuffer=void 0,l.blendingEnabled=void 0,l.scissorTest=void 0,l.viewport=Al.clone(a,l.viewport),_l(e.globe)&&(e.globe.beginFrame(t),e._LodGraphic.beginFrame(t)),e.updateEnvironment(),e.updateAndExecuteCommands(l,o),e.globe&&e._LodGraphic.render(t),e.resolveFramebuffers(l),l.framebuffer=void 0,function(e,t){e.context.uniformState.updatePass(El.OVERLAY);for(var i=e.context,n=e._overlayCommandList,r=n.length,o=0;o<r;++o)n[o].execute(i,t)}(e,l),_l(e.globe)&&(e.globe.endFrame(t),e._LodGraphic.endFrame(t),e.globe.tilesLoaded||(e._renderRequested=!0)),i.endFrame()}function Ul(e){this._preUpdate.raiseEvent(this,e);var t=this._frameState;t.newFrame=!1,_l(e)||(e=vl.now());var i=this._view.checkForCameraUpdates(this),n=!this.requestRenderMode||this._renderRequested||i||this._logDepthBufferDirty||this._hdrDirty||this.mode===SceneMode.MORPHING;if(!n&&_l(this.maximumRenderTimeChange)&&_l(this._lastRenderTime)){var r=Math.abs(vl.secondsDifference(this._lastRenderTime,e));n=n||r>this.maximumRenderTimeChange}n&&(this._lastRenderTime=vl.clone(e,this._lastRenderTime),this._renderRequested=!1,this._logDepthBufferDirty=!1,this._hdrDirty=!1,function(e,t,i){var n=e._frameState;n.frameNumber=t,n.time=vl.clone(i,n.time)}(this,Cesium.Math.incrementWrap(t.frameNumber,15e6,1),e),t.newFrame=!0);Rl(this,kl),this.primitives.show&&(Rl(this,Ol),Rl(this,Il),Rl(this,Fl),n||Rl(this,Bl)),this._postUpdate.raiseEvent(this,e),n&&(this._preRender.raiseEvent(this,e),t.creditDisplay.beginFrame(),Rl(this,zl)),function(e,t){if(e.debugShowFramesPerSecond){if(!_l(e._performanceDisplay)){var i=document.createElement("div");i.className="cesium-performanceDisplay-defaultContainer",e._canvas.parentNode.appendChild(i);var n=new wl({container:i});e._performanceDisplay=n,e._performanceContainer=i}e._performanceDisplay.throttled=e.requestRenderMode,e._performanceDisplay.update(t)}else _l(e._performanceDisplay)&&(e._performanceDisplay=e._performanceDisplay&&e._performanceDisplay.destroy(),e._performanceContainer.parentNode.removeChild(e._performanceContainer))}(this,n),Rl(this,Hl),function(e){for(var t=e._frameState.afterRender,i=0,n=t.length;i<n;++i)t[i](),e.requestRender();t.length=0}(this),n&&(this._postRender.raiseEvent(this,e),t.creditDisplay.endFrame())}function Wl(){(class{static overrideRenderFunction(){yl.prototype.render=Ul}}).overrideRenderFunction()}const{Primitive:jl,ShaderProgram:ql,defined:$l,DeveloperError:Vl,defaultValue:Yl,ShaderSource:Xl}=Cesium,Jl=jl.prototype.update;function Ql(e){return Xl.replaceMain(e,"czm_non_pick_main")+"\nvarying vec4 v_pickColor; \nvoid main() \n{ \n    czm_non_pick_main(); \n    v_pickColor = czm_batchTable_pickColor(batchId); \n}"}function Zl(e,t){if(!e.compressVertices)return t;var i=-1!==t.search(/attribute\s+vec3\s+normal;/g),n=-1!==t.search(/attribute\s+vec2\s+st;/g);if(!i&&!n)return t;var r=-1!==t.search(/attribute\s+vec3\s+tangent;/g),o=-1!==t.search(/attribute\s+vec3\s+bitangent;/g),s=n&&i?2:1,a="compressedAttributes",l="attribute "+((s+=r||o?1:0)>1?"vec"+s:"float")+" "+a+";",c="",u="";n&&(c+="vec2 st;\n",u+="    st = czm_decompressTextureCoordinates("+(s>1?a+".x":a)+");\n");i&&r&&o?(c+="vec3 normal;\nvec3 tangent;\nvec3 bitangent;\n",u+="    czm_octDecode("+a+"."+(n?"yz":"xy")+", normal, tangent, bitangent);\n"):(i&&(c+="vec3 normal;\n",u+="    normal = czm_octDecode("+a+(s>1?"."+(n?"y":"x"):"")+");\n"),r&&(c+="vec3 tangent;\n",u+="    tangent = czm_octDecode("+a+"."+(n&&i?"z":"y")+");\n"),o&&(c+="vec3 bitangent;\n",u+="    bitangent = czm_octDecode("+a+"."+(n&&i?"z":"y")+");\n"));var h=t;return h=(h=(h=(h=h.replace(/attribute\s+vec3\s+normal;/g,"")).replace(/attribute\s+vec2\s+st;/g,"")).replace(/attribute\s+vec3\s+tangent;/g,"")).replace(/attribute\s+vec3\s+bitangent;/g,""),[l,c,h=Xl.replaceMain(h,"czm_non_compressed_main"),"void main() \n{ \n"+u+"    czm_non_compressed_main(); \n}"].join("\n")}function Kl(e){return"varying vec4 v_pickColor;\n"+e}function ec(e,t){e.vertexAttributes}function tc(e,t,i){const n=t.context,r=e._attributeLocations;let o=e._batchTable.getVertexShaderCallback()(i.vertexShaderSource);o=jl._appendOffsetToShader(e,o),o=jl._appendShowToShader(e,o),o=jl._appendDistanceDisplayConditionToShader(e,o,t.scene3DOnly),o=Ql(o),o=jl._updateColorAttribute(e,o,!1),o=Zl(e,o),o=jl._modifyShaderPosition(e,o,t.scene3DOnly);var s,a,l=i.getFragmentShaderSource();l=Kl(l),e._sp=ql.replaceCache({context:n,shaderProgram:e._sp,vertexShaderSource:o,fragmentShaderSource:l,attributeLocations:r}),ec(e._sp),$l(e._depthFailAppearance)&&(o=e._batchTable.getVertexShaderCallback()(e._depthFailAppearance.vertexShaderSource),o=jl._appendShowToShader(e,o),o=jl._appendDistanceDisplayConditionToShader(e,o,t.scene3DOnly),o=Ql(o),o=jl._updateColorAttribute(e,o,!0),o=Zl(e,o),o=jl._modifyShaderPosition(e,o,t.scene3DOnly),a=o,o=Xl.replaceMain(a,"czm_non_depth_clamp_main")+"void main() {\n    czm_non_depth_clamp_main();\n    gl_Position = czm_depthClamp(gl_Position);}\n",l=Kl(l=e._depthFailAppearance.getFragmentShaderSource()),s=l,l="#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\n"+Xl.replaceMain(s,"czm_non_depth_clamp_main")+"void main() {\n    czm_non_depth_clamp_main();\n#if defined(GL_EXT_frag_depth)\n    #if defined(LOG_DEPTH)\n        czm_writeLogDepth();\n    #else\n        czm_writeDepthClamp();\n    #endif\n#endif\n}\n",e._spDepthFail=ql.replaceCache({context:n,shaderProgram:e._spDepthFail,vertexShaderSource:o,fragmentShaderSource:l,attributeLocations:r}),ec(e._spDepthFail))}function ic(){Wl(),gl()}const{Matrix4:nc,BoundingSphere:rc,ScreenSpaceEventType:oc,ScreenSpaceEventHandler:sc}=Cesium;function ac(e,t,i){e.camera.flyToBoundingSphere(t,{duration:i.duration,maximumHeight:i.maximumHeight,endTransform:i.endTransform,offset:i.offset,complete:function(){e._zoomPromise.resolve(!0)},cancel:function(){e._zoomPromise.resolve(!1)},offset:i.offset})}let lc,cc,uc=0,hc=0,dc="N/A",pc="N/A";function fc(e){return null!=e&&"object"==typeof e&&"function"==typeof e.then}function mc(e,t,i,n){const r=Cesium.Cartesian3.fromDegrees(t,i,n),o=e.camera,s=o.heading,a=o.pitch,l=function(e,t,i){t=Cesium.Math.clamp(t,-Cesium.Math.PI_OVER_TWO,Cesium.Math.PI_OVER_TWO),e=Cesium.Math.zeroToTwoPi(e)-Cesium.Math.PI_OVER_TWO;const n=Cesium.Quaternion.fromAxisAngle(Cesium.Cartesian3.UNIT_Y,-t),r=Cesium.Quaternion.fromAxisAngle(Cesium.Cartesian3.UNIT_Z,-e),o=Cesium.Quaternion.multiply(r,n,r),s=Cesium.Matrix3.fromQuaternion(o),a=Cesium.Cartesian3.clone(Cesium.Cartesian3.UNIT_X);return Cesium.Matrix3.multiplyByVector(s,a,a),Cesium.Cartesian3.negate(a,a),Cesium.Cartesian3.multiplyByScalar(a,i,a),a}(s,a,2*n),c=Cesium.Transforms.eastNorthUpToFixedFrame(r);Cesium.Matrix4.multiplyByPoint(c,l,r),o.setView({destination:r,orientation:{heading:s,pitch:a},easingFunction:Cesium.EasingFunction.QUADRATIC_OUT})}function gc(e,t){e.infoBox&&(t._infoBox=function(e){const t=document.createElement("div");t.className="cesium-viewer-infoBoxContainer",e.container.appendChild(t);const i=new zs(t),n=i.viewModel;return e._eventHelper.add(n.cameraClicked,vc.prototype._onInfoBoxCameraClicked,e),e._eventHelper.add(n.closeClicked,vc.prototype._onInfoBoxClockClicked,e),e._enableInfoOrSelection=!0,i}(t))}function yc(e,t,i){const n=e._zoomPromise=Cesium.when.defer();return t.readyPromise.then((()=>{if(t._boundingSpheres)ac(e,rc.fromBoundingSpheres(t._boundingSpheres),i);else if(t.boundingSphere){let n=t.boundingSphere;n=rc.clone(n),t.modelMatrix&&nc.multiplyByPoint(t.modelMatrix,n.center,n.center),ac(e,n,i)}})),n}class vc extends Cesium.Viewer{constructor(e,t={}){t=Object.assign({animation:!1,timeline:!1,geocoder:!1,homeButton:!1,navigationHelpButton:!1,baseLayerPicker:!1,fullscreenElement:"cesiumContainer",fullscreenButton:!1,shouldAnimate:!0,infoBox:!1,selectionIndicator:!1,sceneModePicker:!1,shadows:!1,imageryProvider:_r(),contextOptions:{webgl:{alpha:!0,depth:!1,stencil:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0,failIfMajorPerformanceCaveat:!0},allowTextureFilterAnisotropic:!0}},t),Cesium.Camera.DEFAULT_VIEW_RECTANGLE=Cesium.Rectangle.fromDegrees(70,5,130,60),!1===t.globe&&(t.imageryProvider=void 0);const i=Object.assign({},t,{infoBox:!1});i.globe?i.globe=new Ya(i.globe._ellipsoid):!1!==i.globe&&(i.globe=new Ya),super(e,i);const n=document.querySelector(".cesium-credit-logoContainer");if(n&&n.parentElement.removeChild(n),gc(t,this),this._options=t,this.scene.postRender.addEventListener(this.update,this),this._distancePerPixel=void 0,this._extent=void 0,this._center=void 0,this._autoRotation=!1,this.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.scene.globe){const e=new ga({terrainProvider:this.terrainProvider,scene:this.scene}),t=new Cesium.QuadtreePrimitive({tileProvider:e});this.scene._LodGraphic=t}this.scene.dataSources=this.dataSources,this._graphicGroup=new _n(this)}get graphicGroup(){return this._graphicGroup}get massiveGraphicLayers(){return this.scene._LodGraphic.tileProvider._layers}get entities(){return super.entities}get primitives(){return this.scene.primitives}get enableLighting(){if(z(this.globe))return this.scene.globe.enableLighting}set enableLighting(e){z(this.globe)&&(this.scene.globe.enableLighting=e)}get autoRotation(){return this._autoRotation}set autoRotation(e){this._autoRotation=e}get fxaa(){return this.scene.postProcessStages.fxaa.enabled}set fxaa(e){this.scene.postProcessStages.fxaa.enabled=e}get distancePerPixel(){return this._distancePerPixel}get extent(){return this._extent}get center(){return this._center}get container(){return this._container}get layers(){return this.scene.imageryLayers}get dataSources(){return super.dataSources}get globe(){return this.scene.globe}get ellipsoid(){if(this.globe)return this.globe.ellipsoid}get terrain(){return this.terrainProvider}set terrain(e){z(e)&&!1!==e||(this.terrainProvider=new Cesium.EllipsoidTerrainProvider),e!==this.terrainProvider&&(this.terrainProvider=e)}get terrainChanged(){return this.scene.terrainProviderChanged}get terrainExaggeration(){if(this.globe)return this.globe.terrainExaggeration}set terrainExaggeration(e){e<0&&(e=0),this.globe&&(this.globe.terrainExaggeration=e)}get showFps(){return this.scene.debugShowFramesPerSecond}set showFps(e){this.scene.debugShowFramesPerSecond=e}get fps(){return this._fps+"FPS"}get ms(){return this._ms+"MS"}get heading(){return Cesium.Math.toDegrees(this.camera.heading)}get pitch(){return Cesium.Math.toDegrees(this.camera.pitch)}get roll(){return Cesium.Math.toDegrees(this.camera.roll)}get depthTest(){return this.scene.globe.depthTestAgainstTerrain}set depthTest(e){this.scene.globe.depthTestAgainstTerrain=e}addModel(e){this.primitives.add(e.delegate)}removeModel(e){this.primitives.remove(e.delegate)}setView(e){let t;e instanceof Cesium.Cartographic?t=me.fromCartographic(e):e instanceof Cesium.Cartesian3?t=me.fromCartesian(e):e instanceof me&&(t=e),t&&mc(this,t.lon,t.lat,t.alt)}stepFlyTo(e={}){let t;e.destination instanceof Cesium.Cartesian3?t=me.fromCartesian(e.destination):e.destination instanceof Cesium.Cartographic?t=me.fromCartographic(e.destination):e.destination instanceof me&&(t=e.destination),t&&(e.destination=t,function(e,t={}){const{camera:i}=e,n=B(t.step1Duration,3),r=B(t.step2Duration,3),o=B(t.step3Duration,3),s=t.destination,a=e.camera._positionCartographic.height,l=Cesium.Cartesian3.fromDegrees(s.lon,s.lat,a),c=t.destination.toCartesian();new Promise((e=>{i.flyTo({destination:l,duration:n,complete(){i.flyTo({destination:c,duration:r,complete(){i.flyTo({destination:c,orientation:t.orientation,duration:o,complete(){e()}})}})}})}))}(this,e))}linkView(e){if(!z(e))throw new t("viewer不是一个有效的Cesium.Viewer对象");return function(e,t){let i,n;return n=function n(r,o){return r.scene.postRender.addEventListener((()=>{const s=r.camera.positionWC,a=r.camera.heading,l=r.camera.pitch,c=r.camera.roll;i&&(i(),i=void 0),o.camera.flyTo({destination:s,orientation:{heading:a,pitch:l,roll:c},duration:0,complete:function(){i=n(t,e)},cancel:function(){i=n(t,e)}})}))}(e,t),function(){n&&n(),i&&i()}}(this,e)}flyTo(e,t={}){if(e instanceof me){const i=e.toCartesian();return this.flyTo(i,t)}if(e instanceof Cesium.Cartesian3){const i=viewer._zoomPromise=Cesium.when.defer(),n=B(t.radius,1e3);delete t.radius;return ac(this,new Cesium.BoundingSphere(e,n),t),i}return e instanceof Cesium.Primitive||e instanceof Cesium.Model?yc(this,e,t):e instanceof js?yc(this,e.delegate,t):e instanceof $s?super.flyTo(e.delegate,t):e.boundingSphere?this.camera.flyToBoundingSphere(e.boundingSphere):super.flyTo(e,t)}rotateAroundPoint(e,t={}){const i=this;let n;if(e instanceof Cesium.Cartesian3)n=e;else if(e instanceof Cesium.Cartographic)n=Cesium.Cartographic.toCartesian(e);else{if(!(e instanceof me))return;n=e.toCartesian()}const r=B(t.multiplier,1),o=B(t.offset,{});return this._cancelRotateAroundPoint&&(this._cancelRotateAroundPoint(),this._cancelRotateAroundPoint=void 0),this._cancelRotateAroundPoint=this.scene.postRender.addEventListener((function(){const e=Cesium.Math.toRadians(B(o.heading,i.heading)+1*r),t=Cesium.Math.toRadians(B(o.pitch,-20)),s=B(o.range,1e4);i.flyTo(n,{duration:0,offset:new Cesium.HeadingPitchRange(e,t,s)})})),this._cancelRotateAroundPoint}addLayer(e){return e instanceof Cesium.GeoJsonDataSource||e instanceof Cesium.KmlDataSource||e instanceof Cesium.CzmlDataSource||e instanceof Cesium.CustomDataSource||e instanceof po||e instanceof Ns||fc(e)?this.dataSources.add(e):this.layers.addImageryProvider(e)}removeLayer(e){if(fc(e))e.then((e=>{this.removeLayer(e)}));else{this.layers.remove(e)||this.dataSources.remove(e)}}pickLayer(e){const t=this.scene,i=t.camera.getPickRay(e);return this.layers.pickImageryLayerFeatures(i,t)}render(){super.render()}update(){const e=function(){z(lc)||(lc=Cesium.getTimestamp()),z(cc)||(cc=Cesium.getTimestamp()),uc++;const e=Cesium.getTimestamp();let t=(e-lc)/1e3;return t>1&&(dc=uc/t||0,lc=e,uc=0,dc=dc.toFixed(0)),hc++,t=e-cc,t>100&&(pc=t/hc,cc=e,hc=0,pc=pc.toFixed(2)),{ms:pc,fps:dc}}();this._fps=e.fps,this._ms=e.ms;const t=fe(this);t&&(this._distancePerPixel=t),this._extent=ye(this),this._center=ge(this),this._autoRotation&&function(e){if(!e||e.scene.mode!==Cesium.SceneMode.SCENE3D)return;const t=Cesium.Transforms.computeIcrfToFixedMatrix(e.clock.currentTime);if(z(t)){const i=e.camera,n=Cesium.Cartesian3.clone(i.position),r=Cesium.Matrix4.fromRotationTranslation(t);i.lookAtTransform(r,n)}}(this),this.graphicGroup.update(this.clock.currentTime)}resize(){super.resize()}forceResize(){super.forceResize()}destroy(){super.destroy()}isDestroyed(){return super.isDestroyed()}on(e,t="LEFT_CLICK",i=this.canvas){const n=new sc(i),r=n.setInputAction(e,oc[t]);return function(){n.isDestroyed()||(r(),n.destroy())}}}ic();const{Color:_c,MaterialAppearance:Cc,CircleGeometry:wc,GroundPrimitive:bc,Primitive:xc,GeometryInstance:Sc,Material:Tc}=Cesium;class Ac extends yn{constructor(e){if(!z(e))throw new t("options must be provided.");if(!1===me.isValid(e.position))throw new t("options.position parameter is invalid.");if(isNaN(e.radius)&&e.radius<=0)throw new t("options.radius parameter must be a number greater than 0.");super(e),this._color=B(e.color,_c.WHITE),"string"==typeof this._color&&(this._color=_c.fromCssColorString(this._color)),this._position=e.position,this._radius=e.radius,this._stRotation=Cesium.Math.toRadians(B(e.stRotation,0)),this._height=B(e.height,0),this._extrudedHeight=B(e.extrudedHeight,0),this._asynchronous=B(e.asynchronous,!0)}createGraphic(){this._clampToGround?this.createGroundPrimitive(this._asynchronous):this.createPrimitive(this._asynchronous)}createPrimitive(e=!0){if(this.isDestroyed())return;const t=new wc({center:me.toCartesian(this._position),radius:this._radius,stRotation:this._stRotation,extrudedHeight:this._extrudedHeight,height:this._height,granularity:.01});return this._primitive=new xc({geometryInstances:new Sc({geometry:t,id:this.property}),appearance:this.createAppearance(),asynchronous:e,allowPicking:this._allowPicking}),this._primitive}createGroundPrimitive(e=!0){if(this.isDestroyed())return;const t=new wc({center:me.toCartesian(this._position),radius:this._radius,stRotation:this._stRotation,extrudedHeight:this._extrudedHeight,height:this._height});return this._primitive=new bc({geometryInstances:new Sc({geometry:t,id:this.property}),appearance:this.createAppearance(),asynchronous:e,allowPicking:this._allowPicking}),this._primitive}createAppearance(){return z(this._appearance)||(this._appearance=new Cc({material:Tc.fromType("Color",{color:this._color})})),this._appearance}get position(){return this._position}set position(e){me.isValid(e)&&(this.definedChanged.raise("position",e,this._position),this._position=e,this.updatePrimitive())}get radius(){return this._radius}set radius(e){!e!==this._radius&&(this.definedChanged.raise("radius",e,this._radius),this._radius=e,this.updatePrimitive())}get height(){return this._height}set height(e){e!==this._height&&(this.definedChanged.raise("height",e,this._height),this._height=e,this._extrudedHeight=e,this.updatePrimitive())}get color(){if(z(this._color))return this._color.toCssColorString()}set color(e){this.definedChanged.raise("color",e,this._color),this._color="string"==typeof e?Cesium.Color.fromCssColorString(e):e,this.updateAttribute("color",this._color)}toJson(){return{position:this._position.toArray(),radius:this.radius,clampToGround:this.clampToGround}}updatePrimitive(){if(!this._viewer)return;const e=this.primitive;this.createGraphic(),this._viewer.primitives.add(this._primitive),this._viewer.primitives.remove(e)}zoomTo(e){this._viewer&&this._primitive&&this.readyPromise.then((()=>{const t=graphic.primitive._boundingSpheres[0];t&&this._viewer.camera.flyToBoundingSphere(t,e)}))}}const Ec="\n    float circle(vec2 uv, float r, float blur) {\n        float d = length(uv);\n        float c = smoothstep(r+blur, r, d);\n        return c;\n    }\n    czm_material czm_getMaterial(czm_materialInput materialInput) {\n        czm_material material = czm_getDefaultMaterial(materialInput);\n        mat2 rotateMatrix = mat2(stRotation.x, stRotation.y, stRotation.z, stRotation.w);\n        vec2 st = rotateMatrix * (materialInput.st - vec2(0.5));\n        float t = time;\n        float s = 0.4;\n        float radius1 = smoothstep(.0, s, 1.0) * 0.5;\n        float alpha1 = circle(st, radius1, 0.02) * circle(st, radius1, -0.02);\n        float alpha2 = circle(st, radius1, 0.02 - radius1) * circle(st, radius1, 0.02);\n        float radius2 = 0.5 + smoothstep(s, 1.0, t) * 0.5;\n        float alpha3 = circle(st, radius1, radius2 + 0.01 - radius1) * circle(st, radius1, -0.02);\n    \n        float circleAlpha = color.a * smoothstep(1.0, s, 0.0) * (alpha1 + alpha2*0.1 + alpha3*0.2);\n        vec4 imageColor = texture2D(image, st + vec2(0.5));\n        material.diffuse = color.rgb;\n        material.alpha = imageColor.a * color.a + circleAlpha;\n        return material;\n    }\n",{MaterialAppearance:Pc,Material:Lc}=Cesium;const Mc="\nfloat circle(vec2 uv, float r, float blur) {\n    float d = length(uv) * 2.0;\n    float c = smoothstep(r+blur, r, d);\n    return c;\n}\n\nuniform vec4 color;\nuniform float time;\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n    vec2 st = materialInput.st - .5;\n    material.diffuse = color.rgb;\n    material.emission = vec3(0);\n    float t = time;\n    float s = 0.3;\n    float radius1 = smoothstep(.0, s, t) * 0.5;\n    float alpha1 = circle(st, radius1, 0.01) * circle(st, radius1, -0.01);\n    float alpha2 = circle(st, radius1, 0.01 - radius1) * circle(st, radius1, 0.01);\n    float radius2 = 0.5 + smoothstep(s, 1.0, t) * 0.5;\n    float alpha3 = circle(st, radius1, radius2 + 0.01 - radius1) * circle(st, radius1, -0.01);\n\n    material.alpha = smoothstep(1.0, s, t) * (alpha1 + alpha2*0.1 + alpha3*0.1);\n    material.alpha *= color.a;\n\n    return material;\n}\n",{MaterialAppearance:Dc,Material:Nc}=Cesium;var Rc={baseMaterialShader:"\nuniform sampler2D image;\nuniform vec4 color;\n\nfloat glow(float var, float radius, float blur) {\n    float innerRadius = radius - blur;\n    float outerRadius = radius + blur;\n    float alpha = 1.0 - step(var, innerRadius);\n    alpha *= step(var, outerRadius);\n    float innerBlur = (1.0 - step(var, innerRadius)) * var;\n    float outerBlur = (1.0 - abs(var - radius) / blur) * alpha;\n    return outerBlur ;\n}\nczm_material czm_getMaterial(czm_materialInput materialInput) {\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  vec2 st = materialInput.st;\n  // calculate distance from the fragment to circle center and normalize it.\n  float length = distance(st, vec2(0.5)) * 2.0;\n  float innerCircle = glow(length, 0.35, 0.2);\n  float outerCircle = glow(length, 0.8, 0.2);\n  float alpha = innerCircle + outerCircle;\n  material.diffuse = color.rgb * vec3(color.a);\n  material.alpha = pow(alpha, 4.0) * color.a;\n  return material;\n}\n",dashCircleMaterialShader:"\nfloat dashCircle(vec2 st, float time) {\n  float slice = 18.0;\n  time = 3.1415926 / 180.0 * time;\n  float cost = cos(time);\n  float sint = sin(time);\n  mat2 rotateMatrix = mat2(cost, -sint, sint, cost);\n  st = rotateMatrix * st;\n  float cos = dot(normalize(st), vec2(1.0, 0.0));\n  float angle  = acos(cos);\n  float sliceAngle = 3.1415926 * 2.0 / slice;\n  float index = mod(floor(angle / sliceAngle), 2.0);\n  if (st.t > 0.0) {\n    return 1.0 - index;\n  }\n  return index;\n}\nczm_material czm_getMaterial(czm_materialInput materialInput) {\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  vec2 st = materialInput.st;\n  float length = distance(st, vec2(0.5)) * 2.0;\n  vec2 center = st - vec2(0.5, 0.5);\n  float time = -czm_frameNumber * 3.1415926 / 180.;//扫描速度1度\n  float sin_t = sin(time);\n  float cos_t = cos(time);\n  float alpha = step(length, 0.7);\n  alpha *= step(0.55, length);\n  alpha *= dashCircle(st - vec2(0.5), mod(czm_frameNumber * speed, 180.0 * 2.0));\n  alpha *= min((1.0 - abs(length - 0.625) / 0.15), 1.0);\n  material.diffuse = color.rgb;\n  material.alpha = alpha * color.a;\n  return material;\n}\n",coneMaterialShader:"\nczm_material czm_getMaterial(czm_materialInput materialInput) {\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  vec2 st = materialInput.st;\n  float powerRatio = 1.0 / (fract(czm_frameNumber / 30.0) + 1.0);\n  float alpha = pow(1.0 - st.t, powerRatio);\n  material.diffuse = color.rgb;\n  material.alpha = alpha * color.a;\n  return material;\n}\n",cylinderMaterialShader:"\nczm_material czm_getMaterial(czm_materialInput materialInput) {\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  vec2 st = materialInput.st;\n  float time = fract(czm_frameNumber / 90.0);\n  vec4 imageColor = texture2D(image, fract(st - vec2(time)));\n  float alpha = color.a;\n  alpha *= imageColor.a;\n  material.diffuse = color.rgb;\n  material.alpha = st.s;//pow(1.0 - st.t, color.a);\n  return material;\n}\n"};const{baseMaterialShader:kc,dashCircleMaterialShader:Oc,coneMaterialShader:Ic,cylinderMaterialShader:Fc}=Rc,{MaterialAppearance:Gc,Material:Bc,CircleGeometry:Hc,GroundPrimitive:zc,Primitive:Uc,GeometryInstance:Wc,PrimitiveCollection:jc,CylinderGeometry:qc,Transforms:$c,Matrix4:Vc,Cartesian3:Yc}=Cesium;const Xc="\nczm_material czm_getMaterial(czm_materialInput materialInput) {\n    czm_material material = czm_getDefaultMaterial(materialInput);\n    material.diffuse = color.rgb;\n    vec2 st = materialInput.st - vec2(0.5);\n    float dis = distance(st, vec2(0.0));\n    // material.alpha = min(pow(dis * 2.0, 5.0) * color.a, 1.0);\n    if (dis * 2.0 > fract(time)) {\n        discard;\n    }  \n    float scale = 1.0 / (max(time, 0.0001));\n    material.alpha = min(pow(dis * 2.0 * scale, 5.0), 1.0) * color.a;\n    return material;\n}\n",{MaterialAppearance:Jc,Material:Qc}=Cesium;const Zc=33746824,Kc=33554054;const{BingMapsImageryProvider:eu,BingMapsStyle:tu}=Cesium;class iu extends eu{constructor(e={}){e.url="https://dev.virtualearth.net",e.mapStyle=B(e.mapStyle,iu.mapStyle.AERIAL),e.key=B(e.key,"AqMhBWJKbBPBtoWEvtGdUii6XSkDCJ3vWFpOVWzplD-Q0J-ECUF6i8MGXpew8bkc"),super(e)}get minimumLevel(){return super.minimumLevel}get maximumLevel(){return super.maximumLevel}get errorEvent(){return super.errorEvent}get ready(){return super.ready}get readyPromise(){return super.readyPromise}get tilingScheme(){return super.tilingScheme}get rectangle(){return super.rectangle}get enablePickFeatures(){return this._tileProvider.enablePickFeatures}set enablePickFeatures(e){this._tileProvider.enablePickFeatures=e}pickFeatures(e,t,i,n,r){return super.pickFeatures(e,t,i,n,r)}requestImage(e,t,i,n){return super.requestImage(e,t,i,n)}static tileXYToQuadKey(e,t,i){return eu.tileXYToQuadKey(e,t,i)}static quadKeyToTileXY(e){return eu.quadKeyToTileXY(e)}static mapStyle=tu}class nu extends vr{constructor(e){e=B(e,{});const t=B(e.layer,"img"),{scl:i,style:n}=nu.getParametersByLayer(t),r=B(e.lang,"zh_cn");e.url=`https://webst0{s}.is.autonavi.com/appmaptile?x={x}&y={y}&z={z}&lang=${r}&size=1&scl=${i}&style=${n}`,e.subdomains="1234",super(e)}static layers=[{layer:"img",desc:"影像地图"},{layer:"vec",desc:"矢量地图"},{layer:"vei",desc:"矢量地图（含注记）"},{layer:"roa",desc:"路网地图"},{layer:"roi",desc:"路网地图（含注记）"}];static getParametersByLayer(e){let t={scl:1,style:6};switch(e){case"img":break;case"vec":t.scl=2,t.style=7;break;case"vei":t.scl=1,t.style=7;break;case"roa":t.scl=2,t.style=8;break;case"roi":t.scl=1,t.style=8}return t}}const{WebMapTileServiceImageryProvider:ru}=Cesium;class ou extends ru{constructor(e={}){super(e)}get dimensions(){return super.dimensions}set dimensions(e){super.dimensions=e}get minimumLevel(){return super.minimumLevel}get maximumLevel(){return super.maximumLevel}get errorEvent(){return super.errorEvent}get ready(){return super.ready}get readyPromise(){return super.readyPromise}get tilingScheme(){return super.tilingScheme}get rectangle(){return super.rectangle}get enablePickFeatures(){return this._tileProvider.enablePickFeatures}set enablePickFeatures(e){this._tileProvider.enablePickFeatures=e}pickFeatures(e,t,i,n,r){return super.pickFeatures(e,t,i,n,r)}requestImage(e,t,i,n){return super.requestImage(e,t,i,n)}}const su={map:"https://rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid=1&version=297",road:"https://rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid=2&version=297",img:"https://p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg?version=229"};const{when:au,Rectangle:lu}=Cesium;class cu extends Cesium.TileMapServiceImageryProvider{constructor(e){super(e)}get url(){return super.url}get minimumLevel(){return super.minimumLevel}get maximumLevel(){return super.maximumLevel}get errorEvent(){return super.errorEvent}get rectangle(){return super.rectangle}get ready(){return super.ready}get readyPromise(){return super.readyPromise}get tilingScheme(){return super.tilingScheme}get enablePickFeatures(){return super.enablePickFeatures}set enablePickFeatures(e){super.enablePickFeatures=e}pickFeatures(e,t,i,n,r){return super.pickFeatures(e,t,i,n,r)}requestImage(e,t,i,n){return super.requestImage(e,t,i,n)}}const{Resource:uu}=Cesium;class hu extends Cesium.WebMapServiceImageryProvider{constructor(e={}){z(e.parameters)||(e.parameters=hu.DefaultParameters),z(e.GetFeatureInfoDefaultParameters),super(e)}get minimumLevel(){return super.minimumLevel}get maximumLevel(){return super.maximumLevel}get errorEvent(){return super.errorEvent}get rectangle(){return super.rectangle}get ready(){return super.ready}get readyPromise(){return super.readyPromise}get tilingScheme(){return super.tilingScheme}get enablePickFeatures(){return this._tileProvider.enablePickFeatures}set enablePickFeatures(e){this._tileProvider.enablePickFeatures=e}pickFeatures(e,t,i,n,r){return super.pickFeatures(e,t,i,n,r)}requestImage(e,t,i,n){return super.requestImage(e,t,i,n)}}hu.DefaultParameters=Object.assign({transparent:!0},Cesium.WebMapServiceImageryProvider.DefaultParameters,{format:"image/png"}),hu.GetFeatureInfoDefaultParameters=Cesium.WebMapServiceImageryProvider.GetFeatureInfoDefaultParameters;const{CallbackProperty:du}=Cesium;function pu(e){return new du((()=>e),!1)}class fu{constructor(e,t={}){this._type=void 0,this._properties=void 0,this._show=!0,this._id=B(e.id,Ce()),this._clampToGround=B(t.clampToGround),this._clampToModel=B(t.clampToModel)}highlightGraphic(e=!0){const t=fu.highlightColor;this.entity&&e?(this.entity.point&&(this.entity.point.color=t),this.entity.polyline&&(this.entity.polyline.material=t),this.entity.polygon&&(this.entity.polygon.material=t),this.entity.polygon&&(this.entity.polygon.outlineColor=t)):(this.entity.point&&(this.entity.point.color=this._entityOptions.point.color),this.entity.polyline&&(this.entity.polyline.material=this._entityOptions.polyline.material),this.entity.polygon&&(this.entity.polygon.material=this._entityOptions.polygon.material),this.entity.polygon&&(this.entity.polygon.outlineColor=this._entityOptions.polygon.outlineColor))}static highlightColor=Cesium.Color.AQUA;get clampToGround(){return this._clampToGround}set clampToGround(e){this._clampToGround=e}get clampToModel(){return this._clampToModel}set clampToModel(e){this._clampToModel=e}get id(){return this._id}get positions(){return this._positions}get type(){return this._type}get properties(){return this._properties}set properties(e){this._properties=new fr(e)}get entity(){return this._entity}get show(){return this._show}set show(e){this._show=e,this.entity&&(this.entity.show=this._show)}destroy(){console.log("destroy"),this._entity=void 0,this._entityOptions=void 0,this._positions=void 0,this.properties&&this.properties.destroy(),this._properties=void 0,gn(this)}startEdit(){if(this.entity){const e=pu(this.positions);this.entity.position&&(this.entity.position=e),this.entity.polyline&&(this.entity.polyline.positions=pu(this._nodePositions||this.positions)),this.entity.polygon&&(this.entity.polygon.hierarchy=pu(new Cesium.PolygonHierarchy(this.positions)))}}stopEdit(){this.entity&&(this.entity.position&&(this.entity.position=this.positions),this.entity.polyline&&(this.entity.polyline.positions=this._nodePositions||this.positions),this.entity.polygon&&(this.entity.polygon.hierarchy=new Cesium.PolygonHierarchy(this.positions)))}createProperties(){const e=this._entityOptions,{properties:t}=e;this._properties=new fr(t),delete e.properties}createEntity(){this.createProperties()}toGeoJson(){i()}getGeometry(){i()}static getEntityFromGeoJson(e){if(z(e)){if(e.geometry&&"POLYGON"===e.geometry.type.toUpperCase()){let t=[];const i=e.geometry.coordinates;if(!z(i)||!Array.isArray(i))return;for(let e of i){if(!Array.isArray(e))return;for(let i of e){const e=Cesium.Cartesian3.fromDegrees(i[0],i[1]);if(!z(e))return;t.push(e)}}return new Cesium.Entity({polygon:{material:Cesium.Color.fromCssColorString("rgba(247,224,32,0.5)"),outlineColor:Cesium.Color.RED,perPositionHeight:!1,hierarchy:t}})}return hierarchy}}}function mu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gu(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yu(e,t,i){return t&&gu(e.prototype,t),i&&gu(e,i),e}function vu(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wu(e,t)}function Cu(e){return Cu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Cu(e)}function wu(e,t){return wu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},wu(e,t)}function bu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xu(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?bu(e):t}function Su(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Cu(e);if(t){var r=Cu(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return xu(this,i)}}function Tu(e,t,i){return Tu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cu(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}},Tu(e,t,i||e)}function Au(e){return function(e){if(Array.isArray(e))return Eu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Eu(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Eu(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Pu(e,t){return null!=e?e:t}Pu.EMPTY_OBJECT=Object.freeze({});var Lu={ARROW:0,HALF_ARROW:1,BEZIER:2,SPLINE:3,SWALLOW_TRAIL:4,TRAPEZOID:5,HALF_TRAPEZOID:6,HALF_SWALLOW_TRAIL:7,HALF_SPLINE:8,getLabel:function(e){var t;switch(e.type){case Lu.HALF_ARROW:t="HALF_ARROW";break;case Lu.ARROW:lebel="ARROW";break;case Lu.BEZIER:t="BEZIER";break;case Lu.SPLINE:t="SPLINE";break;case Lu.SWALLOW_TRAIL:t="SWALLOW_TRAIL";break;case Lu.HALF_SWALLOW_TRAIL:t="HALF_SWALLOW_TRAIL";break;case Lu.HALF_SPLINE:t="HALF_SPLINE";break;default:t=void 0}return t},getErrorMsg:function(e){e.type;var t=e.controls.length;if(!Lu.validate(e))throw new Error(Lu.getLabel(e)+"控制点个数必须不少于"+e.controlPointsCount[0]+",实际只有"+t+"个")},validate:function(e){return!(e.controls.length<e.controlPointsCount[0])}},Mu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(mu(this,e),this._controls=t.controls||[],this._index=t.index,this._inverse=t.inverse||!1,!this._index){var i=this._controls.length;this._index=new Array(i);for(var n=0;n<i;n++)this._index[n]=n}}return yu(e,[{key:"createNodes",value:function(){Lu.getErrorMsg(this)}},{key:"get",value:function(e){return this.index?this.controls[this.index[e]]:this.controls[e]}},{key:"controls",get:function(){return this._controls}},{key:"index",get:function(){return this._index}},{key:"type",get:function(){return this._type}},{key:"controlPointsCount",get:function(){return this._controlPointsCount}},{key:"nodes",get:function(){return this._nodes},set:function(e){this._nodes=e}},{key:"inverse",get:function(){return this._inverse},set:function(e){this._inverse=e}}]),e}(),Du=function(){function e(){mu(this,e)}return yu(e,null,[{key:"distance",value:function(){var e=arguments.length;if(e<2)return 0;for(var t=0,i=0;i<e-1;i++){var n=(i+1)%e,r=i<0||arguments.length<=i?void 0:arguments[i],o=n<0||arguments.length<=n?void 0:arguments[n];t+=Math.sqrt(Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2))}return t}},{key:"baseLength",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.99;return Math.pow(e.distance.apply(e,Au(t)),i)}},{key:"mid",value:function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}},{key:"azimuth",value:function(t,i){var n=[i,t];t=n[0],i=n[1];var r=Math.asin(Math.abs(t[1]-i[1])/e.distance(t,i));return t[1]>=i[1]&&t[0]>=i[0]?r+Math.PI:t[1]>=i[1]&&t[0]<i[0]?2*Math.PI-r:t[1]<i[1]&&t[0]>=i[0]?Math.PI-r:r}},{key:"thirdPoint",value:function(t,i,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=e.azimuth(t,i),a=o?s-n:s+n,l=r*Math.cos(a),c=r*Math.sin(a);return[i[0]+l,i[1]+c]}},{key:"isClockWise",value:function(e,t,i){return(i[1]-e[1])*(t[0]-e[0])>(t[1]-e[1])*(i[0]-e[0])}},{key:"angleOfThreePoints",value:function(t,i,n){var r=e.azimuth(t,i)-e.azimuth(t,n);return r>0?r:2*Math.PI+r}},{key:"quadricBSplineFactor",value:function(e,t){return 0===e?Math.pow(t-1,2)/2:1===e?(-2*Math.pow(t,2)+2*t+1)/2:2===e?Math.pow(t,2)/2:0}},{key:"quadricBSpline",value:function(t){if(t<=2)return t;var i=[],n=t.length-2-1;i.push(t[0]);for(var r=0;r<=n;r++)for(var o=0;o<=1;o+=.05){for(var s=0,a=0,l=0;l<=2;l++){var c=e.quadricBSplineFactor(l,o);s+=c*t[r+l][0],a+=c*t[r+l][1]}i.push([s,a])}return i.push(t[t.length-1]),i}},{key:"binomialFactor",value:function(t,i){return e.factorial(t)/(e.factorial(i)*e.factorial(t-i))}},{key:"factorial",value:function(t){return t<0?NaN:0===t?1:t*e.factorial(t-1)}},{key:"BezierCurve",value:function(t){var i=t.length;if(i<2)return t;for(var n=[],r=0;r<=1;r+=.01){for(var o=0,s=0,a=0;a<i;a++){var l=e.binomialFactor(i-1,a),c=Math.pow(r,a),u=Math.pow(1-r,i-a-1);o+=l*c*u*t[a][0],s+=l*c*u*t[a][1]}n.push([o,s])}return n.push(t[i-1]),n}}]),e}(),Nu=function(e){_u(i,e);var t=Su(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mu(this,i),(e=t.call(this,n))._controlPointsCount=[2,2],e._type=Lu.HALF_ARROW,e._heightFactor=Pu(n.heightFactor,.18),e._neckHeightFactor=Pu(n.neckHeightFactor,.15),e._headWidthFactor=Pu(n.headWidthFactor,.5),e._neckWidthFactor=Pu(n.neckWidthFactor,.3),e._headMaxHeight=n.headMaxHeight,e._headTailHeightFactor=Pu(n.headTailHeightFactor,.3),e._inverse=Pu(n.inverse,!1),e._nodes=[],e.createNodes(),e}return yu(i,[{key:"createNodes",value:function(){Tu(Cu(i.prototype),"createNodes",this).call(this);var e=this.controls,t=Du.baseLength(e),n=this.heightFactor*t;t=Du.distance(this.get(0),this.get(1)),this.headMaxHeight&&n>this.headMaxHeight&&(n=this.headMaxHeight);var r=this.neckWidthFactor*n,o=this.headWidthFactor*n;n=n>t?t:n;var s=this.neckHeightFactor*n,a=Du.thirdPoint(this.get(0),this.get(1),0,n),l=Du.thirdPoint(this.get(0),this.get(1),0,s),c=Du.thirdPoint(this.get(1),a,Math.PI/2,o,this.inverse),u=Du.thirdPoint(this.get(1),l,Math.PI/2,r,this.inverse);return this.neck=u,this.tail=c,this.neckControl=l,this.tailControl=a,this._nodes=[l,u,c,this.get(1)],this.completedNodes=new Map,this.completedNodes.set(this.inverse,[l,u,c,this.get(1)]),this._nodes}},{key:"headMaxHeight",get:function(){return this._headMaxHeight}},{key:"heightFactor",get:function(){return this._heightFactor}},{key:"neckHeightFactor",get:function(){return this._neckHeightFactor}},{key:"headWidthFactor",get:function(){return this._headWidthFactor}},{key:"neckWidthFactor",get:function(){return this._neckWidthFactor}},{key:"nodes",get:function(){return this._nodes}}]),i}(Mu),Ru=function(e){_u(i,e);var t=Su(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mu(this,i),(e=t.call(this,n))._type=Lu.ARROW,e.createNodes(),e}return yu(i,[{key:"createNodes",value:function(){var e=new Map;this._inverse=!0;var t=Tu(Cu(i.prototype),"createNodes",this).call(this);e.set(this.inverse,Au(t)),this._inverse=!1;var n=Tu(Cu(i.prototype),"createNodes",this).call(this);return e.set(this.inverse,Au(n)),n.shift(),t.shift(),n.pop(),this.inverse=void 0,this.completedNodes=e,this._nodes=[].concat(Au(n),Au(t.reverse())),[].concat(Au(n),Au(t.reverse()))}}]),i}(Nu),ku=function(e){_u(i,e);var t=Su(i);function i(e){var n;return mu(this,i),(n=t.call(this,e))._type=Lu.HALF_TRAPEZOID,n._controlPointsCount=[2,2],n._heightFactor=Pu(e.heightFactor,.82),n._tailWidthFactor=Pu(e.tailWidthFactor,.5),n._headWidthFactor=Pu(e.headWidthFactor,.3),n.createNodes(),n}return yu(i,[{key:"createNodes",value:function(){Tu(Cu(i.prototype),"createNodes",this).call(this);var e=this.get(0),t=Du.baseLength(this._controls),n=this.heightFactor*t,r=Du.thirdPoint(this.get(1),e,0,n,this.inverse),o=this.tailWidthFactor*t,s=this.headWidthFactor*t,a=Du.thirdPoint(e,r,Math.PI/2,s,this.inverse),l=Du.thirdPoint(r,e,Math.PI/2,o,!this.inverse);return this._nodes=[a,l,e,r].flat(),this.completedNodes=new Map,this.completedNodes.set(this.inverse,[l]),[l]}},{key:"linkArrow",value:function(e){var t=e.arrowNodes,i=e.bodyNodes;return e.inverse?[].concat(Au(i),Au(t)):[].concat(Au(t),Au(i))}},{key:"linkTail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tailNodes,i=e.bodyNodes;return e.inverse,[].concat(Au(t),Au(i))}},{key:"heightFactor",get:function(){return this._heightFactor}},{key:"headWidthFactor",get:function(){return this._headWidthFactor}},{key:"tailWidthFactor",get:function(){return this._tailWidthFactor}}]),i}(Mu),Ou=function(e){_u(i,e);var t=Su(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mu(this,i),(e=t.call(this,n))._type=Lu.TRAPEZOID,e}return yu(i,[{key:"createNodes",value:function(){var e=new Map;this.inverse=!1;var t=Tu(Cu(i.prototype),"createNodes",this).call(this);e.set(this.inverse,Au(t)),this.inverse=!0;var n=Tu(Cu(i.prototype),"createNodes",this).call(this);return e.set(this.inverse,Au(n)),this.completedNodes=e,this.inverse=void 0,this._nodes=n.concat(t),this._nodes}}]),i}(ku),Iu=function(){function e(t){mu(this,e),this._headHeightFactor=Pu(t.headHeightFactor,.2),this._neckHeightFactor=Pu(t.neckHeightFactor,.8),this._headWidthFactor=Pu(t.headWidthFactor,.5),this._neckWidthFactor=Pu(t.neckWidthFactor,.3),this._tailWidthFactor=Pu(t.tailWidthFactor,.3),this._tailHeightFactor=Pu(t.tailHeightFactor,.2),this._controls=Pu(t.controls,[]),this._headComponent=void 0,this._bodyComponent=void 0,this._tailComponent=void 0,this._nodes=void 0,this._polygon=[],this._polyline=[]}return yu(e,[{key:"postProcessing",value:function(e){return e}},{key:"merge",value:function(){var e,t,i,n=this.headComponent,r=this.bodyComponent,o=this.tailComponent;r&&(i=r.completedNodes);var s,a,l=[];(i&&i.get(!0)&&(s=i.get(!0),l=r.linkTail({tailNodes:l,bodyNodes:s})),n&&(s=n.nodes,l=r?r.linkArrow({arrowNodes:s,bodyNodes:l,inverse:!0,target:this}):s),i&&i.get(!1)&&(s=i.get(!1),l=r.linkArrow({arrowNodes:l,bodyNodes:s,inverse:!1,target:this})),o)&&(a=l).push.apply(a,Au(o.nodes));this.reset(),(e=this.polygon).push.apply(e,Au(l.flat())),(t=this.polyline).push.apply(t,Au(l.flat()))}},{key:"update",value:function(){this.createNodes()}},{key:"reset",value:function(){this.polygon.splice(0),this.polyline.splice(0)}},{key:"polygon",get:function(){return this._polygon}},{key:"polyline",get:function(){return this._polyline}},{key:"controls",get:function(){return this._controls}}]),e}(),Fu=function(e){_u(i,e);var t=Su(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mu(this,i),(e=t.call(this,n))._type=Lu.HALF_SWALLOW_TRAIL,e._controlPointsCount=[3,1/0],e._heightFactor=Pu(n.heightFactor,.3),e.createNodes(),e}return yu(i,[{key:"createNodes",value:function(){Tu(Cu(i.prototype),"createNodes",this).call(this);var e=Du.baseLength(this.controls),t=this._heightFactor*e,n=Du.mid(this.get(0),this.get(1)),r=Du.thirdPoint(this.get(2),n,0,t,this.inverse);return this.nodes=[r],this.nodes}},{key:"heightFactor",get:function(){return this._heightFactor}}]),i}(Mu);function Gu(e){var t=function(t){if(e.hasOwnProperty(t)&&t.startsWith("_")){var i=t.replace("_","");Object.defineProperty(e,i,{get:function(){return e[t]},set:function(i){e[t]=i}})}};for(var i in e)t(i)}var Bu=function(e){_u(i,e);var t=Su(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mu(this,i),n=Pu(n,Pu.EMPTY_OBJECT),(e=t.call(this,n))._tail=Pu(n.tail,!1),e.init(),Gu(bu(e)),e.merge(),e}return yu(i,[{key:"addControl",value:function(e){this.controls.length>=i.MIN_CONTROL_COUNT&&this.controls.pop(),this.controls.push(e),this.controls.length>=i.MIN_CONTROL_COUNT&&(this.init(),this.merge())}},{key:"popControl",value:function(){return this.controls.pop()}},{key:"updateControl",value:function(e,t){this.controls[e]=t,this.controls.length>=i.MIN_CONTROL_COUNT&&(this.init(),this.merge())}},{key:"init",value:function(){this.controls.length<i.MIN_CONTROL_COUNT||(this._headComponent=this.createHeadComponent(),this._bodyComponent=this.createBodyComponent(),this._tail&&(this._tailComponent=this.createTailComponent()))}},{key:"update",value:function(){this._headComponent=this.createHeadComponent(),this._bodyComponent=this.createBodyComponent(),this._tail&&(this._tailComponent=this.createTailComponent()),this.merge()}},{key:"createBodyComponent",value:function(){return new Ou({controls:this._controls,heightFactor:1-this._neckHeightFactor,headWidthFactor:this._neckWidthFactor,tailWidthFactor:this._tailWidthFactor})}},{key:"createHeadComponent",value:function(){return new Ru({controls:this._controls,headWidthFactor:this._headWidthFactor,neckHeightFactor:this._neckHeightFactor,neckWidthFactor:this._neckWidthFactor,headHeightFactor:this._headHeightFactor})}},{key:"createTailComponent",value:function(){if(this._bodyComponent){var e=this._bodyComponent.nodes;return new Fu({controls:[].concat(Au(e),[this._controls[1]]),heightFactor:this._tailHeightFactor})}}},{key:"tail",set:function(e){this._tail=e}}]),i}(Iu);vu(Bu,"MIN_CONTROL_COUNT",2);var Hu=function(e){_u(i,e);var t=Su(i);function i(e){var n;return mu(this,i),(n=t.call(this,e))._type=Lu.HALF_SPLINE,n._controlPointsCount=[2,1/0],n._headWidthFactor=Pu(e.headWidthFactor,.1),n._tailWidthFactor=Pu(e.tailWidthFactor,.3),n.createNodes(),n}return yu(i,[{key:"createNodes",value:function(){Tu(Cu(i.prototype),"createNodes",this).call(this);for(var e=this.controls,t=Du.distance.apply(Du,Au(e)),n=Du.baseLength(e),r=this.tailWidthFactor*n,o=this.headWidthFactor*n,s=Math.abs(r-o)/2,a=0,l=e,c=[],u=1;u<e.length-1;u++){var h=Du.angleOfThreePoints(l[u],l[u-1],l[u+1])/2;a+=Du.distance(l[u-1],l[u]),this.inverse||(h=Math.PI-h);var d=(r/2-a/t*s)/Math.sin(h),p=Du.thirdPoint(l[u-1],l[u],h,d,this.inverse);c.push(p)}return this.completedNodes=new Map,this.completedNodes.set(this.inverse,c),this.nodes=c,c}},{key:"linkArrow",value:function(e){var t=e.arrowNodes,i=e.bodyNodes,n=e.inverse,r=e.target,o=[];if(r._tail&&o.push(r.controls[+!n]),n){o.push.apply(o,Au(i).concat([t[0]]));var s=Du.quadricBSpline(o);return[].concat(Au(s),Au(t))}o.push.apply(o,Au(i).concat([t[t.length-1]]));var a=Du.quadricBSpline(o);return[].concat(Au(t),Au(a.reverse()))}},{key:"linkTail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tailNodes,i=e.bodyNodes;return e.inverse,[].concat(Au(t),Au(i))}},{key:"tailWidthFactor",get:function(){return this._tailWidthFactor}},{key:"headWidthFactor",get:function(){return this._headWidthFactor}}]),i}(Mu),zu=function(e){_u(i,e);var t=Su(i);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mu(this,i),t.call(this,e)}return yu(i,[{key:"createNodes",value:function(){var e=new Map;this.inverse=!1;var t=Tu(Cu(i.prototype),"createNodes",this).call(this);e.set(this.inverse,Au(t)),this.inverse=!0;var n=Tu(Cu(i.prototype),"createNodes",this).call(this);return e.set(this.inverse,Au(n)),this.inverse=void 0,this.nodes=[].concat(Au(t),Au(n.reverse())),this.completedNodes=e,[].concat(Au(t),Au(n.reverse()))}}]),i}(Hu),Uu=function(e){_u(i,e);var t=Su(i);function i(e){var n;return mu(this,i),(e=Pu(e,{})).headHeightFactor=Pu(e.headHeightFactor,.15),e.neckHeightFactor=Pu(e.headWidthFactor,.8),e.neckWidthFactor=Pu(e.neckWidthFactor,.15),e.headWidthFactor=Pu(e.headWidthFactor,.4),e.tailWidthFactor=Pu(e.tailWidthFactor,.25),(n=t.call(this,e))._headTailHeightFactor=Pu(e.headTailHeightFactor,.5),n._tail=Pu(e.tail,!0),n._heightFactor=Pu(e.heightFactor,.8),n._tailHeightFactor=Pu(e.tailHeightFactor,.05),n.init(),Gu(bu(n)),n.merge(),n}return yu(i,[{key:"addControl",value:function(e){this.controls[this.controls.length-1],this.controls.push(e),(!this.tail&&this.controls.length>=i.MIN_CONTROL_COUNT||this.controls.length>=i.MIN_CONTROL_COUNT+1)&&(this.init(),this.merge())}},{key:"updateControl",value:function(e,t){this.controls[e]=t,(!this.tail&&this.controls.length>=i.MIN_CONTROL_COUNT||this.controls.length>=i.MIN_CONTROL_COUNT+1)&&(this.init(),this.merge())}},{key:"popControl",value:function(){this.controls.pop()}},{key:"init",value:function(){var e;!this.tail&&this.controls.length<i.MIN_CONTROL_COUNT||this.tail&&this.controls.length<i.MIN_CONTROL_COUNT+1||(this._head1=this.controls[0],this._head2=this.controls[1],this.tail&&Du.isClockWise(this.controls[0],this.controls[1],this.controls[2])&&(e=[this._head2,this._head1],this._head1=e[0],this._head2=e[1]),this._headComponent=this.createHeadComponent(),this._bodyComponent=this.createBodyComponent(),this._tail&&(this._tailComponent=this.createTailComponent()))}},{key:"createHeadComponent",value:function(){var e,t;this.tail?(e=[Du.mid(this._head1,this._head2)].concat(Au(this.controls.slice(2))),t=Du.distance(this._head1,this._head2)):e=this.controls;var i=e.length;return new Ru({controls:e,heightFactor:this._headHeightFactor,neckHeightFactor:this._neckHeightFactor,headWidthFactor:this._headWidthFactor,neckWidthFactor:this._neckWidthFactor,headMaxHeight:this._headTailHeightFactor*t,index:[i-2,i-1]})}},{key:"createBodyComponent",value:function(){var e,t=this.controls.slice(2),i=Du.distance(this._headComponent.nodes[0],this._headComponent.nodes[4]),n=Du.baseLength(t);if(this._tail){e=Du.distance(this.controls[0],this.controls[1]),t=[Du.mid(this._head1,this._head2)].concat(Au(t));var r=Du.baseLength(t);this._tailWidthFactor=e/r}else e=n*this._tailWidthFactor,t=this.controls;return new zu({controls:t,headWidthFactor:i/n,tailWidthFactor:this._tailWidthFactor})}},{key:"createTailComponent",value:function(){if(this._bodyComponent){var e=this.controls;return new Fu({controls:e,heightFactor:this._tailHeightFactor})}}}]),i}(Iu);vu(Uu,"MIN_CONTROL_COUNT",2);var Wu=function(e){_u(i,e);var t=Su(i);function i(e){var n;return mu(this,i),(e=Pu(e,{})).neckHeightFactor=Pu(e.neckHeightFactor,.8),e.neckWidthFactor=Pu(e.neckWidthFactor,.2),e.headWidthFactor=Pu(e.headWidthFactor,.5),(n=t.call(this,e))._nodes=[],n.init(),Gu(bu(n)),n.merge(),n}return yu(i,[{key:"addControl",value:function(e){this.controls.length>=i.MAX_CONTROL_COUNT&&this.popControl(),this.controls.push(e),this.controls.length>=i.MIN_CONTROL_COUNT&&(this.init(),this.merge())}},{key:"updateControl",value:function(e,t){this.controls[e]=t,this.controls.length>=i.MIN_CONTROL_COUNT&&(this.init(),this.merge())}},{key:"popControl",value:function(){return this.controls.pop()}},{key:"init",value:function(){this.controls.length<i.MIN_CONTROL_COUNT||this.getPoints()}},{key:"tempPoint4",value:function(e,t,i){var n,r,o=Du.mid(e,t),s=Du.distance(o,i),a=Du.angleOfThreePoints(e,o,i);a<Math.PI/2||(a<Math.PI&&a>=Math.PI/2?a=Math.PI-a:a>=Math.PI&&a<1.5*Math.PI?a-=Math.PI:a>=1.5*Math.PI&&(a=2*Math.PI-a)),n=s*Math.cos(a),r=s*Math.sin(a);var l=Du.thirdPoint(e,o,Math.PI/2,n,!0);return Du.thirdPoint(o,l,Math.PI/2,r,!1)}},{key:"getPoints",value:function(){var e,t,i,n,r,o,s,a=this.controls;if(!(a<3))if(t=3===a.length?this.tempPoint4.apply(this,Au(a)):a[3],i=a.length<=4?Du.mid(a[0],a[1]):a[4],Du.isClockWise.apply(Du,Au(this.controls.slice(0,3)))){var l;e=this.getArrowControls(a[0],i,t,!0),n=new Ru({controls:e,index:[2,3],neckHeightFactor:this._neckHeightFactor,neckWidthFactor:this._neckWidthFactor,headWidthFactor:this._headWidthFactor}),s=Du.distance(a[0],i)/Du.baseLength(e)/2,o=this.getBodyControls(e,n.nodes[0],n.nodes[4],s),e=this.getArrowControls(i,a[1],a[2],!1),r=new Ru({controls:e,index:[2,3],neckHeightFactor:this._neckHeightFactor,neckWidthFactor:this._neckWidthFactor,headWidthFactor:this._headWidthFactor}),s=Du.distance(i,a[1])/Du.baseLength(e)/2,(l=o).unshift.apply(l,Au(this.getBodyControls(e,r.nodes[0],r.nodes[4],s)));var c=this.geoBodyPoints([n,r],o,i);this._nodes=[].concat(Au(c[0]),Au(n.nodes),Au(c[1]),Au(r.nodes),Au(c[2]))}else{var u;e=this.getArrowControls(a[0],i,t,!1),n=new Ru({controls:e,index:[2,3],neckHeightFactor:this._neckHeightFactor,neckWidthFactor:this._neckWidthFactor,headWidthFactor:this._headWidthFactor}),s=Du.distance(a[0],i)/Du.baseLength(e)/2,o=this.getBodyControls(e,n.nodes[0],n.nodes[4],s),e=this.getArrowControls(i,a[1],a[2],!0),r=new Ru({controls:e,index:[2,3],neckHeightFactor:this._neckHeightFactor,neckWidthFactor:this._neckWidthFactor,headWidthFactor:this._headWidthFactor}),s=Du.distance(i,a[1])/Du.baseLength(e)/2,(u=o).unshift.apply(u,Au(this.getBodyControls(e,r.nodes[0],r.nodes[4],s)));var h=this.geoBodyPoints([n,r],o,i);this._nodes=[].concat(Au(h[0]),Au(n.nodes),Au(h[1]),Au(r.nodes),Au(h[2]))}}},{key:"getArrowControls",value:function(e,t,i,n){var r=Du.mid(e,t),o=Du.distance(r,i),s=Du.thirdPoint(i,r,0,.3*o,!1),a=Du.thirdPoint(i,r,0,.5*o,!1);return[r,s=Du.thirdPoint(r,s,Math.PI/2,o/5,n),a=Du.thirdPoint(r,a,Math.PI/2,o/4,n),i]}},{key:"geoBodyPoints",value:function(e,t,i){var n=Du.BezierCurve([this.controls[1],t[0],t[1],e[1].nodes[4]]);return[Du.BezierCurve([this.controls[0],t[6],t[7],e[0].nodes[0]]),Du.BezierCurve([e[0].nodes[4],t[5],t[4],i,t[3],t[2],e[1].nodes[0]]),n.reverse()]}},{key:"getBodyControls",value:function(e,t,i,n){for(var r=Du.distance.apply(Du,Au(e)),o=Du.baseLength(e)*n,s=(o-Du.distance(t,i))/2,a=0,l=[],c=[],u=1;u<e.length-1;u++){var h=Du.angleOfThreePoints(e[u],e[u-1],e[u+1])/2,d=(o/2-(a+=Du.distance(e[u-1],e[u]))/r*s)/Math.sin(h);l.push(Du.thirdPoint(e[u-1],e[u],Math.PI-h,d,!1)),c.push(Du.thirdPoint(e[u-1],e[u],h,d,!0))}return l.concat(c)}},{key:"merge",value:function(){var e,t;this.reset(),(e=this.polygon).push.apply(e,Au(Au(this.nodes).flat())),(t=this.polyline).push.apply(t,Au(Au(this.nodes).flat()))}}]),i}(Iu);vu(Wu,"MIN_CONTROL_COUNT",3),vu(Wu,"MAX_CONTROL_COUNT",5);var ju={straightarrow:"straightarrow",attackarrow:"attackarrow",doublearrow:"doublearrow",validate:function(e){return e===ju.straightarrow||e===ju.attackarrow||e===ju.doublearrow}};const qu={POINT:"point",POLYLINE:"polyline",POLYGON:"polygon",MODEL:"model",LABEL:"label",STRAIGHTARROW:ju.straightarrow,ATTACKARROW:ju.attackarrow,DOUBLEARROW:ju.doublearrow,BILLBOARD:"billboard",MUTIPOINT:"mutipoint",getOGCType:function(e){if(!qu.validate(e))return"unknown";let t="";switch(e){case qu.POINT:case qu.LABEL:case qu.MODEL:case qu.BILLBOARD:t="Point";break;case qu.POLYLINE:t="LineString";break;case qu.STRAIGHTARROW:case qu.ATTACKARROW:case qu.DOUBLEARROW:case qu.POLYGON:t="Polygon";break;case qu.MUTIPOINT:t="MutlPoint"}return t},validate:function(e){return e===qu.POINT||e===qu.POLYLINE||e===qu.POLYGON||e===qu.STRAIGHTARROW||e===qu.ATTACKARROW||e===qu.DOUBLEARROW||e===qu.MODEL||e===qu.LABEL||e===qu.MUTIPOINT||e===qu.BILLBOARD},isPoint:function(e){return e===qu.POINT||e===qu.MODEL||e===qu.LABEL||e===qu.BILLBOARD},isArrow:function(e){return e===qu.ATTACKARROW||e===qu.STRAIGHTARROW||e===qu.DOUBLEARROW}};var $u=Object.freeze(qu);class Vu extends fu{constructor(e,t={}){super(e=B(e,{}),t),this._entityOptions=e,this._options=t,this._positions=B(e.position,new Cesium.Cartesian3),this._type=B(t.type,$u.POINT),this._entity=this.createEntity(),this._text=B(e.text,"")}getGeometry(){const e=Vu.toDegrees(this.positions),t=[e.lon,e.lat,e.height];return{type:$u.getOGCType(this.type),coordinates:t}}createEntity(){super.createEntity(),delete this._entityOptions.position;const e={id:this.id,position:this.positions};return this.type===$u.POINT&&(e.point=H(this._entityOptions)),this.type===$u.BILLBOARD&&(e.billboard=H(this._entityOptions),z(e.billboard.image)||(e.billboard.image=Q.buildModuleUrl("./assets/marker.png"))),this.type===$u.LABEL&&(e.label=H(this._entityOptions)),this.type===$u.MODEL&&(e.orientation=this._entityOptions.orientation,delete this._entityOptions.orientation,e.model=H(this._entityOptions),z(e.model.uri)||(e.model.uri=Q.buildModuleUrl("./assets/Wood_Tower.gltf"))),this._options.label&&this._type!==$u.LABEL&&(e.label=Cesium.clone(this._options.label)),this._entityOptions=e,new Cesium.Entity(this._entityOptions)}equal(e){return Vu.equal(this,e)}get text(){return this._text}set text(e){if(this.entity.label)this.entity.label.text=e;else{const t=Cesium.clone(this._entityOptions);t.text=e,this.addLabel(t)}this._text=e}addLabel(e){this.entity.label=e}updatePointStyle(e){if(e&&this.entity.point)for(const t in e)e.hasOwnProperty(t)&&(this.entity.point[t]=e[t])}updateLabelStyle(e){if(e&&this.entity.label)for(const t in e)e.hasOwnProperty(t)&&(this.entity.label[t]=e[t])}updateModelStyle(e){if(e&&this.entity.model)for(const t in e)e.hasOwnProperty(t)&&(this.entity.model[t]=e[t])}updateBillboardStyle(e){if(e&&this.entity.billboard)for(const t in e)e.hasOwnProperty(t)&&(this.entity.billboard[t]=e[t])}updatePosition(e){this.positions.x=e.x,this.positions.y=e.y,this.positions.z=e.z}static equal(e,t){return!(!z(e)||!z(t))&&(e instanceof Vu&&(e=e.positions),t instanceof Vu&&(t=t.positions),Cesium.Cartesian3.equals(e,t))}static defaultStyle={color:Cesium.Color.RED,pixelSize:5,outlineColor:Cesium.Color.WHITE,outlineWidth:3,heightReference:Cesium.HeightReference.CLAMP_TO_GROUND};static toDegrees(e){return e instanceof Cesium.Cartesian3?me.fromCartesian(e):e instanceof Vu?me.fromCartesian(e.positions):void 0}toGeoJson(){return Vu.toGeoJson(this)}static toGeoJson(e){$u.getOGCType(e.type);const t=e.properties?e.properties.toJson():{};t.PlotType=e.type;return{type:"Feature",properties:t,geometry:e.getGeometry()}}static fromGeoJson(e,t){if("string"==typeof e&&(e=JSON.parse(e)),!z(e.geometry)||!z(e.properties))return;if(e.properties.PlotType!==$u.POINT)throw new CesiumProError("json没有包含一个有效的PointGraphic.");const i=e.geometry&&e.geometry.coordinates;return Vu.fromCoordinates(i,e.properties,t)}static fromCoordinates(e,t,i=Vu.defaultStyle){const n={position:Cesium.Cartesian3.fromDegrees(...e),properties:t,...i};return new Vu(n)}static defaultPointStyle=Vu.defaultStyle;static defaultLabelStyle={font:"30px Helvetica",fillColor:Cesium.Color.WHITE,showBackground:!0,style:Cesium.LabelStyle.FILL_AND_OUTLINE,scale:1,heightReference:Cesium.HeightReference.CLAMP_TO_GROUND,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,0),heightReference:Cesium.HeightReference.NONE};static defaultBillboardStyle={verticalOrigin:Cesium.VerticalOrigin.BASELINE,heightReference:Cesium.HeightReference.CLAMP_TO_GROUND};static defaultModelStyle={colorBlendMode:Cesium.ColorBlendMode.HIGHLIGHT,color:Cesium.Color.WHITE,colorBlendAmount:.5,minimumPixelSize:64}}class Yu extends fu{constructor(e,t={}){super(e,t),this._entityOptions=B(e,{}),this._positions=B(this._entityOptions.positions,[]),this._nodePositions=this._positions,this._type=$u.POLYLINE,this._entity=this.createEntity()}getGeometry(){const e=[],t=$u.getOGCType(this.type);for(const t of this.positions){const i=Vu.toDegrees(t);e.push([i.lon,i.lat,i.height])}return{type:t,coordinates:e}}createEntity(){super.createEntity();const e={id:this.id,polyline:this._entityOptions};return this._entityOptions=e,new Cesium.Entity(this._entityOptions)}toGeoJson(){return Yu.toGeoJson(this)}startEdit(){super.startEdit()}stopEdit(){super.stopEdit()}addNode(e,t){const i=this.positions.length;if(z(t)&&t<i){for(let e=i;e>t;e--)this.positions[e]=this.positions[e-1];this.positions[t]=e}else this.positions.push(e)}removeNode(e){z(e)&&(e<0||e>=this.positions.length||this.positions.splice(e,1))}popNode(){const e=this.positions.length-1;this.removeNode(e)}updateNode(e,t){e>=this.positions.length||(this.positions[e]=t)}updateStyle(e){if(e&&this.entity.model)for(const t in e)e.hasOwnProperty(t)&&(this.entity.polyline[t]=e[t])}static toGeoJson(e){$u.getOGCType(e.type);const t=e.properties?e.properties.toJson():{};t.PlotType=e.type;return{type:"Feature",properties:t,geometry:e.getGeometry()}}static fromGeoJson(e,t){if("string"==typeof e&&(e=JSON.parse(e)),!z(e.geometry)||!z(e.properties))return;if(e.properties.PlotType!==$u.POLYLINE)throw new CesiumProError("json没有包含一个有效的PolylineGraphic.");const i=e.geometry&&e.geometry.coordinates;return Yu.fromCoordinates(i,e.properties,t)}static fromCoordinates(e,t,i=Yu.defaultStyle){const n={positions:Cesium.Cartesian3.fromDegreesArray(e.flat()),properties:t,...i};return new Yu(n)}static defaultStyle={clampToGround:!0,material:Cesium.Color.fromCssColorString("rgba(247,224,32,1)"),width:3};static highlightStyle={clampToGround:!0,material:Cesium.Color.AQUA,width:3}}class Xu extends fu{constructor(e,t={}){super(e,t),this._entityOptions=e,this._positions=B(e.positions,[]),this._nodePositions=[...this.positions],this._nodePositions.length&&(this._nodePositions[this._nodePositions.length]=this._nodePositions[0]),this._type=$u.POLYGON,this._entity=this.createEntity()}getGeometry(){return Xu.getGeometry(this)}static getGeometry(e){const t=[],i=$u.getOGCType(e.type);for(const i of e.positions){const e=Vu.toDegrees(i);t.push([e.lon,e.lat,e.height])}return t.push(t[0]),{type:i,coordinates:[t]}}createEntity(){super.createEntity(),delete this._entityOptions.positions;const e={id:this.id,polygon:{hierarchy:this.positions,...this._entityOptions}};return this._entityOptions.outline&&(e.polyline={positions:this._nodePositions,material:this._entityOptions.outlineColor,width:this._entityOptions.outlineWidth},e.polygon.outline=!1,e.polyline.clampToGround=this._entityOptions.heightReference===Cesium.HeightReference.CLAMP_TO_GROUND),this._entityOptions=e,new Cesium.Entity(this._entityOptions)}toGeoJson(){return Xu.toGeoJson(this)}startEdit(){super.startEdit()}stopEdit(){super.stopEdit()}addNode(e,t){const i=this.positions.length;if(z(t)&&t<i&&t>=0){for(let e=i;e>t;e--)this.positions[e]=this.positions[e-1],this._nodePositions[e]=this._nodePositions[e-1];this.positions[t]=e,this._nodePositions[t]=e}else t=i,this.positions.push(e),this._nodePositions[t]=e;this._positions.length&&(this._nodePositions[i+1]=this._nodePositions[0])}removeNode(e){if(!z(e))return;if(e<0||e>=this.positions.length)return;this.positions.splice(e,1),this._nodePositions.splice(e,1);const t=this.positions.length;0===e&&(this._nodePositions[t]=this._nodePositions[0])}popNode(){const e=this.positions.length-1;this.removeNode(e)}updateNode(e,t){if(e>=this.positions.length)return;this.positions[e]=t;const i=this.positions.length;this._nodePositions[e]=t,0===e&&(this._nodePositions[i]=t)}updateStyle(e){if(e&&this.entity.model)for(const t in e)e.hasOwnProperty(t)&&("outline"===t&&!e.outline&&this.entity.polyline&&(this.entity.polyline=void 0),"outlineColor"===t&&this.entity.polyline&&(this.entity.polyline.material=e[t]),"outlineWidth"===t&&this.entity.polyline&&(this.entity.polyline.width=e[t]),this.entity.polygon[t]=e[t])}static toGeoJson(e){$u.getOGCType(e.type);const t=e.properties?e.properties.toJson():{};t.PlotType=e.type;return{type:"Feature",properties:t,geometry:e.getGeometry()}}static fromGeoJson(e,i){if("string"==typeof e&&(e=JSON.parse(e)),!z(e.geometry)||!z(e.properties))return;if(e.properties.PlotType!==$u.POLYGON)throw new t("json没有包含一个有效的PolygonGraphic.");const n=e.geometry&&e.geometry.coordinates;return Xu.fromCoordinates(n,e.properties,i)}static fromCoordinates(e,t,i=Xu.defaultStyle){const n={positions:Cesium.Cartesian3.fromDegreesArray(e[0].flat()),properties:t,...i};return new Xu(n)}static defaultStyle={material:Cesium.Color.fromCssColorString("rgba(247,224,32,0.5)"),outlineColor:Cesium.Color.RED,outlineWidth:2,outline:!0,perPositionHeight:!1};static highlightStyle={material:new Cesium.ColorMaterialProperty(Cesium.Color.AQUA.withAlpha(.4)),outlineColor:Cesium.Color.AQUA.withAlpha(.4)};static centerFromPonits(e){const t=Cesium.BoundingSphere.fromPoints(e);if(t)return t.center}static center(e){let t=[];function i(e){if(e.getValue){const i=e.getValue();t=i instanceof Cesium.PolygonHierarchy?i.positions:i}else Array.isArray(e)&&(t=e)}if(e instanceof Cesium.Entity){const{hierarchy:t}=e.polygon;i(t)}else e.polygonHierarchy?t=e.polygonHierarchy.positions:e.hierarchy&&i(e.hierarchy);return Xu.centerFromPonits(t)}static isClockWise(e,t){const i=Cesium.EllipsoidTangentPlane.fromPoints(e,t.scene.globe.ellipsoid),n=Cesium.arrayRemoveDuplicates(e,Cesium.Cartesian3.equalsEpsilon,!0),r=i.projectPointsOntoPlane.bind(i)(n);return Cesium.PolygonPipeline.computeWindingOrder2D(r)===Cesium.WebGLConstants.CW}}class Ju{constructor(e){this._type=$u.MUTIPOINT,this._positions=B(e.positions,[]),this._entityOptions=e,this._values=[],this.createEntity(),this._activeNode=void 0,this.activeIndex=void 0}get activeNode(){return this._activeNode}set activeNode(e){this._activeNode=e,this.activeIndex=this.getIndexByPosition(e),this.highlightActiveNode()}highlightActiveNode(){const e=this._values.filter((e=>z(e.position)));for(let t=0,i=e.length;t<i;t++){const i=e[t];t===this.activeIndex?Ju.highlightNode(i):(i.point.color=this._entityOptions.color,i.point.outlineColor=this._entityOptions.outlineColor)}}getGeometry(){const e=[],t=$u.getOGCType(this.type);for(const t of this.positions){const i=Vu.toDegrees(t);e.push([i.lon,i.lat,i.height])}return{type:t,coordinates:e}}static highlightNode(e){e&&e.point&&(e.point.color=Cesium.Color.AQUA,e.point.outlineColor=Cesium.Color.AQUA)}get(e){return this._values.filter((e=>z(e.position)))[e]}getIndexByPosition(e){for(let t=0,i=this._positions.length;t<i;t++){const i=this._positions[t];if(Vu.equal(i,e))return t}return-1}has(e){return this._values.includes(e)}createEntity(){delete this._entityOptions.positions;const e=this._entityOptions,t=this._positions.length;for(let i=0;i<t;i++){const t=new Cesium.Entity({position:new Cesium.CallbackProperty((()=>this._positions[i]),!1),point:e});this._values.push(t)}}addNode(e,t){const i=this._entityOptions;if(this._values.length<this._positions.length){return new Cesium.Entity({position:new Cesium.CallbackProperty((()=>this._positions[this._positions.length-1]),!1),point:i})}}removeNode(e){z(e)}popNode(){const e=this._positions.length-1;return this.removeNode(e)}updateNode(e,t){e>=this._positions.length||(this._positions[e]=t)}destroy(){this._values=void 0}toGeoJson(){return Ju.toGeoJson(this)}get values(){return this._values}static toGeoJson(e){$u.getOGCType(graphic.type);const t=graphic.properties?graphic.properties.toJson():{};t.PlotType=graphic.type;return{type:"Feature",properties:t,geometry:graphic.getGeometry()}}static defaultStyle=Vu.defaultStyle}class Qu extends fu{constructor(e,i={}){if(super(e,i),this._type=B(i.type,$u.STRAIGHTARROW),this._entityOptions=e,this._positions=B(e.positions,[]),this._arrowType=B(i.type,$u.STRAIGHTARROW),!ju.validate(this._arrowType))throw new t("无效的箭头图形.");const n=[];for(let e of this.positions){const t=Vu.toDegrees(e);n.push([t.lon,t.lat])}this._arrowType===ju.straightarrow&&(this._arrow=new Bu({controls:n})),this._arrowType===ju.attackarrow&&(this._arrow=new Uu({controls:n})),this._arrowType===ju.doublearrow&&(this._arrow=new Wu({controls:n})),this._entity=this.createEntity(),this._nodePositions=this._positions}get arrow(){return this._arrow}getGeometry(){Xu.getGeometry(this)}createEntity(){super.createEntity(),delete this._entityOptions.positions;const e={id:this.id,polygon:{hierarchy:this._arrow.polygon.length?Cesium.Cartesian3.fromDegreesArray(this._arrow.polygon):this._arrow.polygon,...this._entityOptions}};return this._entityOptions.outline&&(e.polyline={positions:this._arrow.polyline.length?Cesium.Cartesian3.fromDegreesArray(this._arrow.polyline):this._arrow.polyline,material:this._entityOptions.outlineColor,width:this._entityOptions.outlineWidth},e.polygon.outline=!1),this._entityOptions=e,new Cesium.Entity(this._entityOptions)}startEdit(){}stopEdit(){}addNode(e){if(this.arrow){const t=Vu.toDegrees(e);this.arrow.addControl([t.lon,t.lat]),this.updatePositions(),this.updateEntity(),this.lastLon=t.lon}}popNode(){this.arrow&&(this.arrow.popControl(),this.updatePositions(),this.updateEntity())}updateNode(e,t){if(this.arrow){const i=Vu.toDegrees(t);this.arrow.updateControl(e,[i.lon,i.lat]),this.updatePositions(),this.updateEntity()}}updatePositions(){if(!z(this.arrow))return;const e=this.arrow.controls;for(let t=0;t<e.length;t++)this.positions[t]=Cesium.Cartesian3.fromDegrees(e[t][0],e[t][1]);this.positions.length>e.length&&this.positions.splice(e.length)}updateEntity(){if(this.entity&&this.entity.polygon){const e=this.arrow.polygon.filter((e=>!isNaN(e))),t=this.arrow.polyline.filter((e=>!isNaN(e)));this.entity.polygon.hierarchy=e.length?Cesium.Cartesian3.fromDegreesArray(e):e,this.entity.polyline&&(this.entity.polyline.positions=t.length?Cesium.Cartesian3.fromDegreesArray([...t,t[0],t[1]]):t)}}}const{LEFT_CLICK:Zu,MOUSE_MOVE:Ku,RIGHT_CLICK:eh,LEFT_DOWN:th,LEFT_UP:ih,LEFT_DOUBLE_CLICK:nh,RIGHT_DOWN:rh,RIGHT_UP:oh}=Cesium.ScreenSpaceEventType,sh=1,ah=3;const{arrayFill:lh,BoundingSphere:ch,Cartesian2:uh,Cartesian3:hh,ComponentDatatype:dh,CylinderGeometryLibrary:ph,defaultValue:fh,defined:mh,Geometry:gh,GeometryAttribute:yh,GeometryAttributes:vh,GeometryOffsetAttribute:_h,IndexDatatype:Ch,PrimitiveType:wh,VertexFormat:bh}=Cesium,xh=Cesium.Math,Sh=new uh,Th=new hh,Ah=new hh,Eh=new hh;new hh;const Ph=new bh,Lh={vertexFormat:Ph,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};let Mh;class Dh{constructor(e){const t=(e=fh(e,fh.EMPTY_OBJECT)).length,i=e.topRadius,n=e.bottomRadius,r=fh(e.vertexFormat,bh.DEFAULT),o=fh(e.slices,128);this._length=t,this._topRadius=i,this._bottomRadius=n,this._vertexFormat=bh.clone(r),this._slices=o,this._offsetAttribute=e.offsetAttribute,this._workerName="createCylinderGeometry-by-pro"}static packedLength=bh.packedLength+5;static pack(e,t,i){return i=fh(i,0),bh.pack(e._vertexFormat,t,i),i+=bh.packedLength,t[i++]=e._length,t[i++]=e._topRadius,t[i++]=e._bottomRadius,t[i++]=e._slices,t[i]=fh(e._offsetAttribute,-1),t}static unpack(e,t,i){t=fh(t,0);var n=bh.unpack(e,t,Ph);t+=bh.packedLength;var r=e[t++],o=e[t++],s=e[t++],a=e[t++],l=e[t];return mh(i)?(i._vertexFormat=bh.clone(n,i._vertexFormat),i._length=r,i._topRadius=o,i._bottomRadius=s,i._slices=a,i._offsetAttribute=-1===l?void 0:l,i):(Lh.length=r,Lh.topRadius=o,Lh.bottomRadius=s,Lh.slices=a,Lh.offsetAttribute=-1===l?void 0:l,new Dh(Lh))}static createGeometry(e){var t=e._length,i=e._topRadius,n=e._bottomRadius,r=e._vertexFormat,o=e._slices;if(t<=0||i<0||n<0||0===i&&0===n)return;var s,a=o+o,l=function(e,t,i,n,r){var o,s=.5*e,a=-s,l=n+n,c=new Float64Array(3*(r?2*l:l)),u=0,h=0,d=r?3*l:0,p=r?3*(l+n):3*n;for(o=0;o<n;o++){var f=o/n*xh.TWO_PI,m=Math.cos(f),g=Math.sin(f),y=m*i,v=g*i,_=m*t,C=g*t;c[h+p]=y,c[h+p+1]=v,c[h+p+2]=a,c[h+d]=_,c[h+d+1]=C,c[h+d+2]=s,h+=3,r&&(c[u++]=y,c[u++]=v,c[u++]=a,c[u++]=_,c[u++]=C,c[u++]=s)}return c}(t,i,n,o,!1),c=r.st?new Float32Array(2*a):void 0,u=r.normal?new Float32Array(3*a):void 0,h=r.tangent?new Float32Array(3*a):void 0,d=r.bitangent?new Float32Array(3*a):void 0,p=r.normal||r.tangent||r.bitangent;if(p){var f=r.tangent||r.bitangent,m=0,g=0,y=0,v=Math.atan2(n-i,t),_=Th;_.z=Math.sin(v);var C=Math.cos(v),w=Eh,b=Ah;for(s=0;s<o;s++){var x=s/o*xh.TWO_PI,S=C*Math.cos(x),T=C*Math.sin(x);p&&(_.x=S,_.y=T,f&&(w=hh.normalize(hh.cross(hh.UNIT_Z,_,w),w)),r.normal&&(u[m++]=_.x,u[m++]=_.y,u[m++]=_.z,u[m++]=_.x,u[m++]=_.y,u[m++]=_.z),r.tangent&&(h[g++]=w.x,h[g++]=w.y,h[g++]=w.z,h[g++]=w.x,h[g++]=w.y,h[g++]=w.z),r.bitangent&&(b=hh.normalize(hh.cross(_,w,b),b),d[y++]=b.x,d[y++]=b.y,d[y++]=b.z,d[y++]=b.x,d[y++]=b.y,d[y++]=b.z))}for(s=0;s<o;s++)r.normal&&(u[m++]=0,u[m++]=0,u[m++]=-1),r.tangent&&(h[g++]=1,h[g++]=0,h[g++]=0),r.bitangent&&(d[y++]=0,d[y++]=-1,d[y++]=0);for(s=0;s<o;s++)r.normal&&(u[m++]=0,u[m++]=0,u[m++]=1),r.tangent&&(h[g++]=1,h[g++]=0,h[g++]=0),r.bitangent&&(d[y++]=0,d[y++]=1,d[y++]=0)}var A=6*o,E=Ch.createTypedArray(a,A),P=0,L=0;const M=o;for(s=0;s<o-1;s++)E[P++]=s,E[P++]=M+s,E[P++]=M+s+1,E[P++]=s,E[P++]=M+s+1,E[P++]=s+1,L++;if(E[P++]=L,E[P++]=M+L,E[P++]=M,E[P++]=L,E[P++]=M,E[P++]=0,r.st){const e=1/o;for(s=0;s<o;s++)c[s]=e,c[s+1]=0,c[o+s]=e,c[o+s+1]=1}var D=new vh;r.position&&(D.position=new yh({componentDatatype:dh.DOUBLE,componentsPerAttribute:3,values:l})),r.normal&&(D.normal=new yh({componentDatatype:dh.FLOAT,componentsPerAttribute:3,values:u})),r.tangent&&(D.tangent=new yh({componentDatatype:dh.FLOAT,componentsPerAttribute:3,values:h})),r.bitangent&&(D.bitangent=new yh({componentDatatype:dh.FLOAT,componentsPerAttribute:3,values:d})),r.st&&(D.st=new yh({componentDatatype:dh.FLOAT,componentsPerAttribute:2,values:c})),Sh.x=.5*t,Sh.y=Math.max(n,i);var N=new ch(hh.ZERO,uh.magnitude(Sh));if(mh(e._offsetAttribute)){t=l.length;var R=new Uint8Array(t/3);e._offsetAttribute,_h.NONE,D.applyOffset=new yh({componentDatatype:dh.UNSIGNED_BYTE,componentsPerAttribute:1,values:R})}return new gh({attributes:D,indices:E,primitiveType:wh.TRIANGLES,boundingSphere:N,offsetAttribute:e._offsetAttribute})}static getUnitCylinder(){return mh(Mh)||(Mh=Dh.createGeometry(new Dh({topRadius:1,bottomRadius:1,length:1,vertexFormat:bh.POSITION_ONLY}))),Mh}}Cesium;const{BoundingRectangle:Nh,Cartesian3:Rh,Cartographic:kh,Color:Oh,defined:Ih,destroyObject:Fh,Matrix4:Gh,OrthographicOffCenterFrustum:Bh,PixelFormat:Hh,ClearCommand:zh,Framebuffer:Uh,PassState:Wh,PixelDatatype:jh,Texture:qh,PolygonGeometry:$h,PolygonHierarchy:Vh,BoundingSphere:Yh,VertexArray:Xh,BufferUsage:Jh,ShaderProgram:Qh,RenderState:Zh,WebGLConstants:Kh,DrawCommand:ed,PrimitiveType:td,Pass:id,Transforms:nd,CustomShader:rd,UniformType:od,TextureUniform:sd,TextureManager:ad,ShaderSource:ld}=Cesium,cd=ad.prototype.loadTexture2D;ad.prototype.loadTexture2D=function(e,t){t.texture?this._textures[e]=t.texture:cd(e,t)};class ud{constructor(){this.viewMatrix=Gh.IDENTITY,this.inverseViewMatrix=Gh.IDENTITY,this.frustum=new Bh,this.positionCartographic=new kh,this.upWC=Rh.clone(Rh.UNIT_Y),this.rightWC=Rh.clone(Rh.UNIT_X),this.directionWC=Rh.clone(Rh.UNIT_Z),this.viewPorjectionMatrix=Gh.IDENTITY}clone(e){Gh.clone(e.viewMatrix,this.viewMatrix),Gh.clone(e.inverseViewMatrix,this.inverseViewMatrix),this.frustum=e.frustum.clone(this.frustum),kh.clone(e.positionCartographic,this.positionCartographic),Rh.clone(e.upWC,this.upWC),Rh.clone(e.rigtWC,this.rightWC),Rh.clone(e.directionWC,this.directionWC)}}function hd(e){const t=parseInt(this._width),i=parseInt(this._height),n=this._colorTexture,r=Ih(n)&&n.width!==t&&n.height!==i;Ih(this.frameBuffer)||r||(n&&!n.isDestroyed()&&n.destroy(),this._depthStenclilTexture&&!this._depthStenclilTexture.isDestroyed()&&this._depthStenclilTexture.destroy(),this.frameBuffer&&!this.frameBuffer.isDestroyed()&&this.frameBuffer.destroy(),this._colorTexture=new qh({context:this._frameState.context,width:this._width,height:this._height,pixelFormat:Hh.RGBA,pixelDatatype:jh.UNSIGNED_BYTE}),window._colorTexture=this._colorTexture,this._clearPassState=new Wh(e.context),this._depthStenclilTexture=new qh({context:e.context,width:t,height:i,pixelFormat:Hh.DEPTH_STENCIL,pixelDatatype:jh.UNSIGNED_INT_24_8}),this.frameBuffer=new Uh({context:e.context,colorTextures:[this._colorTexture],depthStencilTexture:this._depthStenclilTexture,destroyAttachments:!1}))}const{AssociativeArray:dd,destroyObject:pd,CustomDataSource:fd,Event:md}=Cesium,gd=function(){return{}},yd=[31638318];for(let e=1;e<20;e++)yd.push(yd[e-1]/2);function vd(e){let t=0;for(let i of yd){if(e>i)break;t++}return t}class _d extends Vs{constructor(e={}){super(e),this._id=B(e.id,_e()),this._createGeometryFunction=e.createGeometryFunction,this._data=e.objects,this._needReclass=!0,this._changeEvent=new md,this._maxClusterLevel=B(e.maxClusterLevel,12),this._minLoadLevel=B(e.minLoadLevel,12),this._geometryCached={},this._objectsCached={}}get id(){return this._id}get dataSource(){return this._dataSource}get minLoadLevel(){return this._minLoadLevel}set minLoadLevel(e){this._minLoadLevel=e}get objects(){return this._objects||this._data}set objects(e){this._objects=e}updateCluster(e){const t=vd(e),i=this._objects;return t>this._maxClusterLevel?(this._objects=this._data,this._needReclass=i!==this._objects,Promise.resolve(this._needReclass)):this._objectsCached[t]?(this._objects=this._objectsCached[t],this._needReclass=i!==this._objects,Promise.resolve(this._needReclass)):this._cluster?new Promise(((e,i)=>{this._cluster.update(),this._objects=this._cluster._clusterObjects,this._objectsCached[t]=JSON.parse(JSON.stringify(this._objects)),this._needReclass=!0,e(!0)})):void 0}beginUpdate(e){vd(e.camera.positionCartographic.height)<this._minLoadLevel?this._objects=[]:this._objects=this._data}endUpdate(e){const t=vd(e.camera.positionCartographic.height);return this._needReclass=!1,t<this._minLoadLevel}initialize(e,t){this._dataSource||(this._scene=t,this._dataSource=new fd("massive-layer"+_e()),this._scene.dataSources.add(this._dataSource))}createGeometry(e,t,i){if(e.level<this._minLoadLevel)return;const n=B(this._createGeometryFunction,gd)(i,e,t),r=Object.keys(i);for(let e of r)"position"!==e&&"id"!==e&&"cartesian"!==e&&"cartographic"!==e&&"label"!==e&&"billboard"!==e&&"__pixel"!==e&&(n[e]=i[e]);return this.add(n),n}removeGeometry(e,t){if(!t)return;const i=this._dataSource.entities.remove(t);return pd(t),i}add(e){this._dataSource&&e&&this._dataSource.entities.add(e)}removeAll(){this._dataSource.entities.removeAll()}isDestroyed(){return!1}destroy(){this._dataSource.removeAll(),pd(this)}}const{QuadtreeTileProvider:Cd,GeographicTilingScheme:wd,when:bd,Event:xd,Cartographic:Sd,Color:Td,Entity:Ad}=Cesium;const{destroyObject:Ed,Event:Pd,Transforms:Ld}=Cesium,Md=function(e,t){const i={};if(e.modelMatrix)i.modelMatrix=e.modelMatrix;else if(e.position){let t=e.position;if(e.position instanceof me&&(t=e.position.toCartesian()),!t)return;i.modelMatrix=Ld.eastNorthUpToFixedFrame(t),e.modelMatrix=i.modelMatrix}return i.minimumPixelSize=B(e.minimumPixelSize,t.minimumPixelSize),i.maximumScale=B(e.maximumScale,t.maximumScale),i.scale=B(e.scale,t.scale),i.allowPicking=B(e.allowPicking,t.allowPicking),i.shadows=B(e.shadows,t.shadows),i.id=e._id,i.url=B(e.url,t.url),Cesium.Model.fromGltf(i)},Dd=[31638318];for(let e=1;e<20;e++)Dd.push(Dd[e-1]/2);function Nd(e){let t=0;for(let i of Dd){if(e>i)break;t++}return t}const{QuadtreeTileProvider:Rd,GeographicTilingScheme:kd,when:Od,Event:Id,Cartographic:Fd,Color:Gd,Entity:Bd,createGuid:Hd}=Cesium;const zd="\nczm_material czm_getMaterial(czm_materialInput materialInput) {\n    float time = (czm_frameNumber * speed / 1000.0);\n    vec2 st = fract(repeat * materialInput.st);\n    st = vec2(fract(time - st.s), st.t);\n    vec4 imageColor = texture2D(image, st);\n    czm_material material = czm_getDefaultMaterial(materialInput);\n    float alpha = 1.0 - (abs(0.5 - st.t) * 2.0);\n    material.alpha = imageColor.a * color.a * alpha;\n    material.diffuse = imageColor.rgb * color.rgb;\n    return material;\n}\n",{Material:Ud,Cartesian2:Wd,Color:jd}=Cesium;Ud.FlowImageType="FlowImage",Ud._materialCache.addMaterial(Ud.FlowImageType,{fabric:{type:Ud.FlowImageType,uniforms:{color:new jd(1,1,1,1),repeat:new Wd(1,1),image:"",speed:1},source:zd}});const{ShaderSource:qd}=Cesium;e.ArrowPlot=Qu,e.BaiDuLayer=class extends vr{constructor(e){(e=B(e,{})).url=B(e.url,"http://maponline{s}.bdimg.com/tile/?qt=vtile&styles=pl&scaler=1&udt=20200102"),e.customid&&(e.url=`https://api.map.baidu.com/customimage/tile?customid=${e.customid}`);const t=new Cesium.Cartesian2(-Kc,-Zc),i=new Cesium.Cartesian2(Kc,Zc);e.tilingScheme=new Cesium.WebMercatorTilingScheme({rectangleSouthwestInMeters:t,rectangleNortheastInMeters:i}),e.subdomains="123",super(e),this._rectangle=this._tilingScheme.rectangle}requestImage(e,t,i){const n=function(e,t,i,n){let r=e.url+"&x={x}&y={y}&z={z}";const o=e._tilingScheme.getNumberOfXTilesAtLevel(n),s=e._tilingScheme.getNumberOfYTilesAtLevel(n),a=4*Math.random()|0;return r=r.replace("{s}",a).replace("{x}",t-o/2).replace("{y}",s/2-i-1).replace("{z}",n),r}(this,e,t,i);return Cesium.ImageryProvider.loadImage(this,n)}},e.BasePlot=fu,e.BingLayer=iu,e.CesiumProError=t,e.CesiumProTerrainProvider=M,e.CircleScanGraphic=class extends Ac{constructor(e){super(e),this._speed=B(e.speed,10),this._time=0,this.createGraphic()}get speed(){return this._speed}set speed(e){if(this._speed===e){if(e<=0)throw new CesiumProError("速度不能小于0");this.definedChanged.raise("speed",e,this._speed),this._speed=e}}createAppearance(){return this._appearance||(this._appearance=new Pc({material:new Lc({translucent:!0,fabric:{uniforms:{image:Q.buildModuleUrl("./assets/img/radarScan.png"),stRotation:Cesium.Matrix2.IDENTITY,color:this._color,time:0},source:Ec}})})),this._appearance}update(e){if(!this.material)return;const t=Cesium.JulianDate.toDate(e).getTime()/this.speed,i=t%360,n=Cesium.Matrix2.fromRotation(Cesium.Math.toRadians(-i));this.material.uniforms.stRotation={x:n[0],y:n[1],z:n[2],w:n[3]},this.material.uniforms.time=t-parseInt(t)}},e.CircleSpreadGraphic=class extends Ac{constructor(e){super(e),this._speed=B(e.speed,10),this._time=0,this.createGraphic()}get speed(){return this._speed}set speed(e){if(e!==this._speed){if(e<=0)throw new CesiumProError("速度不能小于0");this.definedChanged.raise("speed",e,this._speed),this._speed=e}}createAppearance(){return this._appearance||(this._appearance=new Dc({material:new Nc({translucent:!0,fabric:{uniforms:{color:this._color,time:0},source:Mc}})})),this._appearance}update(e){if(!this.material)return;const t=Cesium.JulianDate.toDate(e).getTime()/this.speed;this.material.uniforms.time=t-parseInt(t)}},e.Cluster=class{constructor(e,t={}){this._objects=B(t.objects,[]),this._getScreenBoundingBox=B(t.getScreenBoundingBox,de),this._scene=e,this.clusterSize=3,this.pixelRange=50,this._clusterObjects=[]}get objects(){return this._objects}set objects(e){this._objects=e}_clearCluster(){this._objects.map((e=>e.cluster=!1)),this._clusterObjects=[]}update(){const e=this._objects;this._clearCluster();const t=function(e,t){const i=[],n=new ce(t.globe.ellipsoid,t.camera.positionWC);for(let r of e)r.position&&(t.mode!==le.SCENE3D||n.isPointVisible(r.position))&&(r.__pixel=Cesium.SceneTransforms.wgs84ToWindowCoordinates(t,r.position),r.__pixel&&i.push(r));return i}(e,this._scene),i=new ne(t,ue,he,64,Int32Array);for(let e of t){if(e.cluster)continue;const n=this._getScreenBoundingBox(e,e.__pixel),r=ae.clone(n,new ae);e.cluster=!0;const o=i.range(n.x,n.y,n.x+n.width,n.y+n.height),s=o.length,a=re.clone(e.position);let l,c=1;const u=[];for(let e=0;e<s;e++){const i=t[o[e]];if(i.cluster)continue;u.push(i.id),i.cluster=!0;const n=this._getScreenBoundingBox(i,i.__pixel);re.add(i.position,a,a),ae.union(r,n,r),c++,l=i}c>=this.clusterSize?(re.multiplyByScalar(a,1/c,a),this._clusterObjects.push({position:new re(a.x,a.y,a.z),number:c,ids:u,id:l.id+c})):this._clusterObjects.push(e)}}},e.ContextMenu=ve,e.CursorTip=pn,e.CylinderGeometry=Dh,e.DivGraphic=class{constructor(e={}){if(!e.position)throw new t("paramerter position must be provided.");if(!e.element)throw new t("parameter element must be provided.");this._show=B(e.show,!0),this._element=element}get show(){return this._show}set show(e){this._show=e,this._element.style.display=e?"block":"none"}get element(){return this.element}},e.DynamicConeGraphic=class extends Ac{constructor(e){super(e),this._speed=B(e.speed,1),this._image=B(e.image,Q.buildModuleUrl("assets/img/particle.png")),this._appearance={},this._length=e.length,this._primitive=new jc,this.createGraphic()}get speed(){return this._speed}set speed(e){if(e===this._speed)return;if(e<=0)throw new t("速度不能小于0");this.definedChanged.raise("speed",e,this._speed),this._speed=e;const i=Object.values(this._appearance);for(let t of i){const i=t.material;console.log(i.uniforms),i.uniforms.speed=e}}get length(){return this._length}set length(e){e!==this._length&&(this.definedChanged.raise("length",e,this._length),this._length=e,this.updatePrimitive())}updatePrimitive(){if(!this._viewer)return;this.primitive.removeAll(),this.createGraphic(),this._viewer.primitives.add(this._primitive)}updateAttribute(e,t){if(this.isDestroyed())return;if(!this.primitive)return;const i=this.primitive._primitives;for(let n of i)super.updateAttribute.call({primitive:n,isDestroyed:this.isDestroyed},e,t)}createGraphic(){const e=this.createAppearance(kc),t=this.createAppearance(Oc),i=this.createAppearance(Ic),n=this.createAppearance(Fc);this._clampToGround?(this.createCircleGroundPrimitive(e,this._asynchronous),this.createCircleGroundPrimitive(t,this._asynchronous),this.createCylinder(.35*this._radius,i,this._asynchronous),this.createCylinder(.4*this._radius,n,this._asynchronous)):this.createCylinder(.4*this._radius,.4*this._radius,n,this._asynchronous)}createCylinder(e,t,i,n=!0){if(this.isDestroyed())return;const r=B(this._length,.35*this._radius*8),o=$c.eastNorthUpToFixedFrame(me.toCartesian(this._position)),s=Vc.fromTranslation(new Yc(0,0,r/2+this._height));Vc.multiply(o,s,o);const a=new qc({topRadius:e,bottomRadius:t,length:r}),l=new Uc({geometryInstances:new Wc({geometry:a,id:this.property}),appearance:i,asynchronous:n,allowPicking:this._allowPicking,modelMatrix:o});return this._primitive.add(l),l}createCirclePrimitive(e,t=!0){if(this.isDestroyed())return;const i=new Hc({center:me.toCartesian(this._position),radius:this._radius,stRotation:this._stRotation,extrudedHeight:this._extrudedHeight,height:this._height,granularity:.01}),n=new Uc({geometryInstances:new Wc({geometry:i,id:this.property}),appearance:e,asynchronous:t,allowPicking:this._allowPicking});return this._primitive.add(n),n}createCircleGroundPrimitive(e,t=!0){if(this.isDestroyed())return;const i=new Hc({center:me.toCartesian(this._position),radius:this._radius,stRotation:this._stRotation,extrudedHeight:this._extrudedHeight,height:this._height}),n=new zc({geometryInstances:new Wc({geometry:i,id:this.property}),appearance:e,asynchronous:t,allowPicking:this._allowPicking});return this._primitive.add(n),n}createAppearance(e){return this._appearance[e]||(this._appearance[e]=new Gc({material:new Bc({translucent:!0,fabric:{uniforms:{color:this._color,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAEACAYAAAADRnAGAAAAAXNSR0IArs4c6QAACQdJREFUeF7tncmvFUUUxr9yFqdEnNg4oa404kYwutANIBu36sK9Cn+Ngmtnl7pSNFE2DmgiGl0pDnGDJjyMAUXGMh85bZpL9+2699U5VcU7N7mbl/uqvv6dr6u7q0+dCljjn7DGjx8OwB2wxgn4KbDGDeCDoJ8C806BGOMlAPg9E0KIJU4XbQ2jDogxXgHgZgDXAlgB8GcI4YwlBAsNgwCE+gYATwLYBOADAJ+EEP62AmClYQzAZQA2AtgFYCuAVwC8GkI4YgjARMMYAP79RgBbANwL4EsAB0IIx4cAxBj5e44V/JzNMV5Im+oa5o0BlwK4CsCVAI5PHPx1ANYLAI4XRzNBUNew6stgjJGA7gewHTh3X/E+gO9DCCcMT5elNeQAcA2AxwHslAPeDWBfCOGYIYClNeQAwMvlnTJe8Jj3A/glhHDSEMDSGlYNgAcZY7wcAKPAzz+WB99BXlZDFgBWkdboxwFoUG2pTXdAS9HS0OoO0KDaUpvugJaipaHVHaBBtaU2kx0g99pXyyMv5wfMHnZm7vezakgCIAd/N4DNIoZPfD+HEE5ZRVtLQyoAPuk9AeBFOeCX5ZnfcpJURUMqAM64PCCzPmTAWWLO+vxr6AAVDakAOOHJ9wM3yQEfBnAshHDWEICKhiQAMunB33KSkp8ib4pkpjirhmQAVpG27scBWBOvrT93QG0RsdbjDrAmXlt/7oDaImKtxx1gTby2/twBtUXEWo87wJp4bf2pO0Ajg2xRiPM0qAKQjlUyyFIhTGnQBtBlbzHjlLnGnEv8znJKvZfFNqhBGwDnEZlB1s0mM4PMOuV2rgZtAMzeumvmfUKJDLJRDaoAZDKVGWTr5JxlBpnZy5RunJCXKoMa1AGkDlalfucASpGvpV93QC2RKKXDHVCKfC39ugNqiUQpHe6AUuRr6TfZAbKQkRlac1eRaR6YhoYkANJxt4aPCyq7dYSWOUJMkcmuIRUA01K4gJLP9dsA8Ln+deOVpCoaUgGQ/m0AdgB4EMDeAkvjVDQkAZDnek5uMEvsellNvmKZJaalIRmACGAU+D/R+uB7kxtZNSwEQHOEL9W2AyhFvpZ+3QG1RKKUDndAKfK19OsOqCUSpXS4A0qRr6Vfd0AtkSilwx1Qinwt/boDaolEKR3ugJzkJReHc4enAZwqMW22qIZsDpDyl8zG4vT5IQA/yPJas1qky2jICeAGAE8BeAbApwDeBPCbZR3SGOPCGjQAPA3gs8IAkjXkBNAlRa7ZU4AwWQiVIFh+96T1ICiJ0QtpyOaAnFcTy7YcgCXtGvtyB9QYFUtN7oAh2jFGZmPwcsYPL2emVeXlVbyJhgscEGPkdfQWuaenlh8B/GEJwVLDEABmgj0M4FlxwFtMihqrLa5xvsYYzTSMAWDNsD6A/QUAmGgYOwVunTkFfi9wCphoGLwKyDnYHwQ5wWH6sdKgdhmsfclsF00VAAPLVbvia5azQzy2/rLdQQ1aAPpLZgm75KYLXDI7qkELgErxw0UGoRhjkgYtALNLZr8A8KvxoukkDSoA5Fa2WzLLPkpuusAls6Ma1AAsYteSv3UAJenX0Lc7oIYolNTgDihJv4a+3QE1RKGkBndASfo19O0OqCEKJTW4A0rSr6Fvd0ANUSipIasD5KUqt+rll7NAg/sUax7wohqyARjZKPlr441YeDyzmzXP1ZATwGyBgz0AXitcZGFSQ24ALLLAeXgWWfgQwMfGG7YzCAtpyAZAZoL7RRb4JuZIgVzBhTRkBSAQugIHWTZhX2bAlKIvPLZJDdkBLCO45P84gJL0a+j7PAfIucNXWvyeKFQBlmOImYb/AciNDIsQ3wdgg2SHWe8pSD2mGvoAeA29XZKjHgPwDoB3Qwh/WVlVbmNNNcwCuEMAPFoQgKkGPwX69pZxgHdSzBZlimyJMtgMipkGvw+wGuBq7ccdUGtkrHS5A6xI19qPO6DWyFjpcgdYka61H3dArZGx0uUOsCJdaz/ugFojY6XLHWBFutZ+3AG1RsZKV5IDeqtAS5bVp1a+NcqqYRJAb3+R9QCOcnOFEMIJqwj1Xrkz9SW7hhQA3Z6d2wEckI1TD1kmPsQY1TSkACD55wA8D+AjAC8BOGi8nF5NQwoAVnPYJBunHgTAVaCmqS9SUUJFwyQAOQcJgd+TAI5bRr8bawRCdg1JACwHPOu+HIA18dr6U3NAL93m3JtmFloNIZhVkOjdPzDdZlSDCoCRdBvrLbeH0m0u0KAFoJl0GysAbwN4r3C+0aAGLQBslxVcWGC1yzgrcQpMalABMDQAFUq36XIOR1N+1ADUdrkb0+MAWomUlk53gBbZVtp1B7QSKS2d7gAtsq206w5oJVJaOt0BWmRbadcd0EqktHS6A7TIttKuO6CVSGnpdAdokW2lXXdAK5HS0ukO0CLbSrvugFYipaXTHaBFtpV23QGtREpLpztAi2wr7boDWomUls5kB0juH9PfuGLDfAdKAtDQkARASlwxZ5/fYwAOF1g1QvjZNaQC6Lat2gbgW9k7zHrViIqGVADdio0XpFhqyVUjWTWkAmCh5Id6q0Y+l1UjZsnPMUYVDakA+DsKyL5iI3V0lwEwu4YkAKkiW/ydA2gxajk1uwNy0myxLRMHyJ0kryCsFMl1h6X2HbhAgzqA3r4DjwDYyH3MAXxjCWGeBgsAvIe/B8AuAFsB7AbwRghhxeqUEQcOarAAwFUbrPm/Q/Yd2AtgXwiBD1UmH1nCN6hBHYA8xvZr/jPyXHxt+kgdYxzUYAJAINAJ/LLm/1mT0M90Ik44T8NcABoTEIseuLaGUQAXe+mMLhDzAKhMQCzigN7+4WoTMfMADE2C/BRCOL3IQazmtzFGdQ3zAHSlM7bIXgMsncEKMpaTIOoapgbBi7Z0xuQYsBrrtvS/ZvcBtUJxALVGxkqXO0CDtNxFris8AcJ7/kkN2R3Qu4XeLPMAX7EIm/EECA+eN1GTGjQAdBMgOwHwFnZy08PcLuxNgExq0ALAyQeW32MBtBITIN3Gi5MasgMYmACpeuNFFQC9CRC2P7npYe5ToGsvZeNFNQBaB5W7XQeQm2hr7a15B/wHRTppPaBaKTsAAAAASUVORK5CYII=",speed:this._speed},source:e}})})),this._appearance[e]}update(e){}},e.Event=r,e.FlattenPolygonCollection=class{constructor(e,t){this._model=e,e instanceof $s&&(this._model=e.delegate),this._frameState=t.scene.frameState,this._colorTexture=void 0,this._depthStenclilTexture=void 0,this.frameBuffer=void 0,this._viewport=new Nh,this._rs=void 0,this.canvas=void 0,this._clearColorCommand=new zh({depth:1,coloe:new Oh(0,0,0,1)}),this._useScissorTest=!1,this._scissorRectangle=!1,this._drawCommandList=[],this._camera=new ud,this._passState=void 0,this._clearPassState=void 0,this._width=4096,this._height=4096,this._positions=[],this._polygonBounding=new Nh,this._delta=0,this._localModel=void 0,this._inverseLocalModel=void 0,this._uniforms={},this._initShaderSource=!1,this._colorTexture=void 0,this._enabled=!0,this._removeEvent=t.scene.postRender.addEventListener((e=>{this.update(e.frameState)}))}get enabled(){return this._enabled}set enabled(e){this._enabled=e}get ready(){return this._model.ready}get readyPromise(){return this._model.readyPromise}get polygonBounding(){return this._polygonBounding}set polygonBounding(e){this._polygonBounding={x:e.x,y:e.y,z:e.x+e.width,w:e.y+e.height};const t=this._camera.frustum;t.left=e.x,t.top=e.y+e.height,t.right=e.x+e.width,t.bottom=e.y}_updateUniforms(){if(this._uniforms){if(this._uniforms.u_polygonTexture){const e=new sd({url:"./"});e.texture=this._colorTexture,this._uniforms.u_polygonTexture.value=e}this._uniforms.u_polygonBounding&&(this._uniforms.u_polygonBounding.value=this._polygonBounding),this._uniforms.u_enabled&&(this._uniforms.u_enabled.value=this._enabled),this._uniforms.u_delta&&(this._uniforms.u_delta.value=this._delta)}}_addShaderSource(){if(this._initShaderSource)return;const e=new sd({url:"./"});e.texture=this._colorTexture;const t={u_inverseLocalModel:{type:od.MAT4,value:this._inverseLocalModel},u_localModel:{type:od.MAT4,value:this._localModel},u_polygonBounding:{type:od.VEC4,value:this.polygonBounding},u_polygonTexture:{type:od.SAMPLER_2D,value:e},u_delta:{type:od.FLOAT,value:this._delta},u_enabled:{type:od.BOOL,value:this._enabled}};this._uniforms=t,this._model.customShader=new rd({uniforms:t,vertexShaderText:"bool isPointInBound(vec4 point, vec4 bounds) {\n    return (point.x>bounds.x&&point.x<bounds.z&&point.y>bounds.y&&point.y<bounds.w);\n  }\n  void vertexMain(VertexInput vsInput, inout czm_modelVertexOutput vsOutput) {\n  vec4 positionLC = u_inverseLocalModel * czm_model * vec4(vsInput.attributes.positionMC, 1.0);  \n    if (u_enabled && isPointInBound(positionLC, u_polygonBounding)) {\n      vec2 textureCoord;\n      textureCoord.x = (positionLC.x-u_polygonBounding.x)/(u_polygonBounding.z-u_polygonBounding.x);\n      textureCoord.y = (positionLC.y-u_polygonBounding.y)/(u_polygonBounding.w-u_polygonBounding.y);\n      float depth = czm_unpackDepth(texture2D(u_polygonTexture, textureCoord));\n      depth = depth * 4096.0;\n      if (depth > 1.0 && positionLC.z > depth) {\n        positionLC.z = mix(depth, positionLC.z, u_delta);\n      }\n      vsOutput.positionMC = (czm_inverseModel * u_localModel * positionLC).xyz;\n    }       \n  }"}),this._initShaderSource=!0}_createDrawCommand(e,t){const i=this._frameState,n=e.attributes.position.values;for(let e=0,i=n.length;e<i/3;e++){const i=new Rh(n[3*e],n[3*e+1],n[3*e+2]);Gh.multiplyByPoint(t,i,i),n[3*e]=i.x,n[3*e+1]=i.y,n[3*e+2]=i.z,this._positions.push(i)}e.boundingSphere=Yh.transform(e.boundingSphere,t),this.polygonBounding=Nh.fromPoints(this._positions);const r=Xh.fromGeometry({context:i.context,geometry:e,attributeLocations:{position:0},bufferUsage:Jh.STREAM_DRAW,interleave:!0}),o=Qh.fromCache({context:i.context,vertexShaderSource:"\nattribute vec3 position;\nvarying float depth;\nvoid main() {\n  vec4 pos = vec4(position, 1.0);\n  depth = position.z;\n  gl_Position = czm_projection * vec4(position.xy, 0.0, 1.0); \n}\n",fragmentShaderSource:"\nvarying float depth;\nvoid main() {\n  float fDepth = depth / 4096.0; \n  gl_FragColor = czm_packDepth(fDepth);\n}\n"}),s=new Zh;s.depthTest.enabled=!0,s.cull.enabled=!0,s.cull.face=Kh.BACK;const a=new ed({primitiveType:td.TRIANGLES,vertexArray:r,shaderProgram:o,uniformMap:{},renderState:s,pass:id.CESIUM_3D_TILE});this._updateUniforms(),this._drawCommandList.push(a)}addPolygon(e){this._localModel?this._createDrawCommand(e,this._inverseLocalModel):this.readyPromise.then((()=>{this._updateMatrix(),this._createDrawCommand(e,this._inverseLocalModel)}))}_updateMatrix(){let e=this._model._rtcCenter;if(!e){const t=this._model.boundingSphere.center,i=kh.fromCartesian(t);e=Rh.fromRadians(i.longitude,i.latitude,0)}this._localModel=nd.eastNorthUpToFixedFrame(e),this._inverseLocalModel=Gh.inverse(this._localModel,{})}addPolygonFromPositionArray(e){const t=Math.min(...e.map((e=>kh.fromCartesian(e).height))),i=new $h({polygonHierarchy:new Vh(e),height:t}),n=$h.createGeometry(i);this.addPolygon(n)}update(e){if(!this._drawCommandList.length)return;hd.call(this,e),this._initShaderSource||this._addShaderSource(),Ih(this._passState)||(this._passState=new Wh(e.context)),this._updateUniforms(),this._passState.viewport=new Nh(0,0,this._width,this._height);const t=e.context.uniformState;t.updateCamera(this._camera),this._clearColorCommand.framebuffer=this.frameBuffer,this._clearColorCommand.execute(e.context,this._clearPassState);for(const i of this._drawCommandList)t.updatePass(i.pass),i.framebuffer=this.frameBuffer,i.execute(e.context,this._passState)}clear(){this._clearColorCommand&&this._clearColorCommand.execute(this._frameState.context,this._clearPassState)}isDestroyed(){return!1}destroy(){this._colorTexture&&!this._colorTexture.isDestroyed()&&this._colorTexture.destroy(),this._depthStenclilTexture&&!this._depthStenclilTexture.isDestroyed()&&this._depthStenclilTexture.destroy(),this.frameBuffer&&!this.frameBuffer.isDestroyed()&&this.frameBuffer.destroy(),Fh(this),this._removeEvent()}},e.GaoDeLayer=nu,e.GeoJsonDataSource=po,e.Globe=Ya,e.Graphic=yn,e.GraphicGroup=_n,e.GroundSkyBox=class{constructor(e={}){this.sources=bn(e.sources,{positiveX:Q.buildModuleUrl("./assets/skybox/px.png"),negativeX:Q.buildModuleUrl("./assets/skybox/nx.png"),positiveY:Q.buildModuleUrl("./assets/skybox/py.png"),negativeY:Q.buildModuleUrl("./assets/skybox/ny.png"),positiveZ:Q.buildModuleUrl("./assets/skybox/pz.png"),negativeZ:Q.buildModuleUrl("./assets/skybox/nz.png")}),this._sources=void 0,this.show=bn(e.show,!0),this._command=new Tn({modelMatrix:Sn.clone(Sn.IDENTITY),owner:this}),this._cubeMap=void 0,this._attributeLocations=void 0,this._useHdr=void 0,this._isDestroyed=!1}update(e,i){const n=new zn,r=this;if(!this.show)return;if(e.mode!==Gn.SCENE3D&&e.mode!==Gn.MORPHING)return;if(!e.passes.render)return;const{context:o}=e;if(this._sources!==this.sources){this._sources=this.sources;const{sources:e}=this;if(!(Pn(e.positiveX)&&Pn(e.negativeX)&&Pn(e.positiveY)&&Pn(e.negativeY)&&Pn(e.positiveZ)&&Pn(e.negativeZ)))throw new t("this.sources is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");if(typeof e.positiveX!=typeof e.negativeX||typeof e.positiveX!=typeof e.positiveY||typeof e.positiveX!=typeof e.negativeY||typeof e.positiveX!=typeof e.positiveZ||typeof e.positiveX!=typeof e.negativeZ)throw new t("this.sources properties must all be the same type.");"string"==typeof e.positiveX?kn(o,this._sources).then((e=>{r._cubeMap=r._cubeMap&&r._cubeMap.destroy(),r._cubeMap=e})):(this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),this._cubeMap=new Rn({context:o,source:e}))}const s=this._command;if(s.modelMatrix=Mn.eastNorthUpToFixedFrame(e.camera._positionWC),!Pn(s.vertexArray)){s.uniformMap={u_cubeMap:()=>r._cubeMap,u_rotateMatrix:()=>"function"==typeof Sn.getRotation?Sn.getRotation(s.modelMatrix,n):Sn.getMatrix3(s.modelMatrix,n)};const e=An.createGeometry(An.fromDimensions({dimensions:new En(2,2,2),vertexFormat:Dn.POSITION_ONLY})),t=this._attributeLocations=Ln.createAttributeLocations(e);s.vertexArray=In.fromGeometry({context:o,geometry:e,attributeLocations:t,bufferUsage:Nn._DRAW}),s.renderState=On.fromCache({blending:Fn.ALPHA_BLEND})}if(!Pn(s.shaderProgram)||this._useHdr!==i){const e=new Hn({defines:[i?"HDR":""],sources:["uniform samplerCube u_cubeMap;\n  varying vec3 v_texCoord;\n  void main()\n  {\n  vec4 color = textureCube(u_cubeMap, normalize(v_texCoord));\n  gl_FragColor = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);\n  }\n  "]});s.shaderProgram=Bn.fromCache({context:o,vertexShaderSource:"attribute vec3 position;\n  varying vec3 v_texCoord;\n  uniform mat3 u_rotateMatrix;\n  void main()\n  {\n  vec3 p = czm_viewRotation * u_rotateMatrix * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));\n  gl_Position = czm_projection * vec4(p, 1.0);\n  v_texCoord = position.xyz;\n  }\n  ",fragmentShaderSource:e,attributeLocations:this._attributeLocations}),this._useHdr=i}return Pn(this._cubeMap)?s:void 0}isDestroyed(){return this._isDestroyed}destroy(){const e=this._command;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy(),this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),xn(this)}},e.ImagerySplitDirection=Un,e.InfoBox=zs,e.LonLat=me,e.LonLatNetLayer=class{constructor(e={}){const t=new Yn({rectangle:Cesium.Rectangle.MAX_VALUE,intervalOfZeorLevel:e.intervalOfZeorLevel});this._hasAlphaChannel=B(e.hasAlphaChannel,!0),this._tilingScheme=t,this._image=void 0,this._texture=void 0,this._errorEvent=new r,this._ready=!0,this._readyPromise=Cesium.when.defer(),this._readyPromise.resolve(!0),this._font=B(e.font,"bold 24px sans-serif"),this._color=B(e.color,"white"),this._borderColor=B(e.borderColor,"gold"),this._borderWidth=B(e.borderWidth,2),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=256,this.canvas.height=256,this.ctx.textBaseline="middle"}get hasAlphaChannel(){return this._hasAlphaChannel}get tileHeight(){return 256}get tileWidth(){return 256}get minimumLevel(){return 0}get maximumLevel(){return 4}get rectangle(){return Cesium.Rectangle.MAX_VALUE}get errorEvent(){return this._errorEvent}get tileDiscardPolicy(){}get readyPromise(){return this._readyPromise}get ready(){return!0}get tilingScheme(){return this._tilingScheme}get font(){return this._font}set font(e){this._font=e}get color(){return this._color}set color(e){this._color=e}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e}get borderWidth(){return this._borderWidth}_resetStyle(){this.ctx.font=this.font,this.ctx.fillStyle=this.color,this.ctx.strokeStyle=this.borderColor,this.ctx.lineWidth=this.borderWidth}_clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}getOffset(e,t,i){const n=this.tilingScheme.getDelatXY(i),r=Math.floor(e),o=Math.floor(t);if(r===e&&o===t)return[0,0,r,o];const s=e-r,a=t-o;let l=0,c=0;return s&&(l=this.tileWidth/n.dx*s),a&&(c=this.tileHeight/n.dy*a),[l,c,r,o]}requestImage(e,t,i,n){this._clearCanvas(),this._resetStyle();const{canvas:r,ctx:o}=this,s=this.tilingScheme.getLonLatValuee(i,e,t);return this.tilingScheme.tileXYToNativeRectangle(e,t,i),this.ctx.textAlign="left",o.fillText(s.lon,10,r.height/2),this.ctx.textAlign="center",o.fillText(s.lat,r.width/2,20),o.strokeRect(0,0,r.width,r.height),r}},e.LonlatTilingScheme=Yn,e.MassiveBillboardLayer=class extends _d{constructor(e={}){e.objects=B(e.objects,[]),e.pixelSize=B(e.pixelSize,5),e.color=B(e.color,Td.fromRandom),e.createGeometryFunction=B(e.createGeometryFunction,function(e){return function(t){const i={id:t.id,position:t.position,point:{pixelSize:B(t.pixelSize,e.pixelSize),color:B(t.color,e.color)}};return t.label&&(i.label={text:t.label}),new Ad(i)}}(e)),super(e)}},e.MassiveEntityLayer=_d,e.MassiveGraphicLayer=Vs,e.MassiveGraphicLayerCollection=Xs,e.MassiveModelLayer=class extends Vs{constructor(e={}){e.objects.forEach((e=>{e._id=e.id,delete e.id})),super(e),this._id=B(e.id,_e()),this._createGeometryFunction=e.createGeometryFunction,this._data=e.objects,this._needReclass=!0,this._changeEvent=new Pd,this._maxClusterLevel=B(e.maxClusterLevel,12),this._minLoadLevel=B(e.minLoadLevel,12),this._geometryCached={},this._objectsCached={},this._options=e}get id(){return this._id}get minLoadLevel(){return this._minLoadLevel}set minLoadLevel(e){this._minLoadLevel=e}get objects(){return this._objects||this._data}set objects(e){this._objects=e}updateCluster(e){const t=Nd(e),i=this._objects;return t>this._maxClusterLevel?(this._objects=this._data,this._needReclass=i!==this._objects,Promise.resolve(this._needReclass)):this._objectsCached[t]?(this._objects=this._objectsCached[t],this._needReclass=i!==this._objects,Promise.resolve(this._needReclass)):this._cluster?new Promise(((e,i)=>{this._cluster.update(),this._objects=this._cluster._clusterObjects,this._objectsCached[t]=JSON.parse(JSON.stringify(this._objects)),this._needReclass=!0,e(!0)})):void 0}beginUpdate(e){Nd(e.camera.positionCartographic.height)<this._minLoadLevel?this._objects=[]:this._objects=this._data}endUpdate(e){const t=Nd(e.camera.positionCartographic.height);return this._needReclass=!1,t<this._minLoadLevel}initialize(e,t){if(!this._collection){this._scene=t;const e=new Cesium.PrimitiveCollection;t.primitives.add(e),this._collection=e}}createGeometry(e,t,i){if(e.level<this._minLoadLevel)return;const n=B(this._createGeometryFunction,Md)(i,this._options);return this.add(n),n}removeGeometry(e,t){if(!t)return;return this._collection.remove(t)}add(e){this._collection&&e&&this._collection.add(e)}removeAll(){this._collection.removeAll()}isDestroyed(){return!1}destroy(){this._collection.removeAll(),Ed(this)}},e.MassivePointLayer=class extends _d{constructor(e={}){e.objects=B(e.objects,[]),e.pixelSize=B(e.pixelSize,5),e.color=B(e.color,Gd.fromRandom),e.createGeometryFunction=B(e.createGeometryFunction,function(e){return function(t){let i=Hd();"string"!=typeof t.id&&"number"!=typeof t.id||(i=t.id);const n={id:i,position:t.position,point:{pixelSize:B(t.pixelSize,e.pixelSize),color:B(t.color,e.color)}};return t.label&&(n.label={text:t.label}),new Bd(n)}}(e)),super(e)}},e.Material=Ud,e.Model=js,e.MultipleTerrainProvider=class{constructor(e,t={}){this._heightmapWidth=65,this._heightmapStructure=void 0,this._hasWaterMask=!1,this._hasVertexNormals=!1,this._ellipsoid=t.ellipsoid,this._requestVertexNormals=B(t.requestVertexNormals,!1),this._requestWaterMask=B(t.requestWaterMask,!1),this._requestMetadata=B(t.requestMetadata,!0),this._errorEvent=new r,this._terrainProviders=[];const i=[];for(let n of e){n.requestVertexNormals=n.requestVertexNormals||t.requestVertexNormals,n.requestWaterMask=n.requestWaterMask||t.requestWaterMask,n.requestMetadata=n.requestMetadata||t.requestMetadata;const e=new M(n);e.zIndex=n.zIndex||-1,this._terrainProviders.push(e),i.push(or(e,n.url))}this._ready=!1,this._readyPromise=Jn.defer(),this._terrainList=e,Promise.all([...this._terrainProviders.map((e=>e.readyPromise)),...i]).then((e=>{this._ready=!0,this._readyPromise.resolve(!0),this._tilingScheme=this._terrainProviders[0]._tilingScheme,this._levelZeroMaximumGeometricError=Qn.getEstimatedLevelZeroGeometricErrorForAHeightmap(this._tilingScheme.ellipsoid,this._heightmapWidth,this._tilingScheme.getNumberOfXTilesAtLevel(0))})),this._validProvider=void 0}get tilingScheme(){return this._tilingScheme}get ready(){return this._ready}get readyPromise(){return this._readyPromise}createBoundingRectangle(e){const t=new Kn("multiple-terrain-provider");for(let e of this._terrainProviders)t.entities.add(rr(e));return e.addLayer(t),function(){const t=e.dataSources.getByName("multiple-terrain-provider");e.dataSources.remove(t[0])}}getLevelMaximumGeometricError(e){return this._validProvider?this._validProvider.getLevelMaximumGeometricError(e):this._levelZeroMaximumGeometricError/(1<<e)}getTileDataAvailable(e,t,i){const n=this._terrainProviders.filter((n=>n.getTileDataAvailable(e,t,i))).sort(((e,t)=>t.zIndex-e.zIndex));return this._validProvider=n[0],!!this._validProvider}requestTileGeometry(e,t,i,n){for(let n of this._terrainProviders)n!==this._validProvider&&n.getTileDataAvailable(e,t,i)&&n.requestTileGeometry(e,t,i);if(this._validProvider)return this._validProvider.requestTileGeometry(e,t,i)}},e.NodePlot=Ju,e.PbfDataSource=function(){},e.PlotManager=class{constructor(e,t){G(e),this._viewer=e,t=B(t,{}),this._id=B(t.id,Ce()),this._dataSource=new Cesium.CustomDataSource("cesiumpro-graphic_"+this._id),this._nodeDataSource=new Cesium.CustomDataSource("cesiumpro-graphic-node_"+this._id),this._viewer.dataSources.add(this._dataSource),this._viewer.dataSources.add(this._nodeDataSource),this._root=this._dataSource.entities,this._nodeRoot=this._nodeDataSource.entities,this._preEdit=new r,this._postEdit=new r,this._preCreate=new r,this._postCreate=new r,this._preRemove=new r,this._postRemove=new r,this._values=new Cesium.AssociativeArray,this._handler=new Cesium.ScreenSpaceEventHandler(this._viewer.canvas),this._pointStyle=B(t.pointStyle,Vu.defaultPointStyle),this._labelStyle=B(t.labelStyle,Vu.defaultLabelStyle),this._modelStyle=B(t.modelStyle,Vu.defaultModelStyle),this._billboardStyle=B(t.billboardStyle,Vu.defaultBillboardStyle),this._polylineStyle=B(t.polylineStyle,Yu.defaultStyle),this._polygonStyle=B(t.polygonStyle,Xu.defaultStyle),this._editEventHandler=new Cesium.ScreenSpaceEventHandler(this._viewer.canvas),this._viewer.screenSpaceEventHandler.removeInputAction(nh),this._mode=sh,t.contextEnabled=B(t.contextEnabled,!0),t.contextEnabled&&(this.contextMenu=this.createContext()),this.cursorTip=new pn({text:"",id:"plot-manager-tip",viewer:this._viewer,show:!1}),this.activeGraphic=void 0,this.selectedGraphic=void 0}get viewer(){return this._viewer}get preEdit(){return this._preEdit}get postEdit(){return this._postEdit}get preCreate(){return this._preCreate}get postCreate(){return this._postCreate}get preRemove(){return this._preRemove}get postRemove(){return this._postRemove}get root(){return this._root}pick(e){let t,i=!1;return $u.isPoint(e)&&(i=!0),this._mode=ah,e===$u.POINT?t=this.createPoint(this._pointStyle,this._labelStyle):e===$u.LABEL?t=this.createLabel(this._labelStyle):e===$u.MODEL?t=this.createModel(this._modelStyle,this._labelStyle):e===$u.BILLBOARD?t=this.createBillboard(this._billboardStyle,this._labelStyle):e===$u.POLYLINE?t=this.createPolyline(this._polylineStyle):e===$u.POLYGON?t=this.createPolygon(this._polygonStyle):$u.isArrow(e)&&(t=this.createArrow(this._polygonStyle,e)),this.activeGraphic=t,t.startEdit(),this.addEventListener(i),t}createPoint(e,t){const i=new Vu(e,{label:t});return this.add(i),i}createLabel(e){const t=new Vu(e,{type:$u.LABEL});return this.add(t),t}createModel(e,t){const i=new Vu(e,{type:$u.MODEL,label:t});return this.add(i),i}createBillboard(e,t){const i=new Vu(e,{type:$u.BILLBOARD,label:t});return this.add(i),i}createPolyline(e){const t=new Yu(e);return this.add(t),t}createPolygon(e){const t=new Xu(e);return this.add(t),t}createArrow(e,t){const i=new Qu(e,{type:t});return this.add(i),i}add(e){this.preCreate.raise(e),z(this.viewer&&z(e.entity))&&(this.root.add(e.entity),this._values.set(e.id,e),this.postCreate.raise(e))}remove(e){z(e)&&(this.preRemove.raise(e),z(this.viewer)&&z(e.entity)&&(this.root.remove(e.entity),this.postRemove.raise(e)),this._values.remove(e.id),this.activeGraphic&&(this.activeGraphic=void 0))}get(e){return this._values.values[e]}getById(e){return this._values.get(e)}hasEntity(e){return!!z(e)&&this._root.contains(e)}removeAll(){this.root.removeAll(),this.removeNodeGraphic(),this._values.removeAll()}destroy(){this.removeAll(),this.contextMenu.destroy(),this._viewer.dataSources.remove(this._dataSource),this._viewer.dataSources.remove(this._nodeDataSource),this.cursorTip.destroy(),this._handler.isDestroyed()||this._handler.destroy(),gn(this)}zoomTo(e){const t=[];if(Array.isArray(e))for(let i of e)t.push(i.entity);else t.push(e.entity);z(this._viewer)&&this._viewer.zoomTo(t)}has(e){return"string"==typeof e?this._values.contains(e):this._values.values.includes(e)}startEdit(e){this.activeGraphic&&this.stopEdit(this.activeGraphic),e&&(e.startEdit(),this.preEdit.raise(e),this.createNodeGraphic(e),this.activeGraphic=e,this.addEditEventListener(),this.cursorTip.show=!0,this.cursorTip.text="单击节点选中")}stopEdit(e){e&&(e.stopEdit(),e.highlightGraphic(!1),this._nodeRoot.removeAll(),this.cursorTip.show=!1,this.activeGraphic=void 0,this._mode=sh,this.postEdit.raise(e),this.removeEditListener&&this.removeEditListener())}createNodeGraphic(e){if($u.isPoint(e.type))return;const t=new Ju({positions:e._nodePositions,...Vu.defaultStyle}),i=t._values;for(let e of i)this._nodeRoot.add(e);this._nodeGraphic=t}removeNodeGraphic(){this._nodeRoot.removeAll(),this._nodeGraphic=void 0}addEventListener(e=!0){if(!z(this.activeGraphic))return;const t=this.activeGraphic.positions,i=e=>{const i=this.pickPosition(e.endPosition);z(i)&&(t.length<1||(t.length>1&&this.activeGraphic.popNode(),this.activeGraphic.addNode(i)))},n=()=>{this._handler.removeInputAction(Zu),this._handler.removeInputAction(Ku),this._handler.removeInputAction(oh),this.stopEdit(this.activeGraphic),z(this.contextMenu)&&this.addContextEventListener()};e||(this._handler.setInputAction(i,Ku),this._handler.setInputAction(n,oh)),this._handler.setInputAction((t=>{const i=$u.isPoint(this.activeGraphic.type)?this.activeGraphic.updatePosition.bind(this.activeGraphic):this.activeGraphic.addNode.bind(this.activeGraphic),n=this.pickPosition(t.position);z(n)&&(z(i)&&i(n),e&&(this._handler.removeInputAction(Zu),this.stopEdit(this.activeGraphic),z(this.contextMenu)&&this.addContextEventListener()),z(this.contextMenu)&&this.removeContextEventListener())}),Zu)}addEditEventListener(){const e=this._editEventHandler;let t=!1;const i=i=>{t=!1,mr(this._viewer,!t),e.removeInputAction(Ku),e.removeInputAction(ih)},n=e=>{const t=this.pickPosition(e.endPosition);this.updatePosition(t)};e.setInputAction((e=>{if(z(this.contextMenu)&&(this.contextMenu.show=!1),!z(this.activeGraphic))return;const t=this._viewer.scene.pick(e.position);z(t)&&t.id instanceof Cesium.Entity?this.hasEntity(t.id)?(this.activeGraphic.highlightGraphic(),this._nodeGraphic&&(this._nodeGraphic.activeNode=void 0)):this._nodeGraphic&&this._nodeGraphic.has(t.id)?(this._nodeGraphic.activeNode=t.id.position.getValue(this._viewer.clock.currentTime),this.activeGraphic.highlightGraphic(!1)):(this._nodeGraphic.activeNode=void 0,this.activeGraphic.highlightGraphic(!1)):(this._nodeGraphic&&(this._nodeGraphic.activeNode=void 0),this.activeGraphic&&this.activeGraphic.highlightGraphic(!1))}),Zu),e.setInputAction((()=>{t=!0,mr(this._viewer,!t),e.setInputAction(i,ih),e.setInputAction(n,Ku)}),th),this.removeEditListener=function(){e.removeInputAction(Ku),e.removeInputAction(ih),e.removeInputAction(Zu),e.removeInputAction(th),this.removeEditListener=void 0}}addContextEventListener(){this._editEventHandler.setInputAction((e=>{if(this._mode!==sh)return;const t=this._viewer.scene.pick(e.position),i=sr(e.position,this._viewer,!0);z(t)&&this.hasEntity(t.id)&&(this.contextMenu.position=i,this.selectedGraphic=this.getById(t.id.id),z(this.contextMenu)&&(this.contextMenu.show=!0))}),rh)}removeContextEventListener(){this._editEventHandler.removeInputAction(rh)}removeEditEventListener(){this._editEventHandler.removeInputAction(Zu),this._editEventHandler.removeInputAction(th)}updatePosition(e){const t=this.activeGraphic;if(z(t))if($u.isPoint(t.type))t.updatePosition(e);else{if(!z(this._nodeGraphic)||!z(this._nodeGraphic.activeIndex))return;t.updateNode(this._nodeGraphic.activeIndex,e)}}pickPosition(e){if(!z(this.activeGraphic))return;const t=this.activeGraphic.clampToModel;return sr(e,this._viewer,t)}addNode(e,t,i){if(e.addNode(t,i),this._nodeGraphic){const e=this._nodeGraphic.addNode(t,i);this._nodeRoot.add(e)}}removeNode(e,t){if(e.removeNode&&e.removeNode(t),this._nodeGraphic){const e=this._nodeGraphic.removeNode(t);this._nodeRoot.remove(e)}}get show(){return this._root.show}set show(e){this._root.show=e}get pointStyle(){return this._pointStyle}set pointStyle(e){this._pointStyle=e}get labelStyle(){return this._labelStyle}set labelStyle(e){this._labelStyle=e}get billboardStyle(){return this._billboardStyle}set billboardStyle(e){this._billboardStyle=e}get modelStyle(){return this._modelStyle}set modelStyle(e){this._modelStyle=e}createContext(){return this.contextMenu=new ve(this._viewer,{items:[{id:"startEdit",text:"开始编辑",class:"fa fa-pencil-square-o",disabled:this.activeGraphic,callback:e=>{if(this.selectedGraphic){this.startEdit(this.selectedGraphic);const t=this.contextMenu.getById("stopEdit");this.contextMenu.updateItemDistabled(t,!1),this.contextMenu.updateItemDistabled(e,!0)}}},{id:"stopEdit",text:"停止编辑",class:"fa fa-floppy-o",disabled:!this.activeGraphic,callback:e=>{if(this.selectedGraphic){this.stopEdit(this.selectedGraphic);const t=this.contextMenu.getById("startEdit");this.contextMenu.updateItemDistabled(e,!0),this.contextMenu.updateItemDistabled(t,!1)}}},{id:"delete",text:"删除图形",class:"fa fa-times",callback:e=>{this.remove(this.selectedGraphic)}},{id:"select",text:"选择顶点",class:"fa fa-mouse-pointer"}]}),this.contextMenu}},e.PlotType=$u,e.PointBaseGraphic=Ac,e.PointPlot=Vu,e.PolygonPlot=Xu,e.PolylinePlot=Yu,e.Primitive=function(){Object.defineProperty(jl.prototype,"needUpdate",{get(){return!!this._needUpdate},set(e){this._needUpdate=e}}),jl.prototype.update=function(e){if(Jl.call(this,e),this.needUpdate){var t=Yl(this._createShaderProgramFunction,tc);console.log("update shader"),t(this,e,appearance),this.needUpdate=!1}}},e.Properties=fr,e.QuadTreeProvider=ga,e.RadarScanGraphic=class extends Ac{constructor(e){super(e),this._speed=B(e.speed,10),this._time=0,this.createGraphic()}get speed(){return this._speed}set speed(e){if(e!==this._speed){if(e<=0)throw new CesiumProError("速度不能小于0");this.definedChanged.raise("speed",e,this._speed),this._speed=e}}createAppearance(){return this._appearance||(this._appearance=new Jc({material:new Qc({translucent:!0,fabric:{uniforms:{color:this._color,time:0},source:Xc}})})),this._appearance}update(e){if(!this.material)return;const t=Cesium.JulianDate.toDate(e).getTime()/this.speed;this.material.uniforms.time=t-parseInt(t)}},e.Scene=Wl,e.Selection=yr,e.ShaderProgram=gl,e.ShapefileDataSource=Ns,e.TDTLayer=class extends ou{constructor(e){const t=(e=B(e,{})).key;t||(console.warn("未定义key，地图服务将不可用"),console.warn("请前往http://lbs.tianditu.gov.cn/server/MapService.html获取地图key"));const i=B(e.tilingScheme,new Cesium.WebMercatorTilingScheme);let n="w",r="w",o=e.tileMatrixLabels;i instanceof Cesium.GeographicTilingScheme&&(n="c",r="c",z(o)||(o=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"]));const s=B(e.layer,"img"),a=`http://t{s}.tianditu.com/${s}_${n}/wmts?service=wmts&tileMatrixSet=${r}&request=GetTile&version=1.0.0&LAYER=${s}&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=${t}`;return new Cesium.WebMapTileServiceImageryProvider({url:a,layer:s,style:e.style||"default",format:e.format||"tiles",tileMatrixSetID:"GoogleMapsCompatible",credit:e.credit?new Cesium.Credit(e.credit||""):null,tilingScheme:e.tilingScheme,maximumLevel:e.maximumLevel||19,minimumLevel:e.minimumLevel||0,tileMatrixLabels:o,subdomains:"01234567"})}static layers=[{layer:"vec",desc:"矢量底图"},{layer:"cva",desc:"矢量注记"},{layer:"img",desc:"影像底图"},{layer:"cia",desc:"影像注记"},{layer:"ter",desc:"地形晕渲"},{layer:"cta",desc:"地形注记"},{layer:"ibo",desc:"全球境界"},{layer:"eva",desc:"矢量英文注记"},{layer:"eia",desc:"影像英文注记"}]},e.TMSLayer=cu,e.TaskProcessor=class{constructor(e,t={}){this._workers=[],this._workerPath="workers/"+e,this._options=t,Math.max(Z.hardwareConcurrency-1,1),this._worker=ie(this)}},e.TecentLayer=class extends vr{constructor(e={}){e.layer=B(e.layer,"img"),e.subdomains="123",e.url=su[e.layer],e.customTags={sx:function(e,t,i,n){return t>>4},sy:function(e,t,i,n){return(1<<n)-i>>4}},super(e)}},e.TileDebugLayer=class{constructor(e={}){e.tileWidth=B(e.tileWidth,256),e.tileHeight=B(e.tileHeight,256),this._tilingScheme=z(e.tilingScheme)?e.tilingScheme:dr.get("EPSG:4326",{ellipsoid:e.ellipsoid}),this._errorEvent=new r,this._tileWidth=B(e.tileWidth,256),this._tileHeight=B(e.tileHeight,256),this._readyPromise=Cesium.when.resolve(!0),this._font=B(e.font,"bold 24px sans-serif"),this._color=B(e.color,new Cesium.Color(1,1,1,1)),this._borderColor=B(e.borderColor,Cesium.Color.GOLD),this._borderWidth=B(e.borderWidth,2)}get ready(){return!0}get readyPromise(){return this._readyPromise}get hasAlphaChannel(){return!0}get errorEvent(){return this._errorEvent}get rectangle(){return this._tilingScheme.rectangle}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}get tilingScheme(){return this._tilingScheme}get font(){return this._font}set font(e){this._font=e}get color(){return this._color}set color(e){this._color=e}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e}get borderWidth(){return this._borderWidth}createCanvas(){const e=document.createElement("canvas");e.width=this.tileWidth,e.height=this.tileHeight;const t=e.getContext("2d");return t.textBaseline="middle",t.textAlign="center",t.font=this.font,t.fillStyle=this.color.toCssColorString(),t.strokeStyle=this.borderColor.toCssColorString(),t.lineWidth=this.borderWidth,{canvas:e,ctx:t}}requestImage(e,t,i,n){const{canvas:r,ctx:o}=this.createCanvas(),s=function(e,t,i,n){let r=[];return r[0]="L: "+n,r[1]="X: "+t,e.reverseY?r[2]="Y: "+e.tilingScheme.getNumberOfYTilesAtLevel(n)-i-1:r[2]="Y: "+i,r}(this,e,t,i);return o.fillText(s[0],r.width/2,r.height/4*1),o.fillText(s[1],r.width/2,r.height/4*2),o.fillText(s[2],r.width/2,r.height/4*3),o.strokeRect(0,0,r.width,r.height),r}},e.TileLayer=class{constructor(e={}){this._errorEvent=new r,this._tilingScheme=dr.get("EPSG:4326"),this._readyPromise=au.defer(),this._ready=!1,this._ready=!0,this._minimumLevel=B(e.minimumLevel,0),this._maximumLevel=e.maximumLevel,this._tileWidth=B(e.tileWidth,256),this._tileHeight=B(e.tileHeight,256),this._rectangle=B(e.rectangle,lu.MAX_VALUE),this._readyPromise.resolve(!0),this._errorEvent.addEventListener(((e,t,i)=>{}))}get minimumLevel(){return this._minimumLevel}get maximumLevel(){return this._maximumLevel}get errorEvent(){return this._errorEvent}get rectangle(){return this._rectangle}get ready(){return this._ready}get readyPromise(){return this._readyPromise}get tilingScheme(){return this._tilingScheme}get enablePickFeatures(){return this._tileProvider.enablePickFeatures}set enablePickFeatures(e){this._tileProvider.enablePickFeatures=e}get tileHeight(){return this._tileHeight}get tileWidth(){return this._tileWidth}pickFeatures(e,t,i,n,r){}requestImage(e,t,i,n){return this.requestGeometry(e,t,i),Promise.reject(!1)}requestGeometry(e,t,i){}},e.Tileset=$s,e.Url=Q,e.VERSION="1.0.3",e.Viewer=vc,e.WFSLayer=class{constructor(e={}){if(this._url=e.url,this._typeName=e.typeName,this._style=e.style,!z(this._url))throw new t("parameter url must be provided.");if(!z(this._typeName))throw new t("parameter typeName must be provided.");const i=new uu({url:e.url,queryParameters:{service:"WFS",version:"1.0.0",request:"GetFeature",typeName:e.typeName,maxFeatures:50,outputFormat:"application/json"}});return po.load(i,this._style)}get rectangle(){return this._rectangle||this.tilingScheme.rectangle}get tilingScheme(){return dr.get("EPSG:4326")}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}get ready(){return this._ready}get readyPromise(){return this._readyPromise}},e.WMSLayer=hu,e.WMTSLayer=ou,e.XYZLayer=vr,e._shaderBuildUniforms=function(e,t){qd._czmBuiltinsAndUniforms[e]=t},e._shaderCircleScan=Ec,e._shaderCircleSpread=Mc,e._shaderDynamicCone=Rc,e._shaderFlowImage=zd,e._shaderGlobeFS="uniform vec4 u_initialColor;\n\n#if TEXTURE_UNITS > 0\nuniform sampler2D u_dayTextures[TEXTURE_UNITS];\nuniform vec4 u_dayTextureTranslationAndScale[TEXTURE_UNITS];\nuniform bool u_dayTextureUseWebMercatorT[TEXTURE_UNITS];\n\n#ifdef APPLY_ALPHA\nuniform float u_dayTextureAlpha[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_DAY_NIGHT_ALPHA\nuniform float u_dayTextureNightAlpha[TEXTURE_UNITS];\nuniform float u_dayTextureDayAlpha[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_SPLIT\nuniform float czm_p_imagerySplitPosition;\nuniform float czm_p_drawingBufferHeight;\nuniform float czm_p_drawingBufferWidth;\nuniform float u_dayTextureSplit[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_BRIGHTNESS\nuniform float u_dayTextureBrightness[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_CONTRAST\nuniform float u_dayTextureContrast[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_HUE\nuniform float u_dayTextureHue[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_SATURATION\nuniform float u_dayTextureSaturation[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_GAMMA\nuniform float u_dayTextureOneOverGamma[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_IMAGERY_CUTOUT\nuniform vec4 u_dayTextureCutoutRectangles[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_COLOR_TO_ALPHA\nuniform vec4 u_colorsToAlpha[TEXTURE_UNITS];\n#endif\n\nuniform vec4 u_dayTextureTexCoordsRectangle[TEXTURE_UNITS];\n#endif\n\n#ifdef SHOW_REFLECTIVE_OCEAN\nuniform sampler2D u_waterMask;\nuniform vec4 u_waterMaskTranslationAndScale;\nuniform float u_zoomedOutOceanSpecularIntensity;\n#endif\n\n#ifdef SHOW_OCEAN_WAVES\nuniform sampler2D u_oceanNormalMap;\n#endif\n\n#if defined(ENABLE_DAYNIGHT_SHADING) || defined(GROUND_ATMOSPHERE)\nuniform vec2 u_lightingFadeDistance;\n#endif\n\n#ifdef TILE_LIMIT_RECTANGLE\nuniform vec4 u_cartographicLimitRectangle;\n#endif\n\n#ifdef GROUND_ATMOSPHERE\nuniform vec2 u_nightFadeDistance;\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\nuniform highp sampler2D u_clippingPlanes;\nuniform mat4 u_clippingPlanesMatrix;\nuniform vec4 u_clippingPlanesEdgeStyle;\n#endif\n\n#if defined(FOG) && defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\nuniform float u_minimumBrightness;\n#endif\n\n#ifdef COLOR_CORRECT\nuniform vec3 u_hsbShift; // Hue, saturation, brightness\n#endif\n\n#ifdef HIGHLIGHT_FILL_TILE\nuniform vec4 u_fillHighlightColor;\n#endif\n\n#ifdef TRANSLUCENT\nuniform vec4 u_frontFaceAlphaByDistance;\nuniform vec4 u_backFaceAlphaByDistance;\nuniform vec4 u_translucencyRectangle;\n#endif\n\n#ifdef UNDERGROUND_COLOR\nuniform vec4 u_undergroundColor;\nuniform vec4 u_undergroundColorAlphaByDistance;\n#endif\n\nvarying vec3 v_positionMC;\nvarying vec3 v_positionEC;\nvarying vec3 v_textureCoordinates;\nvarying vec3 v_normalMC;\nvarying vec3 v_normalEC;\n\n#ifdef APPLY_MATERIAL\nvarying float v_height;\nvarying float v_slope;\nvarying float v_aspect;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE) || defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nvarying float v_distance;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE)\nvarying vec3 v_fogRayleighColor;\nvarying vec3 v_fogMieColor;\n#endif\n\n#ifdef GROUND_ATMOSPHERE\nvarying vec3 v_rayleighColor;\nvarying vec3 v_mieColor;\n#endif\n\n#if defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nfloat interpolateByDistance(vec4 nearFarScalar, float distance)\n{\n    float startDistance = nearFarScalar.x;\n    float startValue = nearFarScalar.y;\n    float endDistance = nearFarScalar.z;\n    float endValue = nearFarScalar.w;\n    float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0);\n    return mix(startValue, endValue, t);\n}\n#endif\n\n#if defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT) || defined(APPLY_MATERIAL)\nvec4 alphaBlend(vec4 sourceColor, vec4 destinationColor)\n{\n    return sourceColor * vec4(sourceColor.aaa, 1.0) + destinationColor * (1.0 - sourceColor.a);\n}\n#endif\n\n#ifdef TRANSLUCENT\nbool inTranslucencyRectangle()\n{\n    return\n        v_textureCoordinates.x > u_translucencyRectangle.x &&\n        v_textureCoordinates.x < u_translucencyRectangle.z &&\n        v_textureCoordinates.y > u_translucencyRectangle.y &&\n        v_textureCoordinates.y < u_translucencyRectangle.w;\n}\n#endif\n\nvec4 sampleAndBlend(\n    vec4 previousColor,\n    sampler2D textureToSample,\n    vec2 tileTextureCoordinates,\n    vec4 textureCoordinateRectangle,\n    vec4 textureCoordinateTranslationAndScale,\n    float textureAlpha,\n    float textureNightAlpha,\n    float textureDayAlpha,\n    float textureBrightness,\n    float textureContrast,\n    float textureHue,\n    float textureSaturation,\n    float textureOneOverGamma,\n    float split,\n    vec4 colorToAlpha,\n    float nightBlend)\n{\n    // This crazy step stuff sets the alpha to 0.0 if this following condition is true:\n    //    tileTextureCoordinates.s < textureCoordinateRectangle.s ||\n    //    tileTextureCoordinates.s > textureCoordinateRectangle.p ||\n    //    tileTextureCoordinates.t < textureCoordinateRectangle.t ||\n    //    tileTextureCoordinates.t > textureCoordinateRectangle.q\n    // In other words, the alpha is zero if the fragment is outside the rectangle\n    // covered by this texture.  Would an actual 'if' yield better performance?\n    vec2 alphaMultiplier = step(textureCoordinateRectangle.st, tileTextureCoordinates);\n    textureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;\n\n    alphaMultiplier = step(vec2(0.0), textureCoordinateRectangle.pq - tileTextureCoordinates);\n    textureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;\n\n#if defined(APPLY_DAY_NIGHT_ALPHA) && defined(ENABLE_DAYNIGHT_SHADING)\n    textureAlpha *= mix(textureDayAlpha, textureNightAlpha, nightBlend);\n#endif\n\n    vec2 translation = textureCoordinateTranslationAndScale.xy;\n    vec2 scale = textureCoordinateTranslationAndScale.zw;\n    vec2 textureCoordinates = tileTextureCoordinates * scale + translation;\n    vec4 value = texture2D(textureToSample, textureCoordinates);\n    vec3 color = value.rgb;\n    float alpha = value.a;\n\n#ifdef APPLY_COLOR_TO_ALPHA\n    vec3 colorDiff = abs(color.rgb - colorToAlpha.rgb);\n    colorDiff.r = max(max(colorDiff.r, colorDiff.g), colorDiff.b);\n    alpha = czm_branchFreeTernary(colorDiff.r < colorToAlpha.a, 0.0, alpha);\n#endif\n\n#if !defined(APPLY_GAMMA)\n    vec4 tempColor = czm_gammaCorrect(vec4(color, alpha));\n    color = tempColor.rgb;\n    alpha = tempColor.a;\n#else\n    color = pow(color, vec3(textureOneOverGamma));\n#endif\n\n#ifdef APPLY_SPLIT\n    float splitPosition = czm_p_imagerySplitPosition * czm_p_drawingBufferWidth;\n    // 垂直分割 \n    if(split < -2.0 || split > 2.0) {\n        splitPosition = (1.0 - czm_p_imagerySplitPosition) * czm_p_drawingBufferHeight;\n    }\n    if(split < -2.0 && gl_FragCoord.y < splitPosition) {\n        alpha = 0.0;\n    }\n    else if (split > 2.0 && gl_FragCoord.y > splitPosition) {\n        alpha = 0.0;\n    }\n    // Split to the left\n    else if (split > -2.0 && split < 0.0 && gl_FragCoord.x > splitPosition) {\n       alpha = 0.0;\n    }\n    // Split to the right\n    else if (split < 2.0 && split > 0.0 && gl_FragCoord.x < splitPosition) {\n       alpha = 0.0;\n    }\n#endif\n\n#ifdef APPLY_BRIGHTNESS\n    color = mix(vec3(0.0), color, textureBrightness);\n#endif\n\n#ifdef APPLY_CONTRAST\n    color = mix(vec3(0.5), color, textureContrast);\n#endif\n\n#ifdef APPLY_HUE\n    color = czm_hue(color, textureHue);\n#endif\n\n#ifdef APPLY_SATURATION\n    color = czm_saturation(color, textureSaturation);\n#endif\n\n    float sourceAlpha = alpha * textureAlpha;\n    float outAlpha = mix(previousColor.a, 1.0, sourceAlpha);\n    outAlpha += sign(outAlpha) - 1.0;\n\n    vec3 outColor = mix(previousColor.rgb * previousColor.a, color, sourceAlpha) / outAlpha;\n\n    // When rendering imagery for a tile in multiple passes,\n    // some GPU/WebGL implementation combinations will not blend fragments in\n    // additional passes correctly if their computation includes an unmasked\n    // divide-by-zero operation,\n    // even if it's not in the output or if the output has alpha zero.\n    //\n    // For example, without sanitization for outAlpha,\n    // this renders without artifacts:\n    //   if (outAlpha == 0.0) { outColor = vec3(0.0); }\n    //\n    // but using czm_branchFreeTernary will cause portions of the tile that are\n    // alpha-zero in the additional pass to render as black instead of blending\n    // with the previous pass:\n    //   outColor = czm_branchFreeTernary(outAlpha == 0.0, vec3(0.0), outColor);\n    //\n    // So instead, sanitize against divide-by-zero,\n    // store this state on the sign of outAlpha, and correct on return.\n\n    return vec4(outColor, max(outAlpha, 0.0));\n}\n\nvec3 colorCorrect(vec3 rgb) {\n#ifdef COLOR_CORRECT\n    // Convert rgb color to hsb\n    vec3 hsb = czm_RGBToHSB(rgb);\n    // Perform hsb shift\n    hsb.x += u_hsbShift.x; // hue\n    hsb.y = clamp(hsb.y + u_hsbShift.y, 0.0, 1.0); // saturation\n    hsb.z = hsb.z > czm_epsilon7 ? hsb.z + u_hsbShift.z : 0.0; // brightness\n    // Convert shifted hsb back to rgb\n    rgb = czm_HSBToRGB(hsb);\n#endif\n    return rgb;\n}\n\nvec4 computeDayColor(vec4 initialColor, vec3 textureCoordinates, float nightBlend);\nvec4 computeWaterColor(vec3 positionEyeCoordinates, vec2 textureCoordinates, mat3 enuToEye, vec4 imageryColor, float specularMapValue, float fade);\n\n#ifdef GROUND_ATMOSPHERE\nvec3 computeGroundAtmosphereColor(vec3 fogColor, vec4 finalColor, vec3 atmosphereLightDirection, float cameraDist);\n#endif\n\nconst float fExposure = 2.0;\n\nvoid main()\n{\n#ifdef TILE_LIMIT_RECTANGLE\n    if (v_textureCoordinates.x < u_cartographicLimitRectangle.x || u_cartographicLimitRectangle.z < v_textureCoordinates.x ||\n        v_textureCoordinates.y < u_cartographicLimitRectangle.y || u_cartographicLimitRectangle.w < v_textureCoordinates.y)\n        {\n            discard;\n        }\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\n    float clipDistance = clip(gl_FragCoord, u_clippingPlanes, u_clippingPlanesMatrix);\n#endif\n\n#if defined(SHOW_REFLECTIVE_OCEAN) || defined(ENABLE_DAYNIGHT_SHADING) || defined(HDR)\n    vec3 normalMC = czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0));   // normalized surface normal in model coordinates\n    vec3 normalEC = czm_normal3D * normalMC;                                         // normalized surface normal in eye coordiantes\n#endif\n\n#if defined(APPLY_DAY_NIGHT_ALPHA) && defined(ENABLE_DAYNIGHT_SHADING)\n    float nightBlend = 1.0 - clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * 5.0, 0.0, 1.0);\n#else\n    float nightBlend = 0.0;\n#endif\n\n    // The clamp below works around an apparent bug in Chrome Canary v23.0.1241.0\n    // where the fragment shader sees textures coordinates < 0.0 and > 1.0 for the\n    // fragments on the edges of tiles even though the vertex shader is outputting\n    // coordinates strictly in the 0-1 range.\n    vec4 color = computeDayColor(u_initialColor, clamp(v_textureCoordinates, 0.0, 1.0), nightBlend);\n\n#ifdef SHOW_TILE_BOUNDARIES\n    if (v_textureCoordinates.x < (1.0/256.0) || v_textureCoordinates.x > (255.0/256.0) ||\n        v_textureCoordinates.y < (1.0/256.0) || v_textureCoordinates.y > (255.0/256.0))\n    {\n        color = vec4(1.0, 0.0, 0.0, 1.0);\n    }\n#endif\n\n#if defined(ENABLE_DAYNIGHT_SHADING) || defined(GROUND_ATMOSPHERE)\n    float cameraDist;\n    if (czm_sceneMode == czm_sceneMode2D)\n    {\n        cameraDist = max(czm_frustumPlanes.x - czm_frustumPlanes.y, czm_frustumPlanes.w - czm_frustumPlanes.z) * 0.5;\n    }\n    else if (czm_sceneMode == czm_sceneModeColumbusView)\n    {\n        cameraDist = -czm_view[3].z;\n    }\n    else\n    {\n        cameraDist = length(czm_view[3]);\n    }\n    float fadeOutDist = u_lightingFadeDistance.x;\n    float fadeInDist = u_lightingFadeDistance.y;\n    if (czm_sceneMode != czm_sceneMode3D) {\n        vec3 radii = czm_ellipsoidRadii;\n        float maxRadii = max(radii.x, max(radii.y, radii.z));\n        fadeOutDist -= maxRadii;\n        fadeInDist -= maxRadii;\n    }\n    float fade = clamp((cameraDist - fadeOutDist) / (fadeInDist - fadeOutDist), 0.0, 1.0);\n#else\n    float fade = 0.0;\n#endif\n\n#ifdef SHOW_REFLECTIVE_OCEAN\n    vec2 waterMaskTranslation = u_waterMaskTranslationAndScale.xy;\n    vec2 waterMaskScale = u_waterMaskTranslationAndScale.zw;\n    vec2 waterMaskTextureCoordinates = v_textureCoordinates.xy * waterMaskScale + waterMaskTranslation;\n    waterMaskTextureCoordinates.y = 1.0 - waterMaskTextureCoordinates.y;\n\n    float mask = texture2D(u_waterMask, waterMaskTextureCoordinates).r;\n\n    if (mask > 0.0)\n    {\n        mat3 enuToEye = czm_eastNorthUpToEyeCoordinates(v_positionMC, normalEC);\n\n        vec2 ellipsoidTextureCoordinates = czm_ellipsoidWgs84TextureCoordinates(normalMC);\n        vec2 ellipsoidFlippedTextureCoordinates = czm_ellipsoidWgs84TextureCoordinates(normalMC.zyx);\n\n        vec2 textureCoordinates = mix(ellipsoidTextureCoordinates, ellipsoidFlippedTextureCoordinates, czm_morphTime * smoothstep(0.9, 0.95, normalMC.z));\n\n        color = computeWaterColor(v_positionEC, textureCoordinates, enuToEye, color, mask, fade);\n    }\n#endif\n\n#ifdef APPLY_MATERIAL\n    czm_materialInput materialInput;\n    materialInput.st = v_textureCoordinates.st;\n    materialInput.normalEC = normalize(v_normalEC);\n    materialInput.positionToEyeEC = -v_positionEC;\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, normalize(v_normalEC));     \n    materialInput.slope = v_slope;\n    materialInput.height = v_height;\n    materialInput.aspect = v_aspect;\n    czm_material material = czm_getMaterial(materialInput);\n    vec4 materialColor = vec4(material.diffuse, material.alpha);\n    color = alphaBlend(materialColor, color);\n#endif\n\n#ifdef ENABLE_VERTEX_LIGHTING\n    float diffuseIntensity = clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalize(v_normalEC)) * 0.9 + 0.3, 0.0, 1.0);\n    vec4 finalColor = vec4(color.rgb * czm_lightColor * diffuseIntensity, color.a);\n#elif defined(ENABLE_DAYNIGHT_SHADING)\n    float diffuseIntensity = clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * 5.0 + 0.3, 0.0, 1.0);\n    diffuseIntensity = mix(1.0, diffuseIntensity, fade);\n    vec4 finalColor = vec4(color.rgb * czm_lightColor * diffuseIntensity, color.a);\n#else\n    vec4 finalColor = color;\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\n    vec4 clippingPlanesEdgeColor = vec4(1.0);\n    clippingPlanesEdgeColor.rgb = u_clippingPlanesEdgeStyle.rgb;\n    float clippingPlanesEdgeWidth = u_clippingPlanesEdgeStyle.a;\n\n    if (clipDistance < clippingPlanesEdgeWidth)\n    {\n        finalColor = clippingPlanesEdgeColor;\n    }\n#endif\n\n#ifdef HIGHLIGHT_FILL_TILE\n    finalColor = vec4(mix(finalColor.rgb, u_fillHighlightColor.rgb, u_fillHighlightColor.a), finalColor.a);\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE)\n    vec3 fogColor = colorCorrect(v_fogMieColor) + finalColor.rgb * colorCorrect(v_fogRayleighColor);\n#ifndef HDR\n    fogColor = vec3(1.0) - exp(-fExposure * fogColor);\n#endif\n#endif\n\n#if defined(DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN)\n    vec3 atmosphereLightDirection = czm_sunDirectionWC;\n#else\n    vec3 atmosphereLightDirection = czm_lightDirectionWC;\n#endif\n\n#ifdef FOG\n#if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\n    float darken = clamp(dot(normalize(czm_viewerPositionWC), atmosphereLightDirection), u_minimumBrightness, 1.0);\n    fogColor *= darken;\n#endif\n\n#ifdef HDR\n    const float modifier = 0.15;\n    finalColor = vec4(czm_fog(v_distance, finalColor.rgb, fogColor, modifier), finalColor.a);\n#else\n    finalColor = vec4(czm_fog(v_distance, finalColor.rgb, fogColor), finalColor.a);\n#endif\n#endif\n\n#ifdef GROUND_ATMOSPHERE\n    if (!czm_backFacing())\n    {\n        vec3 groundAtmosphereColor = computeGroundAtmosphereColor(fogColor, finalColor, atmosphereLightDirection, cameraDist);\n        finalColor = vec4(mix(finalColor.rgb, groundAtmosphereColor, fade), finalColor.a);\n    }\n#endif\n\n#ifdef UNDERGROUND_COLOR\n    if (czm_backFacing())\n    {\n        float distanceFromEllipsoid = max(czm_eyeHeight, 0.0);\n        float distance = max(v_distance - distanceFromEllipsoid, 0.0);\n        float blendAmount = interpolateByDistance(u_undergroundColorAlphaByDistance, distance);\n        vec4 undergroundColor = vec4(u_undergroundColor.rgb, u_undergroundColor.a * blendAmount);\n        finalColor = alphaBlend(undergroundColor, finalColor);\n    }\n#endif\n\n#ifdef TRANSLUCENT\n    if (inTranslucencyRectangle())\n    {\n      vec4 alphaByDistance = gl_FrontFacing ? u_frontFaceAlphaByDistance : u_backFaceAlphaByDistance;\n      finalColor.a *= interpolateByDistance(alphaByDistance, v_distance);\n    }\n#endif\n\n    gl_FragColor = finalColor;\n}\n\n#ifdef GROUND_ATMOSPHERE\nvec3 computeGroundAtmosphereColor(vec3 fogColor, vec4 finalColor, vec3 atmosphereLightDirection, float cameraDist)\n{\n#if defined(PER_FRAGMENT_GROUND_ATMOSPHERE) && defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_DAYNIGHT_SHADING) || defined(ENABLE_VERTEX_LIGHTING))\n    float mpp = czm_metersPerPixel(vec4(0.0, 0.0, -czm_currentFrustum.x, 1.0), 1.0);\n    vec2 xy = gl_FragCoord.xy / czm_viewport.zw * 2.0 - vec2(1.0);\n    xy *= czm_viewport.zw * mpp * 0.5;\n\n    vec3 direction = normalize(vec3(xy, -czm_currentFrustum.x));\n    czm_ray ray = czm_ray(vec3(0.0), direction);\n\n    vec3 ellipsoid_center = czm_view[3].xyz;\n\n    czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid_center, czm_ellipsoidInverseRadii);\n\n    vec3 ellipsoidPosition = czm_pointAlongRay(ray, intersection.start);\n    ellipsoidPosition = (czm_inverseView * vec4(ellipsoidPosition, 1.0)).xyz;\n    AtmosphereColor atmosColor = computeGroundAtmosphereFromSpace(ellipsoidPosition, true, atmosphereLightDirection);\n\n    vec3 groundAtmosphereColor = colorCorrect(atmosColor.mie) + finalColor.rgb * colorCorrect(atmosColor.rayleigh);\n#ifndef HDR\n    groundAtmosphereColor = vec3(1.0) - exp(-fExposure * groundAtmosphereColor);\n#endif\n\n    float fadeInDist = u_nightFadeDistance.x;\n    float fadeOutDist = u_nightFadeDistance.y;\n\n    float sunlitAtmosphereIntensity = clamp((cameraDist - fadeOutDist) / (fadeInDist - fadeOutDist), 0.0, 1.0);\n\n#ifdef HDR\n    // Some tweaking to make HDR look better\n    sunlitAtmosphereIntensity = max(sunlitAtmosphereIntensity * sunlitAtmosphereIntensity, 0.03);\n#endif\n\n    groundAtmosphereColor = mix(groundAtmosphereColor, fogColor, sunlitAtmosphereIntensity);\n#else\n    vec3 groundAtmosphereColor = fogColor;\n#endif\n\n#ifdef HDR\n    // Some tweaking to make HDR look better\n    groundAtmosphereColor = czm_saturation(groundAtmosphereColor, 1.6);\n#endif\n\n    return groundAtmosphereColor;\n}\n#endif\n\n#ifdef SHOW_REFLECTIVE_OCEAN\n\nfloat waveFade(float edge0, float edge1, float x)\n{\n    float y = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return pow(1.0 - y, 5.0);\n}\n\nfloat linearFade(float edge0, float edge1, float x)\n{\n    return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n}\n\n// Based on water rendering by Jonas Wagner:\n// http://29a.ch/2012/7/19/webgl-terrain-rendering-water-fog\n\n// low altitude wave settings\nconst float oceanFrequencyLowAltitude = 825000.0;\nconst float oceanAnimationSpeedLowAltitude = 0.004;\nconst float oceanOneOverAmplitudeLowAltitude = 1.0 / 2.0;\nconst float oceanSpecularIntensity = 0.5;\n\n// high altitude wave settings\nconst float oceanFrequencyHighAltitude = 125000.0;\nconst float oceanAnimationSpeedHighAltitude = 0.008;\nconst float oceanOneOverAmplitudeHighAltitude = 1.0 / 2.0;\n\nvec4 computeWaterColor(vec3 positionEyeCoordinates, vec2 textureCoordinates, mat3 enuToEye, vec4 imageryColor, float maskValue, float fade)\n{\n    vec3 positionToEyeEC = -positionEyeCoordinates;\n    float positionToEyeECLength = length(positionToEyeEC);\n\n    // The double normalize below works around a bug in Firefox on Android devices.\n    vec3 normalizedPositionToEyeEC = normalize(normalize(positionToEyeEC));\n\n    // Fade out the waves as the camera moves far from the surface.\n    float waveIntensity = waveFade(70000.0, 1000000.0, positionToEyeECLength);\n\n#ifdef SHOW_OCEAN_WAVES\n    // high altitude waves\n    float time = czm_frameNumber * oceanAnimationSpeedHighAltitude;\n    vec4 noise = czm_getWaterNoise(u_oceanNormalMap, textureCoordinates * oceanFrequencyHighAltitude, time, 0.0);\n    vec3 normalTangentSpaceHighAltitude = vec3(noise.xy, noise.z * oceanOneOverAmplitudeHighAltitude);\n\n    // low altitude waves\n    time = czm_frameNumber * oceanAnimationSpeedLowAltitude;\n    noise = czm_getWaterNoise(u_oceanNormalMap, textureCoordinates * oceanFrequencyLowAltitude, time, 0.0);\n    vec3 normalTangentSpaceLowAltitude = vec3(noise.xy, noise.z * oceanOneOverAmplitudeLowAltitude);\n\n    // blend the 2 wave layers based on distance to surface\n    float highAltitudeFade = linearFade(0.0, 60000.0, positionToEyeECLength);\n    float lowAltitudeFade = 1.0 - linearFade(20000.0, 60000.0, positionToEyeECLength);\n    vec3 normalTangentSpace =\n        (highAltitudeFade * normalTangentSpaceHighAltitude) +\n        (lowAltitudeFade * normalTangentSpaceLowAltitude);\n    normalTangentSpace = normalize(normalTangentSpace);\n\n    // fade out the normal perturbation as we move farther from the water surface\n    normalTangentSpace.xy *= waveIntensity;\n    normalTangentSpace = normalize(normalTangentSpace);\n#else\n    vec3 normalTangentSpace = vec3(0.0, 0.0, 1.0);\n#endif\n\n    vec3 normalEC = enuToEye * normalTangentSpace;\n\n    const vec3 waveHighlightColor = vec3(0.3, 0.45, 0.6);\n\n    // Use diffuse light to highlight the waves\n    float diffuseIntensity = czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * maskValue;\n    vec3 diffuseHighlight = waveHighlightColor * diffuseIntensity * (1.0 - fade);\n\n#ifdef SHOW_OCEAN_WAVES\n    // Where diffuse light is low or non-existent, use wave highlights based solely on\n    // the wave bumpiness and no particular light direction.\n    float tsPerturbationRatio = normalTangentSpace.z;\n    vec3 nonDiffuseHighlight = mix(waveHighlightColor * 5.0 * (1.0 - tsPerturbationRatio), vec3(0.0), diffuseIntensity);\n#else\n    vec3 nonDiffuseHighlight = vec3(0.0);\n#endif\n\n    // Add specular highlights in 3D, and in all modes when zoomed in.\n    float specularIntensity = czm_getSpecular(czm_lightDirectionEC, normalizedPositionToEyeEC, normalEC, 10.0);\n    float surfaceReflectance = mix(0.0, mix(u_zoomedOutOceanSpecularIntensity, oceanSpecularIntensity, waveIntensity), maskValue);\n    float specular = specularIntensity * surfaceReflectance;\n\n#ifdef HDR\n    specular *= 1.4;\n\n    float e = 0.2;\n    float d = 3.3;\n    float c = 1.7;\n\n    vec3 color = imageryColor.rgb + (c * (vec3(e) + imageryColor.rgb * d) * (diffuseHighlight + nonDiffuseHighlight + specular));\n#else\n    vec3 color = imageryColor.rgb + diffuseHighlight + nonDiffuseHighlight + specular;\n#endif\n\n    return vec4(color, imageryColor.a);\n}\n\n#endif // #ifdef SHOW_REFLECTIVE_OCEAN\n",e._shaderGroundSkyBoxFS=Cn,e._shaderGroundSkyBoxVS=wn,e._shaderLine=function(){},e._shaderRadarScan=Xc,e.abstract=i,e.checkViewer=G,e.clone=H,e.computeDistancePerPixel=fe,e.computeSceneCenterPoint=ge,e.computeSceneExtent=ye,e.createDefaultLayer=_r,e.createGuid=_e,e.dateFormat=fn,e.defaultValue=B,e.defined=z,e.destroyObject=gn,e.guid=Ce,e.index=ic,e.pickPosition=sr,e.proj=dr,e.rotateEnabled=mr,Object.defineProperty(e,"__esModule",{value:!0})}));
