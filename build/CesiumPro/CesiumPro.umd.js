!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).CesiumPro={})}(this,function(e){"use strict";function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function d(e,t,n){return(d=h()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&s(r,n.prototype),r}).apply(null,arguments)}function t(e){var i="function"==typeof Map?new Map:void 0;return(t=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(e))return i.get(e);i.set(e,n)}function n(){return d(e,arguments,a(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?p(e):t}function v(n){var i=h();return function(){var e,t=a(n);return f(this,i?(e=a(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function C(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=w(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,o=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}function x(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}var n=function(){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c(this,o),this._color=e.color||Cesium.Color.RED,this._width=e.width||3,this._headWidth=e.headWidth||2*this._width,this._length=e.length||300,this._headLength=e.headLength||10,this._inverse=e.inverse||!1,this.position=e.position;var t=e.id||x(),n=Cesium.CylinderGeometry.createGeometry(new Cesium.CylinderGeometry({length:this._length,topRadius:this._width,bottomRadius:this._width})),i=Cesium.CylinderGeometry.createGeometry(new Cesium.CylinderGeometry({length:this._headLength,topRadius:0,bottomRadius:this._headWidth})),r=(this._length+this._headLength)/2;return this._inverse&&(r=-r),o.translate(i,[0,0,r]),new Cesium.Primitive({modelMatrix:Cesium.Transforms.eastNorthUpToFixedFrame(this.position),geometryInstances:[new Cesium.GeometryInstance({id:"".concat(t,"-line"),geometry:n}),new Cesium.GeometryInstance({id:"".concat(t,"-arrow"),geometry:i})],appearance:new Cesium.MaterialAppearance({material:Cesium.Material.fromType("Color",{color:this._color})})})}return u(o,null,[{key:"translate",value:function(e,t){var n,i=new Cesium.Cartesian3;Cesium.isArray(t)?(n=m(t,3),i.x=n[0],i.y=n[1],i.z=n[2]):Cesium.Cartesian3.clone(t,i);for(var r=0;r<e.attributes.position.values.length;r+=3)e.attributes.position.values[r]+=i.x,e.attributes.position.values[r+1]+=i.y,e.attributes.position.values[r+2]+=i.z}}]),o}(),k=Math.PI/180,_=180/Math.PI,E=function(){function s(){c(this,s)}return u(s,null,[{key:"surfaceDistance",value:function(e){for(var t=0,n=0;n<e.length-1;n+=1){var i=Cesium.Cartographic.fromCartesian(e[n]),r=Cesium.Cartographic.fromCartesian(e[n+1]),o=new Cesium.EllipsoidGeodesic;o.setEndPoints(i,r),t+=o.surfaceDistance}return t}},{key:"spaceDistance",value:function(e){for(var t=0,n=1;n<e.length;n++){var i=e[n-1],r=e[n];t+=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2)+Math.pow(i.z-r.z,2))}return t}},{key:"Angle",value:function(e,t,n){var i=s.Bearing(t,e)-s.Bearing(t,n);return i<0&&(i+=360),i}},{key:"Bearing",value:function(e,t){var n=e.lat*k,i=e.lon*k,r=t.lat*k,o=t.lon*k,a=-Math.atan2(Math.sin(i-o)*Math.cos(r),Math.cos(n)*Math.sin(r)-Math.sin(n)*Math.cos(r)*Math.cos(i-o));return a<0&&(a+=2*Math.PI),a*=_}},{key:"surfaceArea",value:function(e){for(var t=e.map(function(e){var t=Cesium.Cartographic.fromCartesian(e);return{lon:Cesium.Math.toDegrees(t.longitude),lat:Cesium.Math.toDegrees(t.latitude),height:t.height}}),n=0,i=0;i<t.length-2;i+=1){var r=(i+1)%t.length,o=(i+2)%t.length,a=s.Angle(t[i],t[r],t[o]);n+=s.surfaceDistance([e[i],e[r]])*s.surfaceDistance([e[r],e[o]])*Math.abs(Math.sin(a))}return n}}]),s}(),T=function(){l(i,t(Error));var n=v(i);function i(e){var t;return c(this,i),(t=n.call(this,e)).name="CesiumProError",t}return i}();function S(e){if(!(e&&e instanceof Cesium.Viewer)){var t=M(e);throw new T("Expected viewer to be typeof Viewer, actual typeof was ".concat(t))}}function A(e){return e.reduce(function(e,t){return 2*e+t},0)}function P(e){for(var t=[],n=7;0<=n;n--)t.push(!!(e&1<<n));return t}function ne(e){this.data=e,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return e instanceof Uint8Array?e[this.pos++]:255&e.charCodeAt(this.pos++)},this.readBytes=function(e){for(var t=[],n=0;n<e;n++)t.push(this.readByte());return t},this.read=function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.readByte());return t},this.readUnsigned=function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}}function ie(i,r){function o(e){for(var t=[],n=0;n<e;n++)t.push(i.readBytes(3));return t}function a(){for(var e,t="";e=i.readByte(),t+=i.read(e),0!==e;);return t}function t(e){var t,n;switch(e.label=i.readByte(),e.label){case 249:e.extType="gce",function(e){i.readByte();var t=P(i.readByte());e.reserved=t.splice(0,3),e.disposalMethod=A(t.splice(0,3)),e.userInput=t.shift(),e.transparencyGiven=t.shift(),e.delayTime=i.readUnsigned(),e.transparencyIndex=i.readByte(),e.terminator=i.readByte(),r.gce&&r.gce(e)}(e);break;case 254:e.extType="com",(n=e).comment=a(),r.com&&r.com(n);break;case 1:e.extType="pte",function(e){i.readByte();e.ptHeader=i.readBytes(12),e.ptData=a(),r.pte&&r.pte(e)}(e);break;case 255:e.extType="app",function(e){var t;i.readByte();switch(e.identifier=i.read(8),e.authCode=i.read(3),e.identifier){case"NETSCAPE":!function(e){i.readByte();e.unknown=i.readByte(),e.iterations=i.readUnsigned(),e.terminator=i.readByte(),r.app&&r.app.NETSCAPE&&r.app.NETSCAPE(e)}(e);break;default:(t=e).appData=a(),r.app&&r.app[t.identifier]&&r.app[t.identifier](t)}}(e);break;default:e.extType="unknown",(t=e).data=a(),r.unknown&&r.unknown(t)}}function n(e){e.leftPos=i.readUnsigned(),e.topPos=i.readUnsigned(),e.width=i.readUnsigned(),e.height=i.readUnsigned();var t=P(i.readByte());e.lctFlag=t.shift(),e.interlaced=t.shift(),e.sorted=t.shift(),e.reserved=t.splice(0,2),e.lctSize=A(t.splice(0,3)),e.lctFlag&&(e.lct=o(1<<e.lctSize+1)),e.lzwMinCodeSize=i.readByte();var n=a();e.pixels=function(t,i){for(var e,n,r=0,o=function(e){for(var t=0,n=0;n<e;n++)i.charCodeAt(r>>3)&1<<(7&r)&&(t|=1<<n),r++;return t},a=[],s=1<<t,c=1+s,u=t+1,l=[],h=function(){l=[],u=t+1;for(var e=0;e<s;e++)l[e]=[e];l[s]=[],l[c]=null};;)if(n=e,(e=o(u))!==s){if(e===c)break;if(e<l.length)n!==s&&l.push(l[n].concat(l[e][0]));else{if(e!==l.length)throw new Error("Invalid LZW code.");l.push(l[n].concat(l[n][0]))}a.push.apply(a,l[e]),l.length===1<<u&&u<12&&u++}else h();return a}(e.lzwMinCodeSize,n),e.interlaced&&(e.pixels=function(e,t){for(var n,i,r,o=new Array(e.length),a=e.length/t,s=[0,4,2,1],c=[8,8,4,2],u=0,l=0;l<4;l++)for(var h=s[l];h<a;h+=c[l])n=h,i=u,r=e.slice(i*t,(i+1)*t),o.splice.apply(o,[n*t,t].concat(r)),u++;return o}(e.pixels,e.width)),r.img&&r.img(e)}function s(){var e={};switch(e.sentinel=i.readByte(),String.fromCharCode(e.sentinel)){case"!":e.type="ext",t(e);break;case",":e.type="img",n(e);break;case";":e.type="eof",r.eof&&r.eof(e);break;default:throw new Error("Unknown block: 0x"+e.sentinel.toString(16))}"eof"!==e.type&&setTimeout(s,0)}r=r||{},function(){var e={};if(e.sig=i.read(3),e.ver=i.read(3),"GIF"!==e.sig)throw new Error("Not a GIF file.");e.width=i.readUnsigned(),e.height=i.readUnsigned();var t=P(i.readByte());e.gctFlag=t.shift(),e.colorRes=A(t.splice(0,3)),e.sorted=t.shift(),e.gctSize=A(t.splice(0,3)),e.bgColor=i.readByte(),e.pixelAspectRatio=i.readByte(),e.gctFlag&&(e.gct=o(1<<e.gctSize+1)),r.hdr&&r.hdr(e)}(),setTimeout(s,0)}function D(e){var i,r,s={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var t in e)s[t]=e[t];s.vp_w&&s.vp_h&&(s.is_vp=!0);var n=null,o=!1,a=null,c=null,u=null,l=null,h=null,d=null,p=null,f=!0,v=!1,g=[],m=[],y=s.gif;function w(){h=u,d=u=c=a=null}function b(){try{ie(i,$)}catch(e){j("parse")}}function C(e,t){X.width=e*K(),X.height=t*K(),J.style.minWidth=e*K()+"px",Q.width=e,Q.height=t,Q.style.width=e+"px",Q.style.height=t+"px",Q.getContext("2d").setTransform(1,0,0,1,0,0)}function x(e,t,n){var i,r,o,a;n&&O&&(i=L,s.is_vp?a=v?(o=(s.vp_t+s.vp_h-i)/K(),i/=K(),r=s.vp_l/K()+e/t*(s.vp_w/K()),X.width/K()):(o=s.vp_t+s.vp_h-i,i=i,r=s.vp_l+e/t*s.vp_w,X.width):(o=(X.height-i)/(v?K():1),r=e/t*X.width/(v?K():1),a=X.width/(v?K():1),i/=v?K():1),Z.fillStyle=R,Z.fillRect(r,o,a-r,i),Z.fillStyle=I,Z.fillRect(0,o,r,i))}void 0===s.auto_play&&(s.auto_play=!y.getAttribute("rel:auto_play")||"1"==y.getAttribute("rel:auto_play"));var k,_,E,T,S,M,A=s.hasOwnProperty("on_end")?s.on_end:null,P=s.hasOwnProperty("loop_delay")?s.loop_delay:0,D=s.hasOwnProperty("loop_mode")?s.loop_mode:"auto",N=!s.hasOwnProperty("draw_while_loading")||s.draw_while_loading,O=!!N&&(!s.hasOwnProperty("show_progress_bar")||s.show_progress_bar),L=s.hasOwnProperty("progressbar_height")?s.progressbar_height:25,R=s.hasOwnProperty("progressbar_background_color")?s.progressbar_background_color:"rgba(255,255,255,0.4)",I=s.hasOwnProperty("progressbar_foreground_color")?s.progressbar_foreground_color:"rgba(255,0,22,.8)",j=function(e){n=e,r={width:y.width,height:y.height},g=[],Z.fillStyle="black",Z.fillRect(0,0,s.c_w?s.c_w:r.width,s.c_h?s.c_h:r.height),Z.strokeStyle="red",Z.lineWidth=3,Z.moveTo(0,0),Z.lineTo(s.c_w?s.c_w:r.width,s.c_h?s.c_h:r.height),Z.moveTo(0,s.c_h?s.c_h:r.height),Z.lineTo(s.c_w?s.c_w:r.width,0),Z.stroke()},H=function(){d&&(g.push({data:d.getImageData(0,0,r.width,r.height),delay:c}),m.push({x:0,y:0}))},B=(k=!(E=-1),{init:function(){n||(s.c_w&&s.c_h||Z.scale(K(),K()),s.auto_play?S():(E=0,M()))},step:S=function(){k||setTimeout(_,0)},play:function(){f=!0,S()},pause:function(){f=!1},playing:f,move_relative:G,current_frame:function(){return E},length:function(){return g.length},move_to:function(e){E=e,M()}});function G(e){E+=e,M()}function U(){null!==A&&A(y),T++,!1!==D||T<0?_():f=k=!1}function F(e){x(i.pos,i.data.length,e)}function q(){}function W(t,n){return function(e){t(e),F(n)}}function V(){var e=y.parentNode,t=document.createElement("div");X=document.createElement("canvas"),Z=X.getContext("2d"),J=document.createElement("div"),Q=document.createElement("canvas"),t.width=X.width=y.width,t.height=X.height=y.height,J.style.minWidth=y.width+"px",t.className="jsgif",J.className="jsgif_toolbar",t.appendChild(X),t.appendChild(J),e.insertBefore(t,y),e.removeChild(y),s.c_w&&s.c_h&&C(s.c_w,s.c_h),ee=!0}function z(e){return!o&&(te=e||!1,o=!0,g=[],w(),!(p=d=h=l=null))}function Y(){return g.reduce(function(e,t){return e+t.delay},0)}var X,Z,J,Q,$={hdr:W(function(e){C((r=e).width,r.height)}),gce:W(function(e){H(),w(),a=e.transparencyGiven?e.transparencyIndex:null,c=e.delayTime,u=e.disposalMethod}),com:W(q),app:{NETSCAPE:W(q)},img:W(function(e){d=d||Q.getContext("2d");var t=g.length,n=e.lctFlag?e.lct:r.gct;0<t&&(3===h?null!==l?d.putImageData(g[l].data,0,0):d.clearRect(p.leftPos,p.topPos,p.width,p.height):l=t-1,2===h&&d.clearRect(p.leftPos,p.topPos,p.width,p.height));var i=d.getImageData(e.leftPos,e.topPos,e.width,e.height);e.pixels.forEach(function(e,t){e!==a&&(i.data[4*t+0]=n[e][0],i.data[4*t+1]=n[e][1],i.data[4*t+2]=n[e][2],i.data[4*t+3]=255)}),d.putImageData(i,e.leftPos,e.topPos),v||(Z.scale(K(),K()),v=!0),N&&(Z.drawImage(Q,0,0),N=s.auto_play),p=e},!(T=0)),eof:function(){H(),F(!1),s.c_w&&s.c_h||(X.width=r.width*K(),X.height=r.height*K()),B.init(),o=!1,te&&te(y)}},K=function(){var e=s.max_width&&r&&r.width>s.max_width?s.max_width/r.width:1;return e},ee=!(M=function(){var e;(E=parseInt(E,10))>g.length-1&&(E=0),E<0&&(E=0),e=m[E],Q.getContext("2d").putImageData(g[E].data,e.x,e.y),Z.globalCompositeOperation="copy",Z.drawImage(Q,0,0)}),te=!(_=function e(){var t;(k=f)&&(G(1),t=(t=10*g[E].delay)||100,0==(E+1+g.length)%g.length?(t+=P,setTimeout(U,t)):setTimeout(e,t))});return{play:B.play,pause:B.pause,move_relative:B.move_relative,move_to:B.move_to,get_playing:function(){return f},get_canvas:function(){return X},get_canvas_scale:function(){return K()},get_loading:function(){return o},get_auto_play:function(){return s.auto_play},get_length:function(){return B.length()},get_frames:function(){return g},get_duration:Y,get_duration_ms:function(){return 10*Y()},get_current_frame:function(){return B.current_frame()},load_url:function(e,t){var n;z(t)&&((n=new XMLHttpRequest).open("GET",e,!0),"overrideMimeType"in n?n.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in n?n.responseType="arraybuffer":n.setRequestHeader("Accept-Charset","x-user-defined"),n.onloadstart=function(){ee||V()},n.onload=function(e){200!=this.status&&j("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var t=this.response;0<t.toString().indexOf("ArrayBuffer")&&(t=new Uint8Array(t)),i=new ne(t),setTimeout(b,0)},n.onprogress=function(e){e.lengthComputable&&x(e.loaded,e.total,!0)},n.onerror=function(){j("xhr")},n.send())},load:function(e){this.load_url(y.getAttribute("rel:animated_src")||y.src,e)},load_raw:function(e,t){z(t)&&(ee||V(),i=new ne(e),setTimeout(b,0))},set_frame_offset:function(e,t){m[e]?(void 0!==t.x&&(m[e].x=t.x),void 0!==t.y&&(m[e].y=t.y)):m[e]=t}}}var N=function(){function o(e,t,n){c(this,o);var i=document.createElement("div");i.id=t||x(),i.className="cursor-tip-class",i.innerHTML=e,(n?n.container:document.body).appendChild(i),this.ele=i,this._visible=!0,this._isDestryoed=!1;var r=this;n instanceof Cesium.Viewer&&(this._handler=new Cesium.ScreenSpaceEventHandler(n.canvas),this._handler.setInputAction(function(e){r.updatePosition(e.endPosition)},Cesium.ScreenSpaceEventType.MOUSE_MOVE))}return u(o,[{key:"updatePosition",value:function(e){this.ele.style.left="".concat(e.x+10,"px"),this.ele.style.top="".concat(e.y+10,"px")}},{key:"updateText",value:function(e){this.ele.innerHTML=e}},{key:"destory",value:function(){this._isDestryoed||(document.body.removeChild(this.ele),this._handler.isDestroyed()&&this._handler.destroy(),this._isDestryoed=!0)}},{key:"show",get:function(){return this._visible},set:function(e){this._visible=e,this.ele.style.display=e?"block":"none"}}]),o}(),O=function(){function i(){c(this,i)}return u(i,null,[{key:"cartesian2Pixel",value:function(e,t){return Cesium.SceneTransforms.wgs84ToWindowCoordinates(t.scene,e)}},{key:"pixel2Cartesian",value:function(e,t){return t.terrainProvider instanceof Cesium.EllipsoidTerrainProvider?i.pixel2Cartesian1(e,t):i.pixel2Cartesian2(e,t)}},{key:"pixel2Cartesian1",value:function(e,t){return t.camera.pickEllipsoid(e,t.scene.globe.ellipsoid)}},{key:"pixel2Cartesian2",value:function(e,t){var n=t.camera.getPickRay(e);return t.scene.globe.pick(n,t.scene)}},{key:"cartesian2Radians",value:function(e,t){var n=t.scene.globe.ellipsoid||Cesium.Ellipsoid.WGS84,i=Cesium.Cartographic.fromCartesian(e,n);return{lon:i.longitude,lat:i.latitude,height:i.height}}},{key:"cartesian2Degrees",value:function(e,t){var n=i.cartesian2Radians(e,t);return{lon:Cesium.Math.toDegrees(n.lon),lat:Cesium.Math.toDegrees(n.lat),height:n.height}}},{key:"pixel2Degrees",value:function(e,t){var n=i.pixel2Cartesian(e,t);if(Cesium.defined(n))return i.cartesian2Degrees(n,t)}},{key:"pixel2Radians",value:function(e,t){var n=i.pixel2Cartesian(e,t);if(Cesium.defined(n))return i.cartesian2Radians(n,t)}},{key:"toDegrees",value:function(e,t){return e instanceof Cesium.Cartesian3?i.cartesian2Degrees(e,t):e instanceof Cesium.Cartesian2?i.pixel2Degrees(e,t):e instanceof Cesium.Cartographic?{lon:Cesium.Math.toDegrees(e.longitude),lat:Cesium.Math.toDegrees(e.latitude),height:e.height}:void 0}},{key:"toRadians",value:function(e,t){return e instanceof Cesium.Cartesian3?i.cartesian2Radians(e,t):e instanceof Cesium.Cartesian2?i.pixel2Radians(e,t):void 0}},{key:"toPixel",value:function(e,t){if(e instanceof Cesium.Cartesian3)return i.cartesian2Pixel(e,t);if(e instanceof Cesium.Cartographic){var n=Cesium.Cartographic.toCartesian(e);return i.cartesian2Pixel(n,t)}}},{key:"toCartesian",value:function(e,t){return e instanceof Cesium.Cartesian2?i.pixel2Cartesian(e,t):e instanceof Cesium.Cartographic?Cesium.Cartographic.toCartesian(e):void 0}}]),i}();function L(e,t,n){var i=t.boundingSphere.center,r=O.toDegrees(i,e),o=Cesium.Cartesian3.fromDegrees(r.lon,r.lat,0),a=Cesium.Cartesian3.fromDegrees(r.lon,r.lat,n),s=Cesium.Cartesian3.subtract(a,o,new Cesium.Cartesian3);t.modelMatrix=Cesium.Matrix4.multiply(t.modelMatrix,Cesium.Matrix4.fromTranslation(s),t.modelMatrix)}var R=function(){function r(e){c(this,r),S(e),this._viewer=e}return u(r,[{key:"loadModel",value:function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{};return r.loadModel(this._viewer,e,t,i)}},{key:"loadImageryLayer",value:function(e){return r.loadImageryLayer(this._viewer,e)}},{key:"loadTileset",value:function(e,t,n){return r.loadTileset(this._viewer,e,t,n)}},{key:"loadGif",value:function(e){var t=0<arguments.length&&void 0!==e?e:[];return r.loadGif(this._viewer,t)}}],[{key:"loadModel",value:function(e,t,n,i){var r=3<arguments.length&&void 0!==i?i:{},o=Cesium.Transforms.eastNorthUpToFixedFrame(n);return e.scene.primitives.add(Cesium.Model.fromGltf(g({url:t,modelMatrix:o},r)))}},{key:"loadImageryLayer",value:function(e,t){var n;S(e);var i,r,o,a=null;switch(t.type.toLowerCase()){case"singletile":o=(r=t.geom?t.geom.split(","):null)?(n=Cesium.Rectangle).fromDegrees.apply(n,y(r)):Cesium.Rectangle.MAX_VALUE,a=new Cesium.SingleTileImageryProvider({url:t.url,rectangle:o});break;case"urltemplate":i="epsg:4326"===t.crs.toLowerCase()?new Cesium.GeographicTilingScheme:new Cesium.WebMercatorTilingScheme,a=new Cesium.UrlTemplateImageryProvider({url:t.url,maximumLevel:t.maximumLevel?t.maximumLevel:10,tilingScheme:i});break;case"osm":a=Cesium.createOpenStreetMapImageryProvider({url:"https://a.tile.openstreetmap.org/"});break;case"bing":a=new Cesium.BingMapsImageryProvider({url:"https://dev.virtualearth.net",key:"Al6AU4RqRNFUEYgBaTEhiiX4PNJJsrT7yOaFC4PCnHWh1YgFRQL9oPhuN6gQebR5"});break;case"mapboximg":case"mapboxvec":a=new Cesium.MapboxImageryProvider({mapId:t.mapId,accessToken:"pk.eyJ1Ijoid202NzUyMDYyIiwiYSI6ImNqZWxkbzRjejNmbngzM283aXMwOHM4dGEifQ.dUNJYNIZoAhzI1EwruRF1w"});break;case"tdt":a=new Cesium.WebMapTileServiceImageryProvider({url:t.url,layer:t.layer,style:t.style,format:t.format,tileMatrixSetID:"GoogleMapsCompatible"});break;case"geoserverwms":a=new Cesium.WebMapServiceImageryProvider({url:t.url,layers:t.layerName,parameters:{transparent:"true",format:"image/png"}})}var s=new Cesium.ImageryLayer(a);return e.imageryLayers.add(s)}},{key:"loadTileset",value:function(l,e,t,n){var i=2<arguments.length&&void 0!==t?t:{},r=3<arguments.length&&void 0!==n?n:{},o=new Cesium.Cesium3DTileset(g(g({},i),{},{url:e})),h=r.height,d=r.position,p=r.debug,f=r.stepDis,v=r.stepAngle,f=f||2,v=v||1;return o.readyPromise.then(function(a){var e,t,n,s,c,u;l.scene.primitives.add(a),Cesium.defined(d)&&(e=a,t=d,n=Cesium.Transforms.eastNorthUpToFixedFrame(t),e.root.transform=n),Cesium.defined(h)&&L(l,a,h),p&&(h=h||0,s=0,document.onkeypress=function(e){var t,n,i,r,o;e.keyCode==="Q".charCodeAt()||e.keyCode==="q".charCodeAt()?s=1:e.keyCode==="E".charCodeAt()||e.keyCode==="e".charCodeAt()?s=-1:e.keyCode==="A".charCodeAt()||e.keyCode==="a".charCodeAt()?c=new Cesium.Cartesian3(-f,0,0):e.keyCode==="D".charCodeAt()||e.keyCode==="d".charCodeAt()?c=new Cesium.Cartesian3(f,0,0):e.keyCode==="W".charCodeAt()||e.keyCode==="w".charCodeAt()?c=new Cesium.Cartesian3(0,-f,0):e.keyCode==="S".charCodeAt()||e.keyCode==="s".charCodeAt()?c=new Cesium.Cartesian3(0,f,0):e.keyCode==="Z".charCodeAt()||e.keyCode==="z".charCodeAt()?u=-v:e.keyCode!=="X".charCodeAt()&&e.keyCode!=="x".charCodeAt()||(u=v),L(l,a,s),Cesium.defined(c)&&(t=a,n=c,Cesium.Matrix4.multiplyByTranslation(t.modelMatrix,n,t.modelMatrix)),Cesium.defined(u)&&(i=a,r=u,o=Cesium.Matrix3.fromRotationZ(Cesium.Math.toRadians(r)),Cesium.Matrix4.multiplyByMatrix3(i.root.transform,o,i.root.transform)),c=u=void 0})}),o}},{key:"loadGif",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:[],i=document.createElement("img");i.src=e,i.setAttribute("rel:animated_src",e),i.setAttribute("rel:auto_play","0"),document.body.appendChild(i);var r=new D({gif:i});return new Promise(function(t){r.load(function(){for(var e=1;e<=r.get_length();e++)r.move_to(e),n.push(r.get_canvas().toDataURL());t(n)})})}}]),r}();function I(e){return null!=e&&e===e.window}var j=[],H=window.document,B=Object.getPrototypeOf,G=j.slice,U=j.concat,F=j.push,q=j.indexOf,W={},V=W.toString,z=W.hasOwnProperty,Y=z.toString,X=Y.call(Object),Z={},J=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},Q={type:!0,src:!0,nonce:!0,noModule:!0};function $(e,t,n){var i,r,o=(n=n||H).createElement("script");if(o.text=e,t)for(i in Q)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&o.setAttribute(i,r);n.head.appendChild(o).parentNode.removeChild(o)}function K(e){return null==e?"".concat(e):"object"===M(e)||"function"==typeof e?W[V.call(e)]||"object":M(e)}var ee=function e(t,n){return new e.fn.init(t,n)},te=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function re(e){var t=!!e&&"length"in e&&e.length,n=K(e);return!J(e)&&!I(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}ee.fn=ee.prototype={jquery:"3.4.1",constructor:ee,length:0,toArray:function(){return G.call(this)},get:function(e){return null==e?G.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ee.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ee.each(this,e)},map:function(n){return this.pushStack(ee.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:F,sort:j.sort,splice:j.splice},ee.extend=ee.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"===M(a)||J(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)i=e[t],"__proto__"!==t&&a!==i&&(u&&i&&(ee.isPlainObject(i)||(r=Array.isArray(i)))?(n=a[t],o=r&&!Array.isArray(n)?[]:r||ee.isPlainObject(n)?n:{},r=!1,a[t]=ee.extend(u,o,i)):void 0!==i&&(a[t]=i));return a},ee.extend({expando:"jQuery".concat(("3.4.1"+Math.random()).replace(/\D/g,"")),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==V.call(e))&&(!(t=B(e))||"function"==typeof(n=z.call(t,"constructor")&&t.constructor)&&Y.call(n)===X)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){$(e,{nonce:t&&t.nonce})},each:function(e,t){var n,i=0;if(re(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":"".concat(e).replace(te,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(re(Object(e))?ee.merge(n,"string"==typeof e?[e]:e):F.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:q.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,a=!n;r<o;r++)!t(e[r],r)!=a&&i.push(e[r]);return i},map:function(e,t,n){var i,r,o=0,a=[];if(re(e))for(i=e.length;o<i;o++)null!=(r=t(e[o],o,n))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,n))&&a.push(r);return U.apply([],a)},guid:1,support:Z}),"function"==typeof Symbol&&(ee.fn[Symbol.iterator]=j[Symbol.iterator]),ee.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){W["[object ".concat(t,"]")]=t.toLowerCase()});var oe=function(n){function h(e,t,n){var i="0x".concat(t)-65536;return i!=i||n?t:i<0?String.fromCharCode(65536+i):String.fromCharCode(i>>10|55296,1023&i|56320)}function r(){x()}var e,p,b,o,a,f,d,v,C,c,u,x,k,s,_,g,l,m,y,E="sizzle".concat(+new Date),w=n.document,T=0,i=0,S=ce(),M=ce(),A=ce(),P=ce(),D=function(e,t){return e===t&&(u=!0),0},N={}.hasOwnProperty,t=[],O=t.pop,L=t.push,R=t.push,I=t.slice,j=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},H="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",G="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",U="\\[".concat(B,"*(").concat(G,")(?:").concat(B,"*([*^$|!~]?=)").concat(B,"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(").concat(G,"))|)").concat(B,"*\\]"),F=":(".concat(G,")(?:\\((")+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|".concat(U,")*)|")+".*)\\)|)",q=new RegExp("".concat(B,"+"),"g"),W=new RegExp("^".concat(B,"+|((?:^|[^\\\\])(?:\\\\.)*)").concat(B,"+$"),"g"),V=new RegExp("^".concat(B,"*,").concat(B,"*")),z=new RegExp("^".concat(B,"*([>+~]|").concat(B,")").concat(B,"*")),Y=new RegExp("".concat(B,"|>")),X=new RegExp(F),Z=new RegExp("^".concat(G,"$")),J={ID:new RegExp("^#(".concat(G,")")),CLASS:new RegExp("^\\.(".concat(G,")")),TAG:new RegExp("^(".concat(G,"|[*])")),ATTR:new RegExp("^".concat(U)),PSEUDO:new RegExp("^".concat(F)),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(".concat(B,"*(even|odd|(([+-]|)(\\d*)n|)").concat(B,"*(?:([+-]|)").concat(B,"*(\\d+)|))").concat(B,"*\\)|)"),"i"),bool:new RegExp("^(?:".concat(H,")$"),"i"),needsContext:new RegExp("^".concat(B,"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(").concat(B,"*((?:-\\d)?\\d*)").concat(B,"*\\)|)(?=[^-]|$)"),"i")},Q=/HTML$/i,$=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,ee=/^[^{]+\{\s*\[native \w/,te=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ne=/[+~]/,ie=new RegExp("\\\\([\\da-f]{1,6}".concat(B,"?|(").concat(B,")|.)"),"ig"),re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"�":"".concat(e.slice(0,-1),"\\").concat(e.charCodeAt(e.length-1).toString(16)," "):"\\".concat(e)},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{R.apply(t=I.call(w.childNodes),w.childNodes),t[w.childNodes.length].nodeType}catch(e){R={apply:t.length?function(e,t){L.apply(e,I.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function se(t,e,n,i){var r,o,a,s,c,u,l,h=e&&e.ownerDocument,d=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return n;if(!i&&((e?e.ownerDocument||e:w)!==k&&x(e),e=e||k,_)){if(11!==d&&(c=te.exec(t)))if(r=c[1]){if(9===d){if(!(a=e.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(h&&(a=h.getElementById(r))&&y(e,a)&&a.id===r)return n.push(a),n}else{if(c[2])return R.apply(n,e.getElementsByTagName(t)),n;if((r=c[3])&&p.getElementsByClassName&&e.getElementsByClassName)return R.apply(n,e.getElementsByClassName(r)),n}if(p.qsa&&!P["".concat(t," ")]&&(!g||!g.test(t))&&(1!==d||"object"!==e.nodeName.toLowerCase())){if(l=t,h=e,1===d&&Y.test(t)){for((s=e.getAttribute("id"))?s=s.replace(re,oe):e.setAttribute("id",s=E),o=(u=f(t)).length;o--;)u[o]="#".concat(s," ").concat(we(u[o]));l=u.join(","),h=ne.test(t)&&me(e.parentNode)||e}try{return R.apply(n,h.querySelectorAll(l)),n}catch(e){P(t,!0)}finally{s===E&&e.removeAttribute("id")}}}return v(t.replace(W,"$1"),e,n,i)}function ce(){var n=[];function i(e,t){return n.push("".concat(e," "))>b.cacheLength&&delete i[n.shift()],i["".concat(e," ")]=t}return i}function ue(e){return e[E]=!0,e}function le(e){var t=k.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var n=e.split("|"),i=n.length;i--;)b.attrHandle[n[i]]=t}function de(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function fe(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ve(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ge(a){return ue(function(o){return o=+o,ue(function(e,t){for(var n,i=a([],e.length,o),r=i.length;r--;)e[n=i[r]]&&(e[n]=!(t[n]=e[n]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in p=se.support={},a=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Q.test(t||n&&n.nodeName||"HTML")},x=se.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:w;return i!==k&&9===i.nodeType&&i.documentElement&&(s=(k=i).documentElement,_=!a(k),w!==k&&(n=k.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",r,!1):n.attachEvent&&n.attachEvent("onunload",r)),p.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),p.getElementsByTagName=le(function(e){return e.appendChild(k.createComment("")),!e.getElementsByTagName("*").length}),p.getElementsByClassName=ee.test(k.getElementsByClassName),p.getById=le(function(e){return s.appendChild(e).id=E,!k.getElementsByName||!k.getElementsByName(E).length}),p.getById?(b.filter.ID=function(e){var t=e.replace(ie,h);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&_){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(ie,h);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&_){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=p.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):p.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[r++];)1===n.nodeType&&i.push(n);return i},b.find.CLASS=p.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&_)return t.getElementsByClassName(e)},l=[],g=[],(p.qsa=ee.test(k.querySelectorAll))&&(le(function(e){s.appendChild(e).innerHTML="<a id='".concat(E,"'></a>")+"<select id='".concat(E,"-\r\\' msallowcapture=''>")+"<option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=".concat(B,"*(?:''|\"\")")),e.querySelectorAll("[selected]").length||g.push("\\[".concat(B,"*(?:value|").concat(H,")")),e.querySelectorAll("[id~=".concat(E,"-]")).length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#".concat(E,"+*")).length||g.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=k.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name".concat(B,"*[*^$|!~]?=")),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),s.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(p.matchesSelector=ee.test(m=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&le(function(e){p.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),l.push("!=",F)}),g=g.length&&new RegExp(g.join("|")),l=l.length&&new RegExp(l.join("|")),t=ee.test(s.compareDocumentPosition),y=t||ee.test(s.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return u=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!p.sortDetached&&t.compareDocumentPosition(e)===n?e===k||e.ownerDocument===w&&y(w,e)?-1:t===k||t.ownerDocument===w&&y(w,t)?1:c?j(c,e)-j(c,t):0:4&n?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e===k?-1:t===k?1:r?-1:o?1:c?j(c,e)-j(c,t):0;if(r===o)return de(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?de(a[i],s[i]):a[i]===w?-1:s[i]===w?1:0}),k},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==k&&x(e),p.matchesSelector&&_&&!P["".concat(t," ")]&&(!l||!l.test(t))&&(!g||!g.test(t)))try{var n=m.call(e,t);if(n||p.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){P(t,!0)}return 0<se(t,k,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!==k&&x(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==k&&x(e);var n=b.attrHandle[t.toLowerCase()],i=n&&N.call(b.attrHandle,t.toLowerCase())?n(e,t,!_):void 0;return void 0!==i?i:p.attributes||!_?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},se.escape=function(e){return"".concat(e).replace(re,oe)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: ".concat(e))},se.uniqueSort=function(e){var t,n=[],i=0,r=0;if(u=!p.detectDuplicates,c=!p.sortStable&&e.slice(0),e.sort(D),u){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return c=null,e},o=se.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:ue,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ie,h),e[3]=(e[3]||e[4]||e[5]||"").replace(ie,h),"~="===e[2]&&(e[3]=" ".concat(e[3]," ")),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=f(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ie,h).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S["".concat(e," ")];return t||(t=new RegExp("(^|".concat(B,")").concat(e,"(").concat(B,"|$)")))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(e){var t=se.attr(e,n);return null==t?"!="===i:!i||(t+="","="===i?t===r:"!="===i?t!==r:"^="===i?r&&0===t.indexOf(r):"*="===i?r&&-1<t.indexOf(r):"$="===i?r&&t.slice(-r.length)===r:"~="===i?-1<" ".concat(t.replace(q," ")," ").indexOf(r):"|="===i&&(t===r||t.slice(0,r.length+1)==="".concat(r,"-")))}},CHILD:function(f,e,t,v,g){var m="nth"!==f.slice(0,3),y="last"!==f.slice(-4),w="of-type"===e;return 1===v&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var i,r,o,a,s,c,u=m!=y?"nextSibling":"previousSibling",l=e.parentNode,h=w&&e.nodeName.toLowerCase(),d=!n&&!w,p=!1;if(l){if(m){for(;u;){for(a=e;a=a[u];)if(w?a.nodeName.toLowerCase()===h:1===a.nodeType)return!1;c=u="only"===f&&!c&&"nextSibling"}return!0}if(c=[y?l.firstChild:l.lastChild],y&&d){for(p=(s=(i=(r=(o=(a=l)[E]||(a[E]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===T&&i[1])&&i[2],a=s&&l.childNodes[s];a=++s&&a&&a[u]||(p=s=0)||c.pop();)if(1===a.nodeType&&++p&&a===e){r[f]=[T,s,p];break}}else if(d&&(p=s=(i=(r=(o=(a=e)[E]||(a[E]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===T&&i[1]),!1===p)for(;(a=++s&&a&&a[u]||(p=s=0)||c.pop())&&((w?a.nodeName.toLowerCase()!==h:1!==a.nodeType)||!++p||(d&&((r=(o=a[E]||(a[E]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]=[T,p]),a!==e)););return(p-=g)===v||p%v==0&&0<=p/v}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: ".concat(e));return a[E]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?ue(function(e,t){for(var n,i=a(e,o),r=i.length;r--;)e[n=j(e,i[r])]=!(t[n]=i[r])}):function(e){return a(e,0,t)}):a}},pseudos:{not:ue(function(e){var i=[],r=[],s=d(e.replace(W,"$1"));return s[E]?ue(function(e,t,n,i){for(var r,o=s(e,null,i,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,t,n){return i[0]=e,s(i,null,n,r),i[0]=null,!r.pop()}}),has:ue(function(t){return function(e){return 0<se(t,e).length}}),contains:ue(function(t){return t=t.replace(ie,h),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:ue(function(n){return Z.test(n||"")||se.error("unsupported lang: ".concat(n)),n=n.replace(ie,h).toLowerCase(),function(e){var t;do{if(t=_?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf("".concat(n,"-"))}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===s},focus:function(e){return e===k.activeElement&&(!k.hasFocus||k.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ve(!1),disabled:ve(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return $.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge(function(){return[0]}),last:ge(function(e,t){return[t-1]}),eq:ge(function(e,t,n){return[n<0?n+t:n]}),even:ge(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ge(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ge(function(e,t,n){for(var i=n<0?n+t:t<n?t:n;0<=--i;)e.push(i);return e}),gt:ge(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=pe(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=fe(e);function ye(){}function we(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function be(s,e,t){var c=e.dir,u=e.next,l=u||c,h=t&&"parentNode"===l,d=i++;return e.first?function(e,t,n){for(;e=e[c];)if(1===e.nodeType||h)return s(e,t,n);return!1}:function(e,t,n){var i,r,o,a=[T,d];if(n){for(;e=e[c];)if((1===e.nodeType||h)&&s(e,t,n))return!0}else for(;e=e[c];)if(1===e.nodeType||h)if(r=(o=e[E]||(e[E]={}))[e.uniqueID]||(o[e.uniqueID]={}),u&&u===e.nodeName.toLowerCase())e=e[c]||e;else{if((i=r[l])&&i[0]===T&&i[1]===d)return a[2]=i[2];if((r[l]=a)[2]=s(e,t,n))return!0}return!1}}function Ce(r){return 1<r.length?function(e,t,n){for(var i=r.length;i--;)if(!r[i](e,t,n))return!1;return!0}:r[0]}function xe(e,t,n,i,r){for(var o,a=[],s=0,c=e.length,u=null!=t;s<c;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),u&&t.push(s)));return a}function ke(p,f,v,g,m,e){return g&&!g[E]&&(g=ke(g)),m&&!m[E]&&(m=ke(m,e)),ue(function(e,t,n,i){var r,o,a,s=[],c=[],u=t.length,l=e||function(e,t,n){for(var i=0,r=t.length;i<r;i++)se(e,t[i],n);return n}(f||"*",n.nodeType?[n]:n,[]),h=!p||!e&&f?l:xe(l,s,p,n,i),d=v?m||(e?p:u||g)?[]:t:h;if(v&&v(h,d,n,i),g)for(r=xe(d,c),g(r,[],n,i),o=r.length;o--;)(a=r[o])&&(d[c[o]]=!(h[c[o]]=a));if(e){if(m||p){if(m){for(r=[],o=d.length;o--;)(a=d[o])&&r.push(h[o]=a);m(null,d=[],r,i)}for(o=d.length;o--;)(a=d[o])&&-1<(r=m?j(e,a):s[o])&&(e[r]=!(t[r]=a))}}else d=xe(d===t?d.splice(u,d.length):d),m?m(null,t,d,i):R.apply(t,d)})}function _e(e){for(var r,t,n,i=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,c=be(function(e){return e===r},a,!0),u=be(function(e){return-1<j(r,e)},a,!0),l=[function(e,t,n){var i=!o&&(n||t!==C)||((r=t).nodeType?c:u)(e,t,n);return r=null,i}];s<i;s++)if(t=b.relative[e[s].type])l=[be(Ce(l),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[E]){for(n=++s;n<i&&!b.relative[e[n].type];n++);return ke(1<s&&Ce(l),1<s&&we(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(W,"$1"),t,s<n&&_e(e.slice(s,n)),n<i&&_e(e=e.slice(n)),n<i&&we(e))}l.push(t)}return Ce(l)}function Ee(g,m){function e(e,t,n,i,r){var o,a,s,c=0,u="0",l=e&&[],h=[],d=C,p=e||w&&b.find.TAG("*",r),f=T+=null==d?1:Math.random()||.1,v=p.length;for(r&&(C=t===k||t||r);u!==v&&null!=(o=p[u]);u++){if(w&&o){for(a=0,t||o.ownerDocument===k||(x(o),n=!_);s=g[a++];)if(s(o,t||k,n)){i.push(o);break}r&&(T=f)}y&&((o=!s&&o)&&c--,e&&l.push(o))}if(c+=u,y&&u!==c){for(a=0;s=m[a++];)s(l,h,t,n);if(e){if(0<c)for(;u--;)l[u]||h[u]||(h[u]=O.call(i));h=xe(h)}R.apply(i,h),r&&!e&&0<h.length&&1<c+m.length&&se.uniqueSort(i)}return r&&(T=f,C=d),l}var y=0<m.length,w=0<g.length;return y?ue(e):e}return ye.prototype=b.filters=b.pseudos,b.setFilters=new ye,f=se.tokenize=function(e,t){var n,i,r,o,a,s,c,u=M["".concat(e," ")];if(u)return t?0:u.slice(0);for(a=e,s=[],c=b.preFilter;a;){for(o in n&&!(i=V.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(r=[])),n=!1,(i=z.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(W," ")}),a=a.slice(n.length)),b.filter)!(i=J[o].exec(a))||c[o]&&!(i=c[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):M(e,s).slice(0)},d=se.compile=function(e,t){var n,i=[],r=[],o=A["".concat(e," ")];if(!o){for(n=(t=t||f(e)).length;n--;)(o=_e(t[n]))[E]?i.push(o):r.push(o);(o=A(e,Ee(r,i))).selector=e}return o},v=se.select=function(e,t,n,i){var r,o,a,s,c,u="function"==typeof e&&e,l=!i&&f(e=u.selector||e);if(n=n||[],1===l.length){if(2<(o=l[0]=l[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&_&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(ie,h),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=J.needsContext.test(e)?0:o.length;r--&&(a=o[r],!b.relative[s=a.type]);)if((c=b.find[s])&&(i=c(a.matches[0].replace(ie,h),ne.test(o[0].type)&&me(t.parentNode)||t))){if(o.splice(r,1),!(e=i.length&&we(o)))return R.apply(n,i),n;break}}return(u||d(e,l))(i,t,!_,n,!t||ne.test(e)&&me(t.parentNode)||t),n},p.sortStable=E.split("").sort(D).join("")===E,p.detectDuplicates=!!u,x(),p.sortDetached=le(function(e){return 1&e.compareDocumentPosition(k.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||he("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),p.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||he("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||he(H,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),se}(window);ee.find=oe,ee.expr=oe.selectors,ee.expr[":"]=ee.expr.pseudos,ee.uniqueSort=ee.unique=oe.uniqueSort,ee.text=oe.getText,ee.isXMLDoc=oe.isXML,ee.contains=oe.contains,ee.escapeSelector=oe.escape;function ae(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&ee(e).is(n))break;i.push(e)}return i}function se(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var ce=ee.expr.match.needsContext;function ue(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var le,he=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function de(e,n,i){return J(n)?ee.grep(e,function(e,t){return!!n.call(e,t,e)!==i}):n.nodeType?ee.grep(e,function(e){return e===n!==i}):"string"!=typeof n?ee.grep(e,function(e){return-1<q.call(n,e)!==i}):ee.filter(n,e,i)}ee.filter=function(e,t,n){var i=t[0];return n&&(e=":not(".concat(e,")")),1===t.length&&1===i.nodeType?ee.find.matchesSelector(i,e)?[i]:[]:ee.find.matches(e,ee.grep(t,function(e){return 1===e.nodeType}))},ee.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(ee(e).filter(function(){for(t=0;t<i;t++)if(ee.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)ee.find(e,r[t],n);return 1<i?ee.uniqueSort(n):n},filter:function(e){return this.pushStack(de(this,e||[],!1))},not:function(e){return this.pushStack(de(this,e||[],!0))},is:function(e){return!!de(this,"string"==typeof e&&ce.test(e)?ee(e):e||[],!1).length}});var pe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ee.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||le,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):J(e)?void 0!==n.ready?n.ready(e):e(ee):ee.makeArray(e,this);if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:pe.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof ee?t[0]:t,ee.merge(this,ee.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:H,!0)),he.test(i[1])&&ee.isPlainObject(t))for(i in t)J(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=H.getElementById(i[2]))&&(this[0]=r,this.length=1),this}).prototype=ee.fn,le=ee(H);var fe=/^(?:parents|prev(?:Until|All))/,ve={children:!0,contents:!0,next:!0,prev:!0};function ge(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}ee.fn.extend({has:function(e){var t=ee(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ee.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,o=[],a="string"!=typeof e&&ee(e);if(!ce.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ee.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?ee.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?q.call(ee(e),this[0]):q.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ee.uniqueSort(ee.merge(this.get(),ee(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ee.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ae(e,"parentNode")},parentsUntil:function(e,t,n){return ae(e,"parentNode",n)},next:function(e){return ge(e,"nextSibling")},prev:function(e){return ge(e,"previousSibling")},nextAll:function(e){return ae(e,"nextSibling")},prevAll:function(e){return ae(e,"previousSibling")},nextUntil:function(e,t,n){return ae(e,"nextSibling",n)},prevUntil:function(e,t,n){return ae(e,"previousSibling",n)},siblings:function(e){return se((e.parentNode||{}).firstChild,e)},children:function(e){return se(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(ue(e,"template")&&(e=e.content||e),ee.merge([],e.childNodes))}},function(i,r){ee.fn[i]=function(e,t){var n=ee.map(this,r,e);return"Until"!==i.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=ee.filter(t,n)),1<this.length&&(ve[i]||ee.uniqueSort(n),fe.test(i)&&n.reverse()),this.pushStack(n)}});var me=/[^\x20\t\r\n\f]+/g;function ye(e){return e}function we(e){throw e}function be(e,t,n,i){var r;try{e&&J(r=e.promise)?r.call(e).done(t).fail(n):e&&J(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}ee.Callbacks=function(i){var e,n,r,t,o,a;i="string"==typeof i?(e=i,n={},ee.each(e.match(me)||[],function(e,t){n[t]=!0}),n):ee.extend({},i);function s(){for(a=a||i.once,o=r=!0;u.length;l=-1)for(t=u.shift();++l<c.length;)!1===c[l].apply(t[0],t[1])&&i.stopOnFalse&&(l=c.length,t=!1);i.memory||(t=!1),r=!1,a&&(c=t?[]:"")}var c=[],u=[],l=-1,h={add:function(){return c&&(t&&!r&&(l=c.length-1,u.push(t)),function n(e){ee.each(e,function(e,t){J(t)?i.unique&&h.has(t)||c.push(t):t&&t.length&&"string"!==K(t)&&n(t)})}(arguments),t&&!r&&s()),this},remove:function(){return ee.each(arguments,function(e,t){for(var n;-1<(n=ee.inArray(t,c,n));)c.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<ee.inArray(e,c):0<c.length},empty:function(){return c=c&&[],this},disable:function(){return a=u=[],c=t="",this},disabled:function(){return!c},lock:function(){return a=u=[],t||r||(c=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),r||s()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},ee.extend({Deferred:function(e){var o=[["notify","progress",ee.Callbacks("memory"),ee.Callbacks("memory"),2],["resolve","done",ee.Callbacks("once memory"),ee.Callbacks("once memory"),0,"resolved"],["reject","fail",ee.Callbacks("once memory"),ee.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var r=arguments;return ee.Deferred(function(i){ee.each(o,function(e,t){var n=J(r[t[4]])&&r[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&J(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i["".concat(t[0],"With")](this,n?[e]:arguments)})}),r=null}).promise()},then:function(t,n,i){var c=0;function u(r,o,a,s){return function(){function e(){var e,t;if(!(r<c)){if((e=a.apply(n,i))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"===M(e)||"function"==typeof e)&&e.then,J(t)?s?t.call(e,u(c,o,ye,s),u(c,o,we,s)):(c++,t.call(e,u(c,o,ye,s),u(c,o,we,s),u(c,o,ye,o.notifyWith))):(a!==ye&&(n=void 0,i=[e]),(s||o.resolveWith)(n,i))}}var n=this,i=arguments,t=s?e:function(){try{e()}catch(e){ee.Deferred.exceptionHook&&ee.Deferred.exceptionHook(e,t.stackTrace),c<=r+1&&(a!==we&&(n=void 0,i=[e]),o.rejectWith(n,i))}};r?t():(ee.Deferred.getStackHook&&(t.stackTrace=ee.Deferred.getStackHook()),window.setTimeout(t))}}return ee.Deferred(function(e){o[0][3].add(u(0,e,J(i)?i:ye,e.notifyWith)),o[1][3].add(u(0,e,J(t)?t:ye)),o[2][3].add(u(0,e,J(n)?n:we))}).promise()},promise:function(e){return null!=e?ee.extend(e,a):a}},s={};return ee.each(o,function(e,t){var n=t[2],i=t[5];a[t[1]]=n.add,i&&n.add(function(){r=i},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s["".concat(t[0],"With")](this===s?void 0:this,arguments),this},s["".concat(t[0],"With")]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){function t(t){return function(e){r[t]=this,o[t]=1<arguments.length?G.call(arguments):e,--n||a.resolveWith(r,o)}}var n=arguments.length,i=n,r=Array(i),o=G.call(arguments),a=ee.Deferred();if(n<=1&&(be(e,a.done(t(i)).resolve,a.reject,!n),"pending"===a.state()||J(o[i]&&o[i].then)))return a.then();for(;i--;)be(o[i],t(i),a.reject);return a.promise()}});var Ce=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ee.Deferred.exceptionHook=function(e,t){window.console&&window.console.warn&&e&&Ce.test(e.name)&&window.console.warn("jQuery.Deferred exception: ".concat(e.message),e.stack,t)},ee.readyException=function(e){window.setTimeout(function(){throw e})};var xe=ee.Deferred();function ke(){H.removeEventListener("DOMContentLoaded",ke),window.removeEventListener("load",ke),ee.ready()}ee.fn.ready=function(e){return xe.then(e).catch(function(e){ee.readyException(e)}),this},ee.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ee.readyWait:ee.isReady)||(ee.isReady=!0)!==e&&0<--ee.readyWait||xe.resolveWith(H,[ee])}}),ee.ready.then=xe.then,"complete"===H.readyState||"loading"!==H.readyState&&!H.documentElement.doScroll?window.setTimeout(ee.ready):(H.addEventListener("DOMContentLoaded",ke),window.addEventListener("load",ke));function _e(e,t,n,i,r,o,a){var s=0,c=e.length,u=null==n;if("object"===K(n))for(s in r=!0,n)_e(e,t,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,J(i)||(a=!0),u&&(t=a?(t.call(e,i),null):(u=t,function(e,t,n){return u.call(ee(e),n)})),t))for(;s<c;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:u?t.call(e):c?t(e[0],n):o}var Ee=/^-ms-/,Te=/-([a-z])/g;function Se(e,t){return t.toUpperCase()}function Me(e){return e.replace(Ee,"ms-").replace(Te,Se)}function Ae(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function Pe(){this.expando=ee.expando+Pe.uid++}Pe.uid=1,Pe.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Ae(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[Me(t)]=n;else for(i in t)r[Me(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Me(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(Me):(t=Me(t))in i?[t]:t.match(me)||[]).length;for(;n--;)delete i[t[n]]}void 0!==t&&!ee.isEmptyObject(i)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ee.isEmptyObject(t)}};var De=new Pe,Ne=new Pe,Oe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Le=/[A-Z]/g;function Re(e,t,n){var i,r;if(void 0===n&&1===e.nodeType)if(i="data-".concat(t.replace(Le,"-$&").toLowerCase()),"string"==typeof(n=e.getAttribute(i))){try{n="true"===(r=n)||"false"!==r&&("null"===r?null:r==="".concat(+r)?+r:Oe.test(r)?JSON.parse(r):r)}catch(e){}Ne.set(e,t,n)}else n=void 0;return n}ee.extend({hasData:function(e){return Ne.hasData(e)||De.hasData(e)},data:function(e,t,n){return Ne.access(e,t,n)},removeData:function(e,t){Ne.remove(e,t)},_data:function(e,t,n){return De.access(e,t,n)},_removeData:function(e,t){De.remove(e,t)}}),ee.fn.extend({data:function(n,e){var t,i,r,o=this[0],a=o&&o.attributes;if(void 0!==n)return"object"===M(n)?this.each(function(){Ne.set(this,n)}):_e(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Ne.get(o,n))||void 0!==(t=Re(o,n))?t:void 0;this.each(function(){Ne.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(r=Ne.get(o),1===o.nodeType&&!De.get(o,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&0===(i=a[t].name).indexOf("data-")&&(i=Me(i.slice(5)),Re(o,i,r[i]));De.set(o,"hasDataAttrs",!0)}return r},removeData:function(e){return this.each(function(){Ne.remove(this,e)})}}),ee.extend({queue:function(e,t,n){var i;if(e)return t="".concat(t||"fx","queue"),i=De.get(e,t),n&&(!i||Array.isArray(n)?i=De.access(e,t,ee.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=ee.queue(e,t),i=n.length,r=n.shift(),o=ee._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,function(){ee.dequeue(e,t)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n="".concat(t,"queueHooks");return De.get(e,n)||De.access(e,n,{empty:ee.Callbacks("once memory").add(function(){De.remove(e,["".concat(t,"queue"),n])})})}}),ee.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?ee.queue(this[0],t):void 0===n?this:this.each(function(){var e=ee.queue(this,t,n);ee._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ee.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ee.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--r||o.resolveWith(a,[a])}var i,r=1,o=ee.Deferred(),a=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=De.get(a[s],"".concat(e,"queueHooks")))&&i.empty&&(r++,i.empty.add(n));return n(),o.promise(t)}});var Ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,je=new RegExp("^(?:([+-])=|)(".concat(Ie,")([a-z%]*)$"),"i"),He=["Top","Right","Bottom","Left"],Be=H.documentElement,Ge=function(e){return ee.contains(e.ownerDocument,e)},Ue={composed:!0};Be.getRootNode&&(Ge=function(e){return ee.contains(e.ownerDocument,e)||e.getRootNode(Ue)===e.ownerDocument});function Fe(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in r=n.apply(e,i||[]),t)e.style[o]=a[o];return r}var qe=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&Ge(e)&&"none"===ee.css(e,"display")};function We(e,t,n,i){var r,o,a=20,s=i?function(){return i.cur()}:function(){return ee.css(e,t,"")},c=s(),u=n&&n[3]||(ee.cssNumber[t]?"":"px"),l=e.nodeType&&(ee.cssNumber[t]||"px"!==u&&+c)&&je.exec(ee.css(e,t));if(l&&l[3]!==u){for(c/=2,u=u||l[3],l=+c||1;a--;)ee.style(e,t,l+u),(1-o)*(1-(o=s()/c||.5))<=0&&(a=0),l/=o;l*=2,ee.style(e,t,l+u),n=n||[]}return n&&(l=+l||+c||0,r=n[1]?l+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=l,i.end=r)),r}var Ve={};function ze(e,t){for(var n,i,r,o,a,s,c,u=[],l=0,h=e.length;l<h;l++)(i=e[l]).style&&(n=i.style.display,t?("none"===n&&(u[l]=De.get(i,"display")||null,u[l]||(i.style.display="")),""===i.style.display&&qe(i)&&(u[l]=(c=a=o=void 0,a=(r=i).ownerDocument,s=r.nodeName,(c=Ve[s])||(o=a.body.appendChild(a.createElement(s)),c=ee.css(o,"display"),o.parentNode.removeChild(o),"none"===c&&(c="block"),Ve[s]=c)))):"none"!==n&&(u[l]="none",De.set(i,"display",n)));for(l=0;l<h;l++)null!=u[l]&&(e[l].style.display=u[l]);return e}ee.fn.extend({show:function(){return ze(this,!0)},hide:function(){return ze(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){qe(this)?ee(this).show():ee(this).hide()})}});var Ye=/^(?:checkbox|radio)$/i,Xe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ze=/^$|^module$|\/(?:java|ecma)script/i,Je={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Qe(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&ue(e,t)?ee.merge([e],n):n}function $e(e,t){for(var n=0,i=e.length;n<i;n++)De.set(e[n],"globalEval",!t||De.get(t[n],"globalEval"))}Je.optgroup=Je.option,Je.tbody=Je.tfoot=Je.colgroup=Je.caption=Je.thead,Je.th=Je.td;var Ke,et,tt=/<|&#?\w+;/;function nt(e,t,n,i,r){for(var o,a,s,c,u,l,h=t.createDocumentFragment(),d=[],p=0,f=e.length;p<f;p++)if((o=e[p])||0===o)if("object"===K(o))ee.merge(d,o.nodeType?[o]:o);else if(tt.test(o)){for(a=a||h.appendChild(t.createElement("div")),s=(Xe.exec(o)||["",""])[1].toLowerCase(),c=Je[s]||Je._default,a.innerHTML=c[1]+ee.htmlPrefilter(o)+c[2],l=c[0];l--;)a=a.lastChild;ee.merge(d,a.childNodes),(a=h.firstChild).textContent=""}else d.push(t.createTextNode(o));for(h.textContent="",p=0;o=d[p++];)if(i&&-1<ee.inArray(o,i))r&&r.push(o);else if(u=Ge(o),a=Qe(h.appendChild(o),"script"),u&&$e(a),n)for(l=0;o=a[l++];)Ze.test(o.type||"")&&n.push(o);return h}Ke=H.createDocumentFragment().appendChild(H.createElement("div")),(et=H.createElement("input")).setAttribute("type","radio"),et.setAttribute("checked","checked"),et.setAttribute("name","t"),Ke.appendChild(et),Z.checkClone=Ke.cloneNode(!0).cloneNode(!0).lastChild.checked,Ke.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!Ke.cloneNode(!0).lastChild.defaultValue;var it=/^key/,rt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ot=/^([^.]*)(?:\.(.+)|)/;function at(){return!0}function st(){return!1}function ct(e,t){return e===function(){try{return H.activeElement}catch(e){}}()==("focus"===t)}function ut(e,t,n,i,r,o){var a,s;if("object"===M(t)){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)ut(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=st;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return ee().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=ee.guid++)),e.each(function(){ee.event.add(this,t,r,i,n)})}function lt(e,r,o){o?(De.set(e,r,!1),ee.event.add(e,r,{namespace:!1,handler:function(e){var t,n,i=De.get(this,r);if(1&e.isTrigger&&this[r]){if(i.length)(ee.event.special[r]||{}).delegateType&&e.stopPropagation();else if(i=G.call(arguments),De.set(this,r,i),t=o(this,r),this[r](),i!==(n=De.get(this,r))||t?De.set(this,r,!1):n={},i!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else i.length&&(De.set(this,r,{value:ee.event.trigger(ee.extend(i[0],ee.Event.prototype),i.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===De.get(e,r)&&ee.event.add(e,r,at)}ee.event={global:{},add:function(t,e,n,i,r){var o,a,s,c,u,l,h,d,p,f,v,g=De.get(t);if(g)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&ee.find.matchesSelector(Be,r),n.guid||(n.guid=ee.guid++),(c=g.events)||(c=g.events={}),(a=g.handle)||(a=g.handle=function(e){return void 0!==ee&&ee.event.triggered!==e.type?ee.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(me)||[""]).length;u--;)p=v=(s=ot.exec(e[u])||[])[1],f=(s[2]||"").split(".").sort(),p&&(h=ee.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=ee.event.special[p]||{},l=ee.extend({type:p,origType:v,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&ee.expr.match.needsContext.test(r),namespace:f.join(".")},o),(d=c[p])||((d=c[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,f,a)||t.addEventListener&&t.addEventListener(p,a)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,l):d.push(l),ee.event.global[p]=!0)},remove:function(e,t,n,i,r){var o,a,s,c,u,l,h,d,p,f,v,g=De.hasData(e)&&De.get(e);if(g&&(c=g.events)){for(u=(t=(t||"").match(me)||[""]).length;u--;)if(p=v=(s=ot.exec(t[u])||[])[1],f=(s[2]||"").split(".").sort(),p){for(h=ee.event.special[p]||{},d=c[p=(i?h.delegateType:h.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)".concat(f.join("\\.(?:.*\\.|)"),"(\\.|$)")),a=o=d.length;o--;)l=d[o],!r&&v!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||i&&i!==l.selector&&("**"!==i||!l.selector)||(d.splice(o,1),l.selector&&d.delegateCount--,h.remove&&h.remove.call(e,l));a&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,f,g.handle)||ee.removeEvent(e,p,g.handle),delete c[p])}else for(p in c)ee.event.remove(e,p+t[u],n,i,!0);ee.isEmptyObject(c)&&De.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,o,a,s=ee.event.fix(e),c=new Array(arguments.length),u=(De.get(this,"events")||{})[s.type]||[],l=ee.event.special[s.type]||{};for(c[0]=s,t=1;t<arguments.length;t++)c[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(a=ee.event.handlers.call(this,s,u),t=0;(r=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(i=((ee.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,c))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,i,r,o,a,s=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&1<=e.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],a={},n=0;n<c;n++)i=t[n],void 0===a[r="".concat(i.selector," ")]&&(a[r]=i.needsContext?-1<ee(r,this).index(u):ee.find(r,this,null,[u]).length),a[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return u=this,c<t.length&&s.push({elem:u,handlers:t.slice(c)}),s},addProp:function(t,e){Object.defineProperty(ee.Event.prototype,t,{enumerable:!0,configurable:!0,get:J(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[ee.expando]?e:new ee.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Ye.test(t.type)&&t.click&&ue(t,"input")&&lt(t,"click",at),!1},trigger:function(e){var t=this||e;return Ye.test(t.type)&&t.click&&ue(t,"input")&&lt(t,"click"),!0},_default:function(e){var t=e.target;return Ye.test(t.type)&&t.click&&ue(t,"input")&&De.get(t,"click")||ue(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ee.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ee.Event=function(e,t){if(!(this instanceof ee.Event))return new ee.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?at:st,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ee.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ee.expando]=!0},ee.Event.prototype={constructor:ee.Event,isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=at,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=at,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=at,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ee.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&it.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&rt.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ee.event.addProp),ee.each({focus:"focusin",blur:"focusout"},function(e,t){ee.event.special[e]={setup:function(){return lt(this,e,ct),!1},trigger:function(){return lt(this,e),!0},delegateType:t}}),ee.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){ee.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||ee.contains(this,n))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=r),t}}}),ee.fn.extend({on:function(e,t,n,i){return ut(this,e,t,n,i)},one:function(e,t,n,i){return ut(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ee(e.delegateTarget).off(i.namespace?"".concat(i.origType,".").concat(i.namespace):i.origType,i.selector,i.handler),this;if("object"!==M(e))return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=st),this.each(function(){ee.event.remove(this,e,n,t)});for(r in e)this.off(r,t,e[r]);return this}});var ht=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,dt=/<script|<style|<link/i,pt=/checked\s*(?:[^=]|=\s*.checked.)/i,ft=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function vt(e,t){return ue(e,"table")&&ue(11!==t.nodeType?t:t.firstChild,"tr")&&ee(e).children("tbody")[0]||e}function gt(e){return e.type="".concat(null!==e.getAttribute("type"),"/").concat(e.type),e}function mt(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function yt(e,t){var n,i,r,o,a,s,c,u;if(1===t.nodeType){if(De.hasData(e)&&(o=De.access(e),a=De.set(t,o),u=o.events))for(r in delete a.handle,a.events={},u)for(n=0,i=u[r].length;n<i;n++)ee.event.add(t,r,u[r][n]);Ne.hasData(e)&&(s=Ne.access(e),c=ee.extend({},s),Ne.set(t,c))}}function wt(n,i,r,o){var e,t,a,s,c,u;i=U.apply([],i);var l=0,h=n.length,d=h-1,p=i[0],f=J(p);if(f||1<h&&"string"==typeof p&&!Z.checkClone&&pt.test(p))return n.each(function(e){var t=n.eq(e);f&&(i[0]=p.call(this,e,t.html())),wt(t,i,r,o)});if(h&&(t=(e=nt(i,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=ee.map(Qe(e,"script"),gt)).length;l<h;l++)c=e,l!==d&&(c=ee.clone(c,!0,!0),s&&ee.merge(a,Qe(c,"script"))),r.call(n[l],c,l);if(s)for(u=a[a.length-1].ownerDocument,ee.map(a,mt),l=0;l<s;l++)c=a[l],Ze.test(c.type||"")&&!De.access(c,"globalEval")&&ee.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?ee._evalUrl&&!c.noModule&&ee._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")}):$(c.textContent.replace(ft,""),c,u))}return n}function bt(e,t,n){for(var i,r=t?ee.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||ee.cleanData(Qe(i)),i.parentNode&&(n&&Ge(i)&&$e(Qe(i,"script")),i.parentNode.removeChild(i));return e}ee.extend({htmlPrefilter:function(e){return e.replace(ht,"<$1></$2>")},clone:function(e,t,n){var i,r,o,a,s,c,u,l=e.cloneNode(!0),h=Ge(e);if(!(Z.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ee.isXMLDoc(e)))for(a=Qe(l),i=0,r=(o=Qe(e)).length;i<r;i++)s=o[i],c=a[i],"input"===(u=c.nodeName.toLowerCase())&&Ye.test(s.type)?c.checked=s.checked:"input"!==u&&"textarea"!==u||(c.defaultValue=s.defaultValue);if(t)if(n)for(o=o||Qe(e),a=a||Qe(l),i=0,r=o.length;i<r;i++)yt(o[i],a[i]);else yt(e,l);return 0<(a=Qe(l,"script")).length&&$e(a,!h&&Qe(e,"script")),l},cleanData:function(e){for(var t,n,i,r=ee.event.special,o=0;void 0!==(n=e[o]);o++)if(Ae(n)){if(t=n[De.expando]){if(t.events)for(i in t.events)r[i]?ee.event.remove(n,i):ee.removeEvent(n,i,t.handle);n[De.expando]=void 0}n[Ne.expando]&&(n[Ne.expando]=void 0)}}}),ee.fn.extend({detach:function(e){return bt(this,e,!0)},remove:function(e){return bt(this,e)},text:function(e){return _e(this,function(e){return void 0===e?ee.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return wt(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||vt(this,e).appendChild(e)})},prepend:function(){return wt(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=vt(this,e)).insertBefore(e,t.firstChild)})},before:function(){return wt(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return wt(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ee.cleanData(Qe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ee.clone(this,e,t)})},html:function(e){return _e(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!dt.test(e)&&!Je[(Xe.exec(e)||["",""])[1].toLowerCase()]){e=ee.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(ee.cleanData(Qe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return wt(this,arguments,function(e){var t=this.parentNode;ee.inArray(this,n)<0&&(ee.cleanData(Qe(this)),t&&t.replaceChild(e,this))},n)}}),ee.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){ee.fn[e]=function(e){for(var t,n=[],i=ee(e),r=i.length-1,o=0;o<=r;o++)t=o===r?this:this.clone(!0),ee(i[o])[a](t),F.apply(n,t.get());return this.pushStack(n)}});var Ct,xt,kt,_t,Et,Tt,St,Mt=new RegExp("^(".concat(Ie,")(?!px)[a-z%]+$"),"i"),At=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=window),t.getComputedStyle(e)},Pt=new RegExp(He.join("|"),"i");function Dt(){var e;St&&(Tt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",St.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Be.appendChild(Tt).appendChild(St),e=window.getComputedStyle(St),Ct="1%"!==e.top,Et=12===Nt(e.marginLeft),St.style.right="60%",_t=36===Nt(e.right),xt=36===Nt(e.width),St.style.position="absolute",kt=12===Nt(St.offsetWidth/3),Be.removeChild(Tt),St=null)}function Nt(e){return Math.round(parseFloat(e))}function Ot(e,t,n){var i,r,o,a,s=e.style;return(n=n||At(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||Ge(e)||(a=ee.style(e,t)),!Z.pixelBoxStyles()&&Mt.test(a)&&Pt.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?"".concat(a):a}function Lt(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}Tt=H.createElement("div"),(St=H.createElement("div")).style&&(St.style.backgroundClip="content-box",St.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===St.style.backgroundClip,ee.extend(Z,{boxSizingReliable:function(){return Dt(),xt},pixelBoxStyles:function(){return Dt(),_t},pixelPosition:function(){return Dt(),Ct},reliableMarginLeft:function(){return Dt(),Et},scrollboxSize:function(){return Dt(),kt}}));var Rt=["Webkit","Moz","ms"],It=H.createElement("div").style,jt={};function Ht(e){var t=ee.cssProps[e]||jt[e];return t||(e in It?e:jt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Rt.length;n--;)if((e=Rt[n]+t)in It)return e}(e)||e)}var Bt,Gt,Ut=/^(none|table(?!-c[ea]).+)/,Ft=/^--/,qt={position:"absolute",visibility:"hidden",display:"block"},Wt={letterSpacing:"0",fontWeight:"400"};function Vt(e,t,n){var i=je.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function zt(e,t,n,i,r,o){var a="width"===t?1:0,s=0,c=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(c+=ee.css(e,n+He[a],!0,r)),i?("content"===n&&(c-=ee.css(e,"padding".concat(He[a]),!0,r)),"margin"!==n&&(c-=ee.css(e,"border".concat(He[a],"Width"),!0,r))):(c+=ee.css(e,"padding".concat(He[a]),!0,r),"padding"!==n?c+=ee.css(e,"border".concat(He[a],"Width"),!0,r):s+=ee.css(e,"border".concat(He[a],"Width"),!0,r));return!i&&0<=o&&(c+=Math.max(0,Math.ceil(e["offset".concat(t[0].toUpperCase()).concat(t.slice(1))]-o-c-s-.5))||0),c}function Yt(e,t,n){var i=At(e),r=(!Z.boxSizingReliable()||n)&&"border-box"===ee.css(e,"boxSizing",!1,i),o=r,a=Ot(e,t,i),s="offset".concat(t[0].toUpperCase()).concat(t.slice(1));if(Mt.test(a)){if(!n)return a;a="auto"}return(!Z.boxSizingReliable()&&r||"auto"===a||!parseFloat(a)&&"inline"===ee.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===ee.css(e,"boxSizing",!1,i),(o=s in e)&&(a=e[s])),a=parseFloat(a)||0,"".concat(a+zt(e,t,n||(r?"border":"content"),o,i,a),"px")}function Xt(e,t,n,i,r){return new Xt.prototype.init(e,t,n,i,r)}ee.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ot(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=Me(t),c=Ft.test(t),u=e.style;if(c||(t=Ht(s)),a=ee.cssHooks[t]||ee.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:u[t];"string"===(o=M(n))&&(r=je.exec(n))&&r[1]&&(n=We(e,t,r),o="number"),null!=n&&n==n&&("number"!==o||c||(n+=r&&r[3]||(ee.cssNumber[s]?"":"px")),Z.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(c?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,i){var r,o,a,s=Me(t);return Ft.test(t)||(t=Ht(s)),(a=ee.cssHooks[t]||ee.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=Ot(e,t,i)),"normal"===r&&t in Wt&&(r=Wt[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),ee.each(["height","width"],function(e,c){ee.cssHooks[c]={get:function(e,t,n){if(t)return!Ut.test(ee.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Yt(e,c,n):Fe(e,qt,function(){return Yt(e,c,n)})},set:function(e,t,n){var i,r=At(e),o=!Z.scrollboxSize()&&"absolute"===r.position,a=(o||n)&&"border-box"===ee.css(e,"boxSizing",!1,r),s=n?zt(e,c,n,a,r):0;return a&&o&&(s-=Math.ceil(e["offset".concat(c[0].toUpperCase()).concat(c.slice(1))]-parseFloat(r[c])-zt(e,c,"border",!1,r)-.5)),s&&(i=je.exec(t))&&"px"!==(i[3]||"px")&&(e.style[c]=t,t=ee.css(e,c)),Vt(0,t,s)}}}),ee.cssHooks.marginLeft=Lt(Z.reliableMarginLeft,function(e,t){if(t)return"".concat(parseFloat(Ot(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}),"px")}),ee.each({margin:"",padding:"",border:"Width"},function(r,o){ee.cssHooks[r+o]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[r+He[t]+o]=i[t]||i[t-2]||i[0];return n}},"margin"!==r&&(ee.cssHooks[r+o].set=Vt)}),ee.fn.extend({css:function(e,t){return _e(this,function(e,t,n){var i,r,o={},a=0;if(Array.isArray(t)){for(i=At(e),r=t.length;a<r;a++)o[t[a]]=ee.css(e,t[a],!1,i);return o}return void 0!==n?ee.style(e,t,n):ee.css(e,t)},e,t,1<arguments.length)}}),(ee.Tween=Xt).prototype={constructor:Xt,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||ee.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(ee.cssNumber[n]?"":"px")},cur:function(){var e=Xt.propHooks[this.prop];return e&&e.get?e.get(this):Xt.propHooks._default.get(this)},run:function(e){var t,n=Xt.propHooks[this.prop];return this.options.duration?this.pos=t=ee.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Xt.propHooks._default.set(this),this}},Xt.prototype.init.prototype=Xt.prototype,Xt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ee.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){ee.fx.step[e.prop]?ee.fx.step[e.prop](e):1!==e.elem.nodeType||!ee.cssHooks[e.prop]&&null==e.elem.style[Ht(e.prop)]?e.elem[e.prop]=e.now:ee.style(e.elem,e.prop,e.now+e.unit)}}},Xt.propHooks.scrollTop=Xt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ee.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ee.fx=Xt.prototype.init,ee.fx.step={};var Zt,Jt,Qt,$t=/^(?:toggle|show|hide)$/,Kt=/queueHooks$/;function en(){Gt&&(!1===H.hidden&&window.requestAnimationFrame?window.requestAnimationFrame(en):window.setTimeout(en,ee.fx.interval),ee.fx.tick())}function tn(){return window.setTimeout(function(){Bt=void 0}),Bt=Date.now()}function nn(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)n=He[i],r["margin".concat(n)]=r["padding".concat(n)]=e;return t&&(r.opacity=r.width=e),r}function rn(e,t,n){for(var i,r=(on.tweeners[t]||[]).concat(on.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function on(o,e,t){var n,a,i=0,r=on.prefilters.length,s=ee.Deferred().always(function(){delete c.elem}),c=function(){if(a)return!1;for(var e=Bt||tn(),t=Math.max(0,u.startTime+u.duration-e),n=1-(t/u.duration||0),i=0,r=u.tweens.length;i<r;i++)u.tweens[i].run(n);return s.notifyWith(o,[u,n,t]),n<1&&r?t:(r||s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u]),!1)},u=s.promise({elem:o,props:ee.extend({},e),opts:ee.extend(!0,{specialEasing:{},easing:ee.easing._default},t),originalProperties:e,originalOptions:t,startTime:Bt||tn(),duration:t.duration,tweens:[],createTween:function(e,t){var n=ee.Tween(o,u.opts,e,t,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var t=0,n=e?u.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)u.tweens[t].run(1);return e?(s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u,e])):s.rejectWith(o,[u,e]),this}}),l=u.props;for(!function(e,t){var n,i,r,o,a;for(n in e)if(r=t[i=Me(n)],o=e[n],Array.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(a=ee.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete e[i],o)n in e||(e[n]=o[n],t[n]=r);else t[i]=r}(l,u.opts.specialEasing);i<r;i++)if(n=on.prefilters[i].call(u,o,l,u.opts))return J(n.stop)&&(ee._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return ee.map(l,rn,u),J(u.opts.start)&&u.opts.start.call(o,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),ee.fx.timer(ee.extend(c,{elem:o,anim:u,queue:u.opts.queue})),u}ee.Animation=ee.extend(on,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return We(n.elem,e,je.exec(t),n),n}]},tweener:function(e,t){for(var n,i=0,r=(e=J(e)?(t=e,["*"]):e.match(me)).length;i<r;i++)n=e[i],on.tweeners[n]=on.tweeners[n]||[],on.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,o,a,s,c,u,l,h="width"in t||"height"in t,d=this,p={},f=e.style,v=e.nodeType&&qe(e),g=De.get(e,"fxshow");for(i in n.queue||(null==(a=ee._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,ee.queue(e,"fx").length||a.empty.fire()})})),t)if(r=t[i],$t.test(r)){if(delete t[i],o=o||"toggle"===r,r===(v?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;v=!0}p[i]=g&&g[i]||ee.style(e,i)}if((c=!ee.isEmptyObject(t))||!ee.isEmptyObject(p))for(i in h&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=g&&g.display)&&(u=De.get(e,"display")),"none"===(l=ee.css(e,"display"))&&(u?l=u:(ze([e],!0),u=e.style.display||u,l=ee.css(e,"display"),ze([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===ee.css(e,"float")&&(c||(d.done(function(){f.display=u}),null==u&&(l=f.display,u="none"===l?"":l)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),c=!1,p)c||(g?"hidden"in g&&(v=g.hidden):g=De.access(e,"fxshow",{display:u}),o&&(g.hidden=!v),v&&ze([e],!0),d.done(function(){for(i in v||ze([e]),De.remove(e,"fxshow"),p)ee.style(e,i,p[i])})),c=rn(v?g[i]:0,i,d),i in g||(g[i]=c.start,v&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?on.prefilters.unshift(e):on.prefilters.push(e)}}),ee.speed=function(e,t,n){var i=e&&"object"===M(e)?ee.extend({},e):{complete:n||!n&&t||J(e)&&e,duration:e,easing:n&&t||t&&!J(t)&&t};return ee.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in ee.fx.speeds?i.duration=ee.fx.speeds[i.duration]:i.duration=ee.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){J(i.old)&&i.old.call(this),i.queue&&ee.dequeue(this,i.queue)},i},ee.fn.extend({fadeTo:function(e,t,n,i){return this.filter(qe).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){function r(){var e=on(this,ee.extend({},t),a);(o||De.get(this,"finish"))&&e.stop(!0)}var o=ee.isEmptyObject(t),a=ee.speed(e,n,i);return r.finish=r,o||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(r,e,o){function a(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof r&&(o=e,e=r,r=void 0),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&"".concat(r,"queueHooks"),n=ee.timers,i=De.get(this);if(t)i[t]&&i[t].stop&&a(i[t]);else for(t in i)i[t]&&i[t].stop&&Kt.test(t)&&a(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=r&&n[t].queue!==r||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||ee.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=De.get(this),n=t["".concat(a,"queue")],i=t["".concat(a,"queueHooks")],r=ee.timers,o=n?n.length:0;for(t.finish=!0,ee.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===a&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),ee.each(["toggle","show","hide"],function(e,i){var r=ee.fn[i];ee.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(nn(i,!0),e,t,n)}}),ee.each({slideDown:nn("show"),slideUp:nn("hide"),slideToggle:nn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){ee.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),ee.timers=[],ee.fx.tick=function(){var e,t=0,n=ee.timers;for(Bt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ee.fx.stop(),Bt=void 0},ee.fx.timer=function(e){ee.timers.push(e),ee.fx.start()},ee.fx.interval=13,ee.fx.start=function(){Gt||(Gt=!0,en())},ee.fx.stop=function(){Gt=null},ee.fx.speeds={slow:600,fast:200,_default:400},ee.fn.delay=function(i,e){return i=ee.fx&&ee.fx.speeds[i]||i,e=e||"fx",this.queue(e,function(e,t){var n=window.setTimeout(e,i);t.stop=function(){window.clearTimeout(n)}})},Zt=H.createElement("input"),Jt=H.createElement("select").appendChild(H.createElement("option")),Zt.type="checkbox",Z.checkOn=""!==Zt.value,Z.optSelected=Jt.selected,(Zt=H.createElement("input")).value="t",Zt.type="radio",Z.radioValue="t"===Zt.value;var an=ee.expr.attrHandle;ee.fn.extend({attr:function(e,t){return _e(this,ee.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ee.removeAttr(this,e)})}}),ee.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?ee.prop(e,t,n):(1===o&&ee.isXMLDoc(e)||(r=ee.attrHooks[t.toLowerCase()]||(ee.expr.match.bool.test(t)?Qt:void 0)),void 0!==n?null===n?void ee.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,"".concat(n)),n):!(r&&"get"in r&&null!==(i=r.get(e,t)))&&null==(i=ee.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!Z.radioValue&&"radio"===t&&ue(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(me);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),Qt={set:function(e,t,n){return!1===t?ee.removeAttr(e,n):e.setAttribute(n,n),n}},ee.each(ee.expr.match.bool.source.match(/\w+/g),function(e,t){var a=an[t]||ee.find.attr;an[t]=function(e,t,n){var i,r,o=t.toLowerCase();return n||(r=an[o],an[o]=i,i=null!=a(e,t,n)?o:null,an[o]=r),i}});var sn=/^(?:input|select|textarea|button)$/i,cn=/^(?:a|area)$/i;function un(e){return(e.match(me)||[]).join(" ")}function ln(e){return e.getAttribute&&e.getAttribute("class")||""}function hn(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(me)||[]}ee.fn.extend({prop:function(e,t){return _e(this,ee.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ee.propFix[e]||e]})}}),ee.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ee.isXMLDoc(e)||(t=ee.propFix[t]||t,r=ee.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=ee.find.attr(e,"tabindex");return t?parseInt(t,10):sn.test(e.nodeName)||cn.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Z.optSelected||(ee.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ee.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ee.propFix[this.toLowerCase()]=this}),ee.fn.extend({addClass:function(t){var e,n,i,r,o,a,s,c=0;if(J(t))return this.each(function(e){ee(this).addClass(t.call(this,e,ln(this)))});if((e=hn(t)).length)for(;n=this[c++];)if(r=ln(n),i=1===n.nodeType&&" ".concat(un(r)," ")){for(a=0;o=e[a++];)i.indexOf(" ".concat(o," "))<0&&(i+="".concat(o," "));r!==(s=un(i))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,r,o,a,s,c=0;if(J(t))return this.each(function(e){ee(this).removeClass(t.call(this,e,ln(this)))});if(!arguments.length)return this.attr("class","");if((e=hn(t)).length)for(;n=this[c++];)if(r=ln(n),i=1===n.nodeType&&" ".concat(un(r)," ")){for(a=0;o=e[a++];)for(;-1<i.indexOf(" ".concat(o," "));)i=i.replace(" ".concat(o," ")," ");r!==(s=un(i))&&n.setAttribute("class",s)}return this},toggleClass:function(r,t){var o=M(r),a="string"===o||Array.isArray(r);return"boolean"==typeof t&&a?t?this.addClass(r):this.removeClass(r):J(r)?this.each(function(e){ee(this).toggleClass(r.call(this,e,ln(this),t),t)}):this.each(function(){var e,t,n,i;if(a)for(t=0,n=ee(this),i=hn(r);e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==r&&"boolean"!==o||((e=ln(this))&&De.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==r&&De.get(this,"__className__")||""))})},hasClass:function(e){for(var t,n=0,i=" ".concat(e," ");t=this[n++];)if(1===t.nodeType&&-1<" ".concat(un(ln(t))," ").indexOf(i))return!0;return!1}});var dn=/\r/g;ee.fn.extend({val:function(n){var i,e,r,t=this[0];return arguments.length?(r=J(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?n.call(this,e,ee(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=ee.map(t,function(e){return null==e?"":"".concat(e)})),(i=ee.valHooks[this.type]||ee.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,t,"value")||(this.value=t))})):t?(i=ee.valHooks[t.type]||ee.valHooks[t.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(dn,""):null==e?"":e:void 0}}),ee.extend({valHooks:{option:{get:function(e){var t=ee.find.attr(e,"value");return null!=t?t:un(ee.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type,a=o?null:[],s=o?r+1:i.length,c=r<0?s:o?r:0;c<s;c++)if(((n=i[c]).selected||c===r)&&!n.disabled&&(!n.parentNode.disabled||!ue(n.parentNode,"optgroup"))){if(t=ee(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=ee.makeArray(t),a=r.length;a--;)((i=r[a]).selected=-1<ee.inArray(ee.valHooks.option.get(i),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ee.each(["radio","checkbox"],function(){ee.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ee.inArray(ee(e).val(),t)}},Z.checkOn||(ee.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.focusin="onfocusin"in window;function pn(e){e.stopPropagation()}var fn=/^(?:focusinfocus|focusoutblur)$/;ee.extend(ee.event,{trigger:function(e,t,n,i){var r,o,a,s,c,u,l,h=[n||H],d=z.call(e,"type")?e.type:e,p=z.call(e,"namespace")?e.namespace.split("."):[],f=l=o=n=n||H;if(3!==n.nodeType&&8!==n.nodeType&&!fn.test(d+ee.event.triggered)&&(-1<d.indexOf(".")&&(d=(p=d.split(".")).shift(),p.sort()),s=d.indexOf(":")<0&&"on".concat(d),(e=e[ee.expando]?e:new ee.Event(d,"object"===M(e)&&e)).isTrigger=i?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)".concat(p.join("\\.(?:.*\\.|)"),"(\\.|$)")):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:ee.makeArray(t,[e]),u=ee.event.special[d]||{},i||!u.trigger||!1!==u.trigger.apply(n,t))){if(!i&&!u.noBubble&&!I(n)){for(a=u.delegateType||d,fn.test(a+d)||(f=f.parentNode);f;f=f.parentNode)h.push(f),o=f;o===(n.ownerDocument||H)&&h.push(o.defaultView||o.parentWindow||window)}for(r=0;(f=h[r++])&&!e.isPropagationStopped();)l=f,e.type=1<r?a:u.bindType||d,(c=(De.get(f,"events")||{})[e.type]&&De.get(f,"handle"))&&c.apply(f,t),(c=s&&f[s])&&c.apply&&Ae(f)&&(e.result=c.apply(f,t),!1===e.result&&e.preventDefault());return e.type=d,i||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(h.pop(),t)||!Ae(n)||s&&J(n[d])&&!I(n)&&((o=n[s])&&(n[s]=null),ee.event.triggered=d,e.isPropagationStopped()&&l.addEventListener(d,pn),n[d](),e.isPropagationStopped()&&l.removeEventListener(d,pn),ee.event.triggered=void 0,o&&(n[s]=o)),e.result}},simulate:function(e,t,n){var i=ee.extend(new ee.Event,n,{type:e,isSimulated:!0});ee.event.trigger(i,null,t)}}),ee.fn.extend({trigger:function(e,t){return this.each(function(){ee.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ee.event.trigger(e,t,n,!0)}}),Z.focusin||ee.each({focus:"focusin",blur:"focusout"},function(n,i){function r(e){ee.event.simulate(i,e.target,ee.event.fix(e))}ee.event.special[i]={setup:function(){var e=this.ownerDocument||this,t=De.access(e,i);t||e.addEventListener(n,r,!0),De.access(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=De.access(e,i)-1;t?De.access(e,i,t):(e.removeEventListener(n,r,!0),De.remove(e,i))}}});var vn=window.location,gn=Date.now(),mn=/\?/;ee.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new window.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||ee.error("Invalid XML: ".concat(e)),t};var yn=/\[\]$/,wn=/\r?\n/g,bn=/^(?:submit|button|image|reset|file)$/i,Cn=/^(?:input|select|textarea|keygen)/i;function xn(n,e,i,r){var t;if(Array.isArray(e))ee.each(e,function(e,t){i||yn.test(n)?r(n,t):xn("".concat(n,"[").concat("object"===M(t)&&null!=t?e:"","]"),t,i,r)});else if(i||"object"!==K(e))r(n,e);else for(t in e)xn("".concat(n,"[").concat(t,"]"),e[t],i,r)}ee.param=function(e,t){function n(e,t){var n=J(t)?t():t;r[r.length]="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(null==n?"":n))}var i,r=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!ee.isPlainObject(e))ee.each(e,function(){n(this.name,this.value)});else for(i in e)xn(i,e[i],t,n);return r.join("&")},ee.fn.extend({serialize:function(){return ee.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ee.prop(this,"elements");return e?ee.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ee(this).is(":disabled")&&Cn.test(this.nodeName)&&!bn.test(e)&&(this.checked||!Ye.test(e))}).map(function(e,t){var n=ee(this).val();return null==n?null:Array.isArray(n)?ee.map(n,function(e){return{name:t.name,value:e.replace(wn,"\r\n")}}):{name:t.name,value:n.replace(wn,"\r\n")}}).get()}});var kn=/%20/g,_n=/#.*$/,En=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)$/gm,Sn=/^(?:GET|HEAD)$/,Mn=/^\/\//,An={},Pn={},Dn="*/".concat("*"),Nn=H.createElement("a");function On(o){return function(e,t){var n;"string"!=typeof e&&(t=e,e="*");var i=0,r=e.toLowerCase().match(me)||[];if(J(t))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Ln(t,r,o,a){var s={},c=t===Pn;function u(e){var i;return s[e]=!0,ee.each(t[e]||[],function(e,t){var n=t(r,o,a);return"string"!=typeof n||c||s[n]?c?!(i=n):void 0:(r.dataTypes.unshift(n),u(n),!1)}),i}return u(r.dataTypes[0])||!s["*"]&&u("*")}function Rn(e,t){var n,i,r=ee.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i=i||{})[n]=t[n]);return i&&ee.extend(!0,e,i),e}Nn.href=vn.href,ee.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(vn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ee.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Rn(Rn(e,ee.ajaxSettings),t):Rn(ee.ajaxSettings,e)},ajaxPrefilter:On(An),ajaxTransport:On(Pn),ajax:function(e,t){var l,h,d,n,p,i,f,v,r,o;"object"===M(e)&&(t=e,e=void 0),t=t||{};var g=ee.ajaxSetup({},t),m=g.context||g,y=g.context&&(m.nodeType||m.jquery)?ee(m):ee.event,w=ee.Deferred(),b=ee.Callbacks("once memory"),C=g.statusCode||{},a={},s={},c="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(f){if(!n)for(n={};t=Tn.exec(d);)n["".concat(t[1].toLowerCase()," ")]=(n["".concat(t[1].toLowerCase()," ")]||[]).concat(t[2]);t=n["".concat(e.toLowerCase()," ")]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return f?d:null},setRequestHeader:function(e,t){return null==f&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==f&&(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(f)x.always(e[x.status]);else for(t in e)C[t]=[C[t],e[t]];return this},abort:function(e){var t=e||c;return l&&l.abort(t),u(0,t),this}};if(w.promise(x),g.url="".concat(e||g.url||vn.href).replace(Mn,"".concat(vn.protocol,"//")),g.type=t.method||t.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(me)||[""],null==g.crossDomain){i=H.createElement("a");try{i.href=g.url,i.href=i.href,g.crossDomain="".concat(Nn.protocol,"//").concat(Nn.host)!=="".concat(i.protocol,"//").concat(i.host)}catch(e){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=ee.param(g.data,g.traditional)),Ln(An,g,t,x),f)return x;for(r in(v=ee.event&&g.global)&&0==ee.active++&&ee.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Sn.test(g.type),h=g.url.replace(_n,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(kn,"+")):(o=g.url.slice(h.length),g.data&&(g.processData||"string"==typeof g.data)&&(h+=(mn.test(h)?"&":"?")+g.data,delete g.data),!1===g.cache&&(h=h.replace(En,"$1"),o="".concat(mn.test(h)?"&":"?","_=").concat(gn++).concat(o)),g.url=h+o),g.ifModified&&(ee.lastModified[h]&&x.setRequestHeader("If-Modified-Since",ee.lastModified[h]),ee.etag[h]&&x.setRequestHeader("If-None-Match",ee.etag[h])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&x.setRequestHeader("Content-Type",g.contentType),x.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", ".concat(Dn,"; q=0.01"):""):g.accepts["*"]),g.headers)x.setRequestHeader(r,g.headers[r]);if(g.beforeSend&&(!1===g.beforeSend.call(m,x,g)||f))return x.abort();if(c="abort",b.add(g.complete),x.done(g.success),x.fail(g.error),l=Ln(Pn,g,t,x)){if(x.readyState=1,v&&y.trigger("ajaxSend",[x,g]),f)return x;g.async&&0<g.timeout&&(p=window.setTimeout(function(){x.abort("timeout")},g.timeout));try{f=!1,l.send(a,u)}catch(e){if(f)throw e;u(-1,e)}}else u(-1,"No Transport");function u(e,t,n,i){var r,o,a,s,c,u=t;f||(f=!0,p&&window.clearTimeout(p),l=void 0,d=i||"",x.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(s=function(e,t,n){for(var i,r,o,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){c.unshift(r);break}if(c[0]in n)o=c[0];else{for(r in n){if(!c[0]||e.converters["".concat(r," ").concat(c[0])]){o=r;break}a=a||r}o=o||a}if(o)return o!==c[0]&&c.unshift(o),n[o]}(g,x,n)),s=function(e,t,n,i){var r,o,a,s,c,u={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=l.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(a=u["".concat(c," ").concat(o)]||u["* ".concat(o)]))for(r in u)if((s=r.split(" "))[1]===o&&(a=u["".concat(c," ").concat(s[0])]||u["* ".concat(s[0])])){!0===a?a=u[r]:!0!==u[r]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from ".concat(c," to ").concat(o)}}}return{state:"success",data:t}}(g,s,x,r),r?(g.ifModified&&((c=x.getResponseHeader("Last-Modified"))&&(ee.lastModified[h]=c),(c=x.getResponseHeader("etag"))&&(ee.etag[h]=c)),204===e||"HEAD"===g.type?u="nocontent":304===e?u="notmodified":(u=s.state,o=s.data,r=!(a=s.error))):(a=u,!e&&u||(u="error",e<0&&(e=0))),x.status=e,x.statusText="".concat(t||u),r?w.resolveWith(m,[o,u,x]):w.rejectWith(m,[x,u,a]),x.statusCode(C),C=void 0,v&&y.trigger(r?"ajaxSuccess":"ajaxError",[x,g,r?o:a]),b.fireWith(m,[x,u]),v&&(y.trigger("ajaxComplete",[x,g]),--ee.active||ee.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,n){return ee.get(e,t,n,"json")},getScript:function(e,t){return ee.get(e,void 0,t,"script")}}),ee.each(["get","post"],function(e,r){ee[r]=function(e,t,n,i){return J(t)&&(i=i||n,n=t,t=void 0),ee.ajax(ee.extend({url:e,type:r,dataType:i,data:t,success:n},ee.isPlainObject(e)&&e))}}),ee._evalUrl=function(e,t){return ee.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){ee.globalEval(e,t)}})},ee.fn.extend({wrapAll:function(e){var t;return this[0]&&(J(e)&&(e=e.call(this[0])),t=ee(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return J(n)?this.each(function(e){ee(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ee(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=J(t);return this.each(function(e){ee(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ee(this).replaceWith(this.childNodes)}),this}}),ee.expr.pseudos.hidden=function(e){return!ee.expr.pseudos.visible(e)},ee.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ee.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var In={0:200,1223:204},jn=ee.ajaxSettings.xhr();Z.cors=!!jn&&"withCredentials"in jn,Z.ajax=jn=!!jn,ee.ajaxTransport(function(r){var o,a;if(Z.cors||jn&&!r.crossDomain)return{send:function(e,t){var n,i=r.xhr();if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)i.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===e?i.abort():"error"===e?"number"!=typeof i.status?t(0,"error"):t(i.status,i.statusText):t(In[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=o(),a=i.onerror=i.ontimeout=o("error"),void 0!==i.onabort?i.onabort=a:i.onreadystatechange=function(){4===i.readyState&&window.setTimeout(function(){o&&a()})},o=o("abort");try{i.send(r.hasContent&&r.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),ee.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ee.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ee.globalEval(e),e}}}),ee.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ee.ajaxTransport("script",function(n){var i,r;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){i=ee("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(e){i.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),H.head.appendChild(i[0])},abort:function(){r&&r()}}});var Hn,Bn=[],Gn=/(=)\?(?=&|$)|\?\?/;ee.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Bn.pop()||"".concat(ee.expando,"_").concat(gn++);return this[e]=!0,e}}),ee.ajaxPrefilter("json jsonp",function(e,t,n){var i,r,o,a=!1!==e.jsonp&&(Gn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gn.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=J(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Gn,"$1".concat(i)):!1!==e.jsonp&&(e.url+="".concat((mn.test(e.url)?"&":"?")+e.jsonp,"=").concat(i)),e.converters["script json"]=function(){return o||ee.error("".concat(i," was not called")),o[0]},e.dataTypes[0]="json",r=window[i],window[i]=function(){o=arguments},n.always(function(){void 0===r?ee(window).removeProp(i):window[i]=r,e[i]&&(e.jsonpCallback=t.jsonpCallback,Bn.push(i)),o&&J(r)&&r(o[0]),o=r=void 0}),"script"}),Z.createHTMLDocument=((Hn=H.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Hn.childNodes.length),ee.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(Z.createHTMLDocument?((i=(t=H.implementation.createHTMLDocument("")).createElement("base")).href=H.location.href,t.head.appendChild(i)):t=H),o=!n&&[],(r=he.exec(e))?[t.createElement(r[1])]:(r=nt([e],t,o),o&&o.length&&ee(o).remove(),ee.merge([],r.childNodes)));var i,r,o},ee.fn.load=function(e,t,n){var i,r,o,a=this,s=e.indexOf(" ");return-1<s&&(i=un(e.slice(s)),e=e.slice(0,s)),J(t)?(n=t,t=void 0):t&&"object"===M(t)&&(r="POST"),0<a.length&&ee.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?ee("<div>").append(ee.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ee.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ee.fn[t]=function(e){return this.on(t,e)}}),ee.expr.pseudos.animated=function(t){return ee.grep(ee.timers,function(e){return t===e.elem}).length},ee.offset={setOffset:function(e,t,n){var i,r,o,a,s,c,u=ee.css(e,"position"),l=ee(e),h={};"static"===u&&(e.style.position="relative"),s=l.offset(),o=ee.css(e,"top"),c=ee.css(e,"left"),r=("absolute"===u||"fixed"===u)&&-1<(o+c).indexOf("auto")?(a=(i=l.position()).top,i.left):(a=parseFloat(o)||0,parseFloat(c)||0),J(t)&&(t=t.call(e,n,ee.extend({},s))),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+r),"using"in t?t.using.call(e,h):l.css(h)}},ee.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ee.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===ee.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===ee.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=ee(e).offset()).top+=ee.css(e,"borderTopWidth",!0),r.left+=ee.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-ee.css(i,"marginTop",!0),left:t.left-r.left-ee.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ee.css(e,"position");)e=e.offsetParent;return e||Be})}}),ee.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var o="pageYOffset"===r;ee.fn[t]=function(e){return _e(this,function(e,t,n){var i;if(I(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===n)return i?i[r]:e[t];i?i.scrollTo(o?i.pageXOffset:n,o?n:i.pageYOffset):e[t]=n},t,e,arguments.length)}}),ee.each(["top","left"],function(e,n){ee.cssHooks[n]=Lt(Z.pixelPosition,function(e,t){if(t)return t=Ot(e,n),Mt.test(t)?"".concat(ee(e).position()[n],"px"):t})}),ee.each({Height:"height",Width:"width"},function(a,s){ee.each({padding:"inner".concat(a),content:s,"":"outer".concat(a)},function(i,o){ee.fn[o]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),r=i||(!0===e||!0===t?"margin":"border");return _e(this,function(e,t,n){var i;return I(e)?0===o.indexOf("outer")?e["inner".concat(a)]:e.document.documentElement["client".concat(a)]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll".concat(a)],i["scroll".concat(a)],e.body["offset".concat(a)],i["offset".concat(a)],i["client".concat(a)])):void 0===n?ee.css(e,t,r):ee.style(e,t,n,r)},s,n?e:void 0,n)}})}),ee.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){ee.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),ee.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ee.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),ee.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),J(e))return i=G.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(G.call(arguments)))}).guid=e.guid=e.guid||ee.guid++,r},ee.holdReady=function(e){e?ee.readyWait++:ee.ready(!0)},ee.isArray=Array.isArray,ee.parseJSON=JSON.parse,ee.nodeName=ue,ee.isFunction=J,ee.isWindow=I,ee.camelCase=Me,ee.type=K,ee.now=Date.now,ee.isNumeric=function(e){var t=ee.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))};var Un,Fn=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e;if(c(this,n),!ee(e))throw new Error("请指定要操作的元素");t=t||e,this._target=t,this._container=e;var o=this;ee(o.target).mousedown(function(e){ee(o.target).css("cursor","move");var t=ee(o.container).position(),i=e.pageX-t.left,r=e.pageY-t.top;ee(document).bind("mousemove",function(e){ee(o.target).css("cursor","move"),ee(o.container).stop();var t=e.pageX-i,n=e.pageY-r;ee(o.container).animate({left:"".concat(t,"px"),top:"".concat(n,"px")},10)})}),ee(document).mouseup(function(){ee(o.target).css("cursor","default"),ee(this).unbind("mousemove")})}return u(n,[{key:"destroy",value:function(){ee(this.target).unbind("mousedown"),this._container=void 0,this._target=void 0}},{key:"target",get:function(){return this._target},set:function(e){this._target=e}},{key:"container",get:function(){return this._container},set:function(e){this._container=e}}]),n}();function qn(){var e,t,n;Un&&Un.scene.mode===Cesium.SceneMode.SCENE3D&&(e=Cesium.Transforms.computeIcrfToFixedMatrix(Un.clock.currentTime),Cesium.defined(e)&&(t=Cesium.Cartesian3.clone(Un.camera.position),n=Cesium.Matrix4.fromRotationTranslation(e),Un.camera.lookAtTransform(n,t)))}var Wn=function(){function e(){c(this,e)}return u(e,null,[{key:"start",value:function(e,t){!function(e,t){var n=1<arguments.length&&void 0!==t?t:{multiplier:1};if(!Un&&((Un=e).scene.postUpdate.addEventListener(qn),Un.clock))for(var i=0,r=Object.keys(n);i<r.length;i++){var o=r[i];Un.clock[o]=n[o]}}(e,1<arguments.length&&void 0!==t?t:{multiplier:10})}},{key:"stop",value:function(){Un&&(Un.clock.multiplier=1,Un.scene.postUpdate.removeEventListener(qn),Un=void 0)}}]),e}();function Vn(e,t){return t-e}var zn=function(){function e(){c(this,e),this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}return u(e,[{key:"addEventListener",value:function(e,t){if("function"!=typeof e)throw new T("侦听器应该是一个函数");this._listeners.push(e),this._scopes.push(t);var n=this;return function(){n.removeEventListener(e,t)}}},{key:"removeEventListener",value:function(e,t){if("function"!=typeof e)throw new T("侦听器应该是一个函数");for(var n=this._listeners,i=this._scopes,r=-1,o=0;o<n.length;o++)if(n[o]===e&&i[o]===t){r=o;break}return-1!==r&&(this._insideRaiseEvent?(this._toRemove.push(r),n[r]=void 0,i[r]=void 0):(n.splice(r,1),i.splice(r,1)),!0)}},{key:"raiseEvent",value:function(){this._insideRaiseEvent=!0;for(var e=this._listeners,t=this._scopes,n=e.length,i=0;i<n;i++){var r=e[i];Cesium.defined(r)&&e[i].apply(t[i],arguments)}var o=this._toRemove;if(0<(n=o.length)){for(o.sort(Vn),i=0;i<n;i++){var a=o[i];e.splice(a,1),t.splice(a,1)}o.length=0}this._insideRaiseEvent=!1}},{key:"numberOfListeners",get:function(){return this._listeners.length-this._toRemove.length}}]),e}(),Yn=Cesium.Cartesian3.fromDegrees(95,30,15e6);var Xn=Cesium,Zn=Xn.defined,Jn=Xn.Cartesian2,Qn=0;var $n=Object.freeze({MARKER:0,POINT:5,POLYLINE:1,POLYGON:2,LABEL:3,MODEL:4}),Kn=Cesium.defined,ei=window.console,ti=function(){function t(e){if(c(this,t),e instanceof Cesium.Viewer==!1)throw new T("viewer不是一个有效的Cesium Viewer对象.");this.viewer=e,this._type=void 0,this._gvtype=void 0,this._gvid=void 0,this._name=void 0,this._attachment=[],this._properties={},this._createEvent=new zn,this._removeEvent=new zn,this._destroyEvent=new zn,this._editEvent=new zn,this.createEvent.raiseEvent(this)}return u(t,[{key:"zoomTo",value:function(){this.graphic&&this.viewer.flyTo(this.graphic)}},{key:"coordinates",value:function(){if(this.position instanceof Cesium.Cartesian3){var e=O.cartesian2Degrees(this.position,this.viewer);return[e.lon,e.lat,e.height]}if(this.positions instanceof Array){var t,n=[],i=C(this.positions);try{for(i.s();!(t=i.n()).done;){var r=t.value,o=O.cartesian2Degrees(r,this.viewer);n.push([o.lon,o.lat,o.height])}}catch(e){i.e(e)}finally{i.f()}return"POLYLINE"===this.type?n:[n]}}},{key:"toGeoJson",value:function(){return{type:"Feature",properties:this.properties,geometry:{type:{MARKER:"Point",POLYLINE:"LineString",POLYGON:"POLYGON",LABEL:"Point"}[this.type],coordinates:this.coordinates()}}}},{key:"createEvent",get:function(){return this._createEvent}},{key:"removeEvent",get:function(){return this._removeEvent}},{key:"editEvent",get:function(){return this._editEvent}},{key:"destroyEvent",get:function(){return this._destroyEvent}},{key:"properties",get:function(){return g(g({},{id:this.gvid,type:this.gvtype,name:this.gvname,description:this.description}),this._properties)},set:function(e){e.name&&(this.gvname=e.name),e.description&&(this.description=e.description),this._properties=e}},{key:"attachment",get:function(){return this._attachment},set:function(e){this._attachment=e}},{key:"type",get:function(){return this._type}},{key:"gvtype",get:function(){return this._gvtype},set:function(e){this._gvtype=e}},{key:"gvid",get:function(){return this._gvid},set:function(e){this._gvid=e,this.graphic&&(this.graphic.gvid=this._gvid)}},{key:"gvname",get:function(){return this._name},set:function(e){this._name=e,this.graphic&&(this.graphic.gvname=this.gvname,this.graphic.label&&(this.graphic.label.text=e))}},{key:"show",get:function(){return!!this.graphic&&this.graphic.show},set:function(e){this.graphic&&(this.graphic.show=e)}}]),t}(),ni=function(){l(a,ti);var o=v(a);function a(e,t){var n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.defaultLabelStyle;c(this,a),(n=o.call(this,e)).viewer=e,n._type="MARKER",n.gvtype=$n.MARKER,n.position=t.position,t.image=t.image||a.defaultStyle.image,i.text=t.label,n.labelOptions=i;var r=p(n);return n.options={gvname:n._name,gvtype:n.gvtype,gvid:n.gvid,position:r.position,billboard:t,label:i},n.graphic=void 0,n.name="",n.description="",n.create(),n}return u(a,[{key:"setLabel",value:function(e){if(this.graphic)for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];this.graphic.label[i]=e[i]}}},{key:"create",value:function(){this.graphic=this.viewer.entities.add(this.options)}},{key:"remove",value:function(){this.viewer&&this.viewer.entities.remove(this.graphic),this.removeEvent.raiseEvent(this),this.graphic=void 0}},{key:"updateText",value:function(e,t){this.graphic&&(this.graphic.label.text=e,this.name=e,this.description=t,this.gvname=e)}},{key:"updateImage",value:function(e){this.graphic&&(void 0===e?(this.graphic.label.pixelOffset=void 0,this.graphic.billboard.image=void 0):(this.graphic.label.pixelOffset=this.labelOptions.pixelOffset,this.graphic.billboard.image=e))}},{key:"updatePosition",value:function(e){this.position=e}},{key:"stopEdit",value:function(){this.graphic&&this.graphic.position&&(this.graphic.position=new Cesium.ConstantProperty(this.position))}},{key:"startEdit",value:function(){var e=this;this.graphic&&(this.graphic.position=new Cesium.CallbackProperty(function(){return e.position},!1))}},{key:"destroy",value:function(){this.remove(),this.destroyEvent.raiseEvent(this),this.viewer=void 0,this.options=void 0,this.position=void 0}},{key:"text",get:function(){return this.graphic.label.text},set:function(e){this.graphic.label.text=e,this.gvname=e}},{key:"font",get:function(){return this.graphic.label.font.getValue()},set:function(e){this.graphic.label.font=e}},{key:"color",get:function(){return this.graphic.label.fillColor},set:function(e){this.graphic.label.fillColor=e}}],[{key:"fromDegrees",value:function(e,t){var n=a.defaultStyle;return n.position=Cesium.Cartesian3.fromDegrees(t.lon,t.lat,t.height),new a(e,n)}},{key:"fromRadians",value:function(e,t){var n=a.defaultStyle;return n.position=Cesium.Cartesian3.fromRadians(t.lon,t.lat,t.height),new a(e,n)}}]),a}();r(ni,"defaultStyle",{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJEN0VBRDA0MzJCRTExRUE5MjY2QTg3OUVFNjUyQzhCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJEN0VBRDA1MzJCRTExRUE5MjY2QTg3OUVFNjUyQzhCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QkQ3RUFEMDIzMkJFMTFFQTkyNjZBODc5RUU2NTJDOEIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QkQ3RUFEMDMzMkJFMTFFQTkyNjZBODc5RUU2NTJDOEIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6qzlgwAAADR0lEQVR42uxXTUhUURQ+88aZ93JSZyiDCCkt+0VLtGzRn/QntotMoqBEol1Ui9JVtNCsoKJNSFgQREjRKiXF/mxToIQK2YBZIRKlaE1pb+Y5M33n+dRJfTN3ZoLZdOG7986dc75z5v6cc8YSDAYpkU2iBLeEO5AUpfxy4BCwHVgLLDTWh4B3wEvgPvBBlNAy1x1w3fP89XnkcOoyDJeBA6wTgZMJHwJnwfNpBk/0DkCpFEM9kKL6iR591qixX6OukQB9+x3QZRbNkyjXJdG+DBvtX2ojxaov/wQqwPUgZgegUIHhFss19o9TVYdK/aOBsD8/wyHRxXwFziRN7sZx8NWbOWB6CSFchKGOjZ9/q9KRtrGIxrmxDMuyjnFcdQaX+B3g7QZ6gCWXur1U2+WN6YZX5sp0Lkfm6YBxaT2iO3CKjbcP+elKtzfmJ8a6zMFcwGnRHVB4J/mJFbeM0ptBf1zvvDDdSk/2OCafagagRtqBvWy8c9gft3FuzMFcRswoFjmC3dy1DIybktqhVVugUF9pCn0EeG4PE1NDuHaJOFDA3auv5r/+Qp5CJ1bZyWW3kBPgedV62VQ+hGujiANZ3Lk95g6UZdlmrR1dYTeVD+HKFHHAyd2w+u/SdAiXS8QBXVpJMg/5DX3arLW7vZqpvGyd4lJFHOCsRuuc5reKo1yd20fffUEdPK/pVE3lc1xTXL0i6fgxsKEs02b6DH2IyJXtqg6RdjDTFsodMRAtBvq8AVJ2NP2i9z8CcZ3/6jSJXpTMJ1nSt58v+JdIR8AC1VCg21uSKdVmidk469aDQ56wUj3TeLhkxHvWCmx7jWMoez5GHi0YtfGGomTanK4XB21GENKEkhHyt2ZUP24maC120Mo08fKRZVnHMO5mLoNTvB6AwiCGnZyWs1MlegbC8mx72HqMvzuGgMSyrIPWzRwGV/RVMRQ5j2/laOpAXLi6SaEmZLb8BdZZsrzG310rVMgxEUOesq7BEXdRynG2Bjij66BrQol2o2eiVji5RqYSlGCW6UB2nesR8PjiLkpnEHCqvmM8VTJ5QeXQbzbRnyPuwoEo4QRuAv7gdPMba85o+WJxYBJ5QDPQYsxj4rH8/3OaaAf+CDAAVvn1VEy/MOwAAAAASUVORK5CYII=",verticalOrigin:Cesium.VerticalOrigin.BASELINE}),r(ni,"defaultLabelStyle",{font:"28px sans-serif",fillColor:Cesium.Color.WHITE,showBackground:!0,style:Cesium.LabelStyle.FILL_AND_OUTLINE,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(20,-30),heightReference:Cesium.HeightReference.NONE});var ii=function(){l(s,ti);var a=v(s);function s(e){var n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:s.defaultStyle;c(this,s),(n=a.call(this,e))._type="POINT",n.gvtype=$n.POINT,n.positions=i.positions;var r=p(n);if(n.positions instanceof Cesium.Cartesian3)n.options={gvname:n._name,gvid:n._gvid,gvtype:n._gvtype,position:new Cesium.CallbackProperty(function(){return r.positions},!1),point:i};else{if(!(n.positions instanceof Array))throw new Error("options参数错误.");n.options=[];for(var t=function(e){var t={gvname:n._name,gvid:n._gvid,gvtype:n._gvtype,position:new Cesium.CallbackProperty(function(){return r.positions[e]},!1),point:i};n.options.push(t)},o=0;o<n.positions.length;o++)t(o)}return n.graphic=[],n.create(),n}return u(s,[{key:"create",value:function(){var t=this;this.options instanceof Array?this.graphic=this.options.map(function(e){return t.viewer.entities.add(e)}):this.graphic=this.viewer.entities.add(this.options)}},{key:"remove",value:function(){var t=this;this.graphic instanceof Array?this.graphic.map(function(e){t.viewer.entities.remove(e)}):this.viewer.entities.remove(this.graphic),this.graphic=void 0,this.removeEvent.raiseEvent(this)}},{key:"startEdit",value:function(){var t=this;if(this.graphic instanceof Cesium.Entity)this.graphic.position=new Cesium.CallbackProperty(function(){return t.positions},!1);else if(this.graphic instanceof Array)for(var e=this.graphic.length,n=function(e){t.graphic[e].position=new Cesium.CallbackProperty(function(){return t.positions[e]},!1)},i=0;i<e;i++)n(i)}},{key:"stopEdit",value:function(){this.graphic instanceof Cesium.Entity?this.graphic.position=this.graphic.position.getValue():this.graphic instanceof Array&&(this.graphic=this.graphic.map(function(e){return e.position=e.position.getValue()}))}},{key:"contain",value:function(e){if(this.graphic instanceof Cesium.Cartesian3)return this.graphic===e;if(this.graphic instanceof Array)for(var t=this.graphic.length,n=0;n<t;n++)if(this.graphic[n]===e)return n;return-1}},{key:"destroy",value:function(){this.remove(),this.destroyEvent.raiseEvent(this),this.viewer=void 0,this.options=void 0,this.graphic=void 0}}],[{key:"equalPosition",value:function(e,t){if(!(e instanceof Cesium.Cartesian3&&t instanceof Cesium.Cartesian3))throw new Error("node不是一个有效的Cartesian3对象");return e.x===t.x&&e.y===t.y&&e.z===t.z}},{key:"setStyle",value:function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];e.point[r]=t[r]}}},{key:"fromDegrees",value:function(e,t){var n=s.defaultStyle;if(t instanceof Array)n.positions=t.map(function(e){if(void 0===e.lon||void 0===e.lat)throw new Error("参数错误");return Cesium.Cartesian3.fromDegrees(e.lon,e.lat,e.height)});else{if(void 0===t.lon||void 0===t.lat)throw new Error("参数错误");n.positions=Cesium.Cartesian3.fromDegrees(t.lon,t.lat,t.height)}return new s(e,n)}},{key:"fromRadians",value:function(e,t){var n=s.defaultStyle;if(t instanceof Array)n.positions=t.map(function(e){if(void 0===e.lon||void 0===e.lat)throw new Error("参数错误");return Cesium.Cartesian3.fromRadians(e.lon,e.lat,e.height)});else{if(void 0===t.lon||void 0===t.lat)throw new Error("参数错误");n.positions=Cesium.Cartesian3.fromRadians(n.positions.lon,n.positions.lat,n.positions.height)}return new s(e,n)}},{key:"isCesiumPoint",value:function(e){return!(!Kn(e)||!e.id||e.id.gvtype!==$n.POINT)}}]),s}();r(ii,"defaultStyle",{color:Cesium.Color.RED,pixelSize:5,outlineColor:Cesium.Color.WHITE,outlineWidth:3,heightReference:Cesium.HeightReference.CLAMP_TO_GROUND}),r(ii,"editStyle",{color:Cesium.Color.RED,pixelSize:5,outlineColor:Cesium.Color.AQUA,outlineWidth:3,heightReference:Cesium.HeightReference.CLAMP_TO_GROUND}),r(ii,"selectedStyle",{color:Cesium.Color.AQUA,pixelSize:5,outlineColor:Cesium.Color.AQUA,outlineWidth:3});var ri=function(){l(o,ti);var r=v(o);function o(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.defaultStyle;c(this,o),(t=r.call(this,e))._type="POLYLINE",t.gvtype=$n.POLYLINE,t.positions=n.positions||[];var i=p(t);return t.options={gvname:t._name,gvid:t._gvid,gvtype:t._gvtype,polyline:n,properties:n.properties},delete n.properties,t.options.polyline.positions=new Cesium.CallbackProperty(function(){return i.positions},!1),t.graphic=void 0,t.nodeGraphic=void 0,t.node=!1,t.create(),t}return u(o,[{key:"addNode",value:function(e){e instanceof Cesium.Cartesian3&&this.positions.push(e)}},{key:"popNode",value:function(){this.positions.pop()}},{key:"updateNode",value:function(e,t){if(e<0||e>this.positions.length-1)throw new Error("无效的index");if(t instanceof Cesium.Cartesian3==!1)throw new Error("无效的node");this.positions[e]=t}},{key:"dropNode",value:function(e){this.positions.splice(e,1)}},{key:"create",value:function(){this.viewer&&(this.graphic=this.viewer.entities.add(this.options))}},{key:"createNode",value:function(e){var t=0<arguments.length&&void 0!==e?e:ii.defaultStyle;t.positions=this.positions,t.clampToGround=this.options.polyline.clampToGround,this.nodeGraphic=new ii(this.viewer,t),this.node=!0}},{key:"startEdit",value:function(){var e=this;Kn(this.graphic)&&(this.graphic.polyline.positions=new Cesium.CallbackProperty(function(){return e.positions},!1),!1===this.node&&this.createNode())}},{key:"stopEdit",value:function(){this.graphic instanceof Cesium.Entity&&(this.graphic.polyline.positions=this.positions),this.removeNode()}},{key:"remove",value:function(){this.viewer&&(this.viewer.entities.remove(this.graphic),this.graphic=void 0,this.removeNode(),this.removeEvent.raiseEvent(this))}},{key:"removeNode",value:function(){this.node&&(this.nodeGraphic.remove(),this.node=!1)}},{key:"setMaterial",value:function(e){this.graphic.polyline.material=e}},{key:"destroy",value:function(){this.remove(),this.destroyEvent.raiseEvent(this),this.viewer=void 0,this.options=void 0,this.positions=void 0,this.nodeGraphic&&this.nodeGraphic.destroy(),this.nodeGraphic=void 0}},{key:"material",get:function(){if(this.graphic)return this.graphic.polyline.material}},{key:"width",get:function(){if(this.graphic)return this.graphic.polyline.width.getValue()}}],[{key:"fromDegrees",value:function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{},r=new o(e,g(g({positions:t=t.map(function(e){return Cesium.Cartesian3.fromDegrees(e.lon,e.lat,e.height)})},o.defaultStyle),{},{properties:i}));return r.stopEdit(),r}},{key:"fromRadians",value:function(e,t){return new o(e,g({positions:t=t.map(function(e){return Cesium.Cartesian3.fromRadians(e.lon,e.lat,e.height)})},o.defaultStyle))}}]),o}();r(ri,"defaultStyle",{clampToGround:!0,material:Cesium.Color.fromCssColorString("rgba(247,224,32,1)"),width:3}),r(ri,"selectedStyle",{clampToGround:!0,material:Cesium.Color.AQUA,width:3});var oi=function(){l(a,ti);var r=v(a);function a(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.defaultStyle;c(this,a),(t=r.call(this,e))._type="POLYGON",t.gvtype=$n.POLYGON,t.positions=n.positions||[],t.nodePositions=y(t.positions);var i=p(t);return t.options={gvid:t.gvid,gvtype:t.gvtype,polygon:g({hierarchy:new Cesium.CallbackProperty(function(){return new Cesium.PolygonHierarchy(i.positions)},!1)},n),properties:n.properties},delete n.properties,t.node=!1,t.graphic=void 0,t.nodeGraphic=void 0,t.outlineGraphic=void 0,t.outline=n.outline,t.create(),t}return u(a,[{key:"addNode",value:function(e){var t;e instanceof Cesium.Cartesian3&&(this.positions.push(e),0===(t=this.nodePositions.length)&&(this.nodePositions.push(this.positions[0]),this.nodePositions.push(this.positions[0])),2<=t&&(this.nodePositions[t]=this.nodePositions[t-1],this.nodePositions[t-1]=e))}},{key:"updateNode",value:function(e,t){if(e<0||e>this.positions.length-1)throw new Error("无效的index");if(t instanceof Cesium.Cartesian3==!1)throw new Error("无效的node");this.positions[e]=t,0===e?(this.nodePositions[0]=t,this.nodePositions[this.nodePositions.length-1]=t):this.nodePositions[e]=t}},{key:"popNode",value:function(){this.positions.pop(),this.nodePositions.splice(this.nodePositions.length-2),this.nodePositions.push(this.positions[0])}},{key:"dropNode",value:function(e){this.positions.splice(e,1),this.nodePositions.splice(e,1),0===e&&(this.nodePositions[this.nodePositions.length-1]=this.nodePositions[0])}},{key:"create",value:function(){this.options.polygon.outline=!1,this.viewer&&(this.graphic=this.viewer.entities.add(this.options),this.outline&&this.createOutline())}},{key:"createNode",value:function(e){var t=0<arguments.length&&void 0!==e?e:ii.defaultStyle;this.node=!0,t.positions=this.positions,t.clampToGround=this.graphic.polygon.perPositionHeight.getValue(),this.nodeGraphic=new ii(this.viewer,t)}},{key:"createOutline",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};!1!==this.options.outline?(t.width=this.options.polygon.outlineWidth||ri.defaultStyle.width,t.material=this.options.polygon.outlineColor||ri.defaultStyle.material,t.clampToGround=!this.graphic.polygon.perPositionHeight.getValue(),t.positions=this.nodePositions,this.outlineGraphic=new ri(this.viewer,t),this.outline=!0):ei.log("如果您想创建多边形边线,请在options中设置outline为true")}},{key:"startEdit",value:function(){var e=this.positions;this.graphic instanceof Cesium.Entity&&(this.graphic.polygon.hierarchy=new Cesium.CallbackProperty(function(){return new Cesium.PolygonHierarchy(e)}),this.outline?(this.outlineGraphic.startEdit(),this.nodeGraphic=this.outlineGraphic.nodeGraphic,this.node=!0):this.createNode())}},{key:"stopEdit",value:function(){this.graphic instanceof Cesium.Entity&&(this.graphic.polygon.hierarchy=new Cesium.PolygonHierarchy(this.positions)),this.removeNode(),this.nodeGraphic&&this.nodeGraphic.stopEdit(),this.outlineGraphic&&this.outlineGraphic.stopEdit()}},{key:"remove",value:function(){this.viewer&&(this.viewer.entities.remove(this.graphic),this.graphic=void 0,this.removeNode(),this.removeOutline(),this.removeEvent.raiseEvent(this))}},{key:"removeOutline",value:function(){this.outline&&(this.outlineGraphic.remove(),this.outline=!1,this.outlineGraphic=void 0)}},{key:"removeNode",value:function(){this.node&&(this.nodeGraphic.remove(),this.node=!1)}},{key:"destroy",value:function(){this.remove(),this.destroyEvent.raiseEvent(this),this.viewer=void 0,this.positions=void 0,this.options=void 0,this.nodeGraphic&&this.nodeGraphic.destroy(),this.outlineGraphic&&this.outlineGraphic.destroy(),this.outlineGraphic=void 0,this.nodeGraphic=void 0}},{key:"outlineStyle",get:function(){if(this.outlineGraphic)return this.outlineGraphic.polyline},set:function(e){var t,n={};Kn(this.outlineGraphic)?(t=this.outlineGraphic.graphic.polyline,n.material=e.outlineColor||t.material,n.width=e.outlineWidth||t.width,this.outlineGraphic.graphic.polyline.material=n.material,this.outlineGraphic.graphic.polyline.width=n.width,this.outlineGraphic.options.polyline.material=n.material,this.outlineGraphic.options.polyline.width=n.width):this.outline&&this.createOutline(n)}},{key:"material",get:function(){if(this.graphic)return this.graphic.polygon.material.getValue().color}},{key:"outlineColor",get:function(){return this.outlineGraphic?this.outlineGraphic.graphic.polyline.material.getValue().color:a.defaultStyle.outlineColor}},{key:"outlineWidth",get:function(){return this.outlineGraphic?this.outlineGraphic.graphic.polyline.width.getValue():a.defaultStyle.outlineWidth}}],[{key:"fromDegrees",value:function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{};t=t.map(function(e){return Cesium.Cartesian3.fromDegrees(e.lon,e.lat,e.height)});var r=a.defaultStyle;r.positions=t,r.properties=i;var o=new a(e,r);return o.stopEdit(),o}},{key:"fromRadians",value:function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{};t=t.map(function(e){return Cesium.Cartesian3.fromRadians(e.lon,e.lat,e.height)});var r=a.defaultStyle;return r.positions=t,r.properties=i,new a(e,r)}}]),a}();r(oi,"defaultStyle",{material:new Cesium.Color.fromCssColorString("rgba(247,224,32,0.5)"),outline:!0,outlineColor:new Cesium.Color.fromCssColorString("rgba(255,247,145,1)"),outlineWidth:2,perPositionHeight:!1}),r(oi,"selectedStyle",{material:new Cesium.ColorMaterialProperty(Cesium.Color.AQUA.withAlpha(.4)),outlineColor:Cesium.Color.AQUA.withAlpha(.4)});var ai=function(){l(r,ti);var i=v(r);function r(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:r.defaultStyle;return c(this,r),(t=i.call(this,e))._type="LABEL",t._gvtype=$n.LABEL,t.position=n.position,t.options={gvid:t._gvid,gvtype:t._gvtype,position:t.position,label:n},t.graphic=void 0,t.create(),t}return u(r,[{key:"create",value:function(){this.graphic=this.viewer.entities.add(this.options)}},{key:"startEdit",value:function(){var e=this;this.graphic&&(this.graphic.label.position=new Cesium.CallbackProperty(function(){return e.position},!1))}},{key:"stopEdit",value:function(){this.graphic&&(this.graphic.label.position=this.position)}},{key:"remove",value:function(){this.viewer&&this.viewer.entities.remove(this.graphic),this.graphic=void 0,this.raiseEvent.raiseEvent(this)}},{key:"updateText",value:function(e){this.graphic&&(this.graphic.label.text=e,this.gvname=e)}},{key:"destroy",value:function(){this.remove(),this.destroyEvent.raiseEvent(this),this.viewer=void 0,this.options=void 0,this.positions=void 0}},{key:"color",get:function(){if(this.graphic)return this.graphic.label.fillColor.getValue()},set:function(e){this.graphic&&(this.graphic.label.fillColor=e)}},{key:"font",get:function(){if(this.graphic)return this.graphic.label.font.getValue()}}]),r}();r(ai,"defaultStyle",{color:Cesium.Color.WHITE,font:"28px sans-serif",showBackground:!0});var si=function(){l(r,ti);var i=v(r);function r(e,t){var n;return c(this,r),(n=i.call(this,e))._type="MODEL",n._gvtype=$n.MODEL,n.position=t.position,n.options={gvid:n._gvid,gvtype:n._gvtype,position:n.position,model:t},n.create(),n}return u(r,[{key:"create",value:function(){this.graphic=this.viewer.entities.add(this.options)}},{key:"startEdit",value:function(){var e=this;this.graphic&&(this.graphic.label.position=new Cesium.CallbackProperty(function(){return e.position},!1))}},{key:"stopEdit",value:function(){this.graphic&&(this.graphic.label.position=this.position)}},{key:"remove",value:function(){this.viewer&&(this.viewer.entities.remove(this.graphic),this.graphic=void 0,this.removeEvent.raiseEvent(this))}},{key:"destroy",value:function(){this.remove(),this.destroyEvent.raiseEvent(this),this.options=void 0,this.position=void 0}},{key:"uri",set:function(e){this.graphic&&(this.graphic.model.uri=e)}},{key:"color",set:function(e){this.graphic&&(this.graphic.model.color=e)}},{key:"mode",set:function(e){this.graphic&&(this.graphic.model.colorBlendMode=e)}},{key:"mixed",set:function(e){this.graphic&&(this.graphic.model.colorBlendAmount=e)}}]),r}();r(si,"defaultStyle",{colorBlendMode:Cesium.ColorBlendMode.HIGHLIGHT,color:Cesium.Color.WHITE,colorBlendAmount:.5,minimumPixelSize:64});var ci,ui,li={CesiumPoint:ii,CesiumPolyline:ri,CesiumPolygon:oi,CesiumLabel:ai,CesiumBillboard:ni,CesiumModel:si},hi={};ci=hi,ui=function(){var l="object"===("undefined"==typeof window?"undefined":M(window))&&window.window===window?window:"object"===("undefined"==typeof self?"undefined":M(self))&&self.self===self?self:"object"===("undefined"==typeof global?"undefined":M(global))&&global.global===global?global:void 0;function h(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){r(i.response,t,n)},i.onerror=function(){console.error("could not download file")},i.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&t.status<=299}function s(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var r=l.saveAs||("object"!==("undefined"==typeof window?"undefined":M(window))||window!==l?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,n){var i=l.URL||l.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener","string"==typeof e?(r.href=e,r.origin!==location.origin?a(r.href)?h(e,t,n):s(r,r.target="_blank"):s(r)):(r.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){s(r)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){var i,r,o;t=t||e.name||"download","string"==typeof e?a(e)?h(e,t,n):((i=document.createElement("a")).href=e,i.target="_blank",setTimeout(function(){s(i)})):navigator.msSaveOrOpenBlob((r=e,void 0===(o=n)?o={autoBom:!1}:"object"!==M(o)&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob([String.fromCharCode(65279),r],{type:r.type}):r),t)}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return h(e,t,n);var r,o,a,s="application/octet-stream"===e.type,c=/constructor/i.test(l.HTMLElement)||l.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);(u||s&&c)&&"object"===("undefined"==typeof FileReader?"undefined":M(FileReader))?((r=new FileReader).onloadend=function(){var e=r.result,e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;");i?i.location.href=e:location=e,i=null},r.readAsDataURL(e)):(o=l.URL||l.webkitURL,a=o.createObjectURL(e),i?i.location=a:location.href=a,i=null,setTimeout(function(){o.revokeObjectURL(a)},4e4))});l.saveAs=r.saveAs=r},"function"==typeof define&&define.amd?define([],ui):void 0!==e?ui():(ui(),ci.FileSaver={});function di(){c(this,di)}var pi=hi.saveAs,fi=function(){function e(){c(this,e),this._createEvent=new zn,this._preUpdateEvent=new zn,this._postUpdateEvent=new zn,this._destroyEvent=new zn}return u(e,[{key:"createEvent",get:function(){return this._createEvent}},{key:"preUpdateEvent",get:function(){return this._preUpdateEvent}},{key:"postUpdateEvent",get:function(){return this._postUpdateEvent}},{key:"destroyEvent",get:function(){return this._destroyEvent}}]),e}(),vi=Cesium.defined,gi=Cesium.ScreenSpaceEventType.LEFT_CLICK,mi=Cesium.ScreenSpaceEventType.RIGHT_CLICK,yi=Cesium.ScreenSpaceEventType.MOUSE_MOVE,wi=Cesium.ScreenSpaceEventType.LEFT_DOWN,bi=Cesium.ScreenSpaceEventType.LEFT_UP,Ci=function(){l(o,fi);var r=v(o);function o(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(c(this,o),t=r.call(this),e instanceof Cesium.Viewer==!1)throw new Error("viewer不是一个有效的Cesium Viewer");t.viewer=e,t.options=n,t._heightReference="CLAMP_TO_GROUND",t._material=void 0,t._style={},t.graphicId=void 0,t.handler=new Cesium.ScreenSpaceEventHandler(t.viewer.canvas),t.graphicType=void 0,t.positions=[],t.tip=new N(""),t.tip.show=!1,t.mode="ready",t.dragging=!1,t.editManager=void 0,t.selectedNodeIndex=-1,t.manager=new Map;var i=p(t);return t._importEvent=new zn,t._deleteEvent=new zn,document.onkeydown=function(e){var t;"edit"!==i.mode||(t=e||window.event||arguments.callee.caller.arguments[0])&&46===t.keyCode&&(-1<i.selectedNodeIndex&&i.editManager?(i.editManager.dropNode(i.selectedNodeIndex),i.highlightedNode(void 0,i.editManager.nodeGraphic),i.selectedNodeIndex=-1):i.editManager&&(i.editManager.destroy(),i.manager.delete(i.editManager.id),i.mode="end",i.tip.show=!1,i.deleteEvent.raiseEvent({id:i.editManager?i.editManager.gvid:void 0}),i.editManager=void 0))},t}return u(o,[{key:"createPolyline",value:function(e){var t=0<arguments.length&&void 0!==e?e:ri.defaultStyle;this.graphicType=$n.POLYLINE;var n=this.generateId();t.positions=this.positions,/.*GROUND.*/.test(this._heightReference)?t.clampToGround=!0:t.clampToGround=!1,t.material=this.material||t.material,t.width=this.style.width||t.width;var i=new ri(this.viewer,t);this.tip.updateText("左键标绘，右键结束."),this.tip.show=!0,i.gvid=n,i.heightReference=this.heightReference,this.manager.set(n,i),this.graphicId=n,this.editManager=i,this.createEvent.raiseEvent({id:i.gvid,type:i.gvtype,name:i.gvname});var r=this;return this.handler.setInputAction(function(e){r.tip&&r.tip.updatePosition(e.endPosition)},yi),this.addEventListener(),i}},{key:"createPolygon",value:function(e){var t=0<arguments.length&&void 0!==e?e:oi.defaultStyle;this.graphicType=$n.POLYGON;var n=this.generateId();this.graphicId=n,t.positions=this.positions,/.*GROUND.*/.test(this._heightReference)?t.perPositionHeight=!1:t.perPositionHeight=!0,t.material=this.material||t.material,t.outlineWidth=this.style.outlineWidth||t.outlineWidth,t.outlineColor=this.style.outlineColor||t.outlineColor;var i=new oi(this.viewer,t);i.gvid=n,i.heightReference=this.heightReference,this.tip.show=!0,this.tip.updateText("左键标绘，右键结束."),this.manager.set(n,i),this.editManager=i,this.createEvent.raiseEvent({id:i.gvid,type:i.gvtype,name:i.gvname});var r=this;return this.handler.setInputAction(function(e){r.tip&&r.tip.updatePosition(e.endPosition)},yi),this.addEventListener(),i}},{key:"generateId",value:x},{key:"isKnownGraphic",value:function(e){return!(!(vi(e)&&e.id instanceof Cesium.Entity)||e.id.gvtype!==$n.POLYLINE&&e.id.gvtype!==$n.POLYGON&&e.id.gvtype!==$n.POINT)}},{key:"highlightedNode",value:function(e,t){var n,i=ii.selectedStyle,r=ii.defaultStyle,o=C(t.graphic);try{for(o.s();!(n=o.n()).done;){var a=n.value;a===e?ii.setStyle(a,i):ii.setStyle(a,r)}}catch(e){o.e(e)}finally{o.f()}}},{key:"addEventListener",value:function(){var c=this,u=this.viewer,l=function(e){var t=O.pixel2Cartesian(e.endPosition,c.viewer);if(/.*MODEL.*/.test(c._heightReference)){if(!u.scene.pickPositionSupported)return void console.log("This browser does not support pickPosition.");t=u.scene.pickPosition(e.endPosition)}vi(t)&&(c.tip.updatePosition(e.endPosition),"create"===c.mode?(1<c.positions.length&&c.manager.get(c.graphicId).popNode(),0<c.positions.length&&c.manager.get(c.graphicId).addNode(t)):"edit"===c.mode&&c.dragging&&-1!==c.selectedNodeIndex&&c.editManager.updateNode(c.selectedNodeIndex,t))},h=function(e){c.handler.setInputAction(o,bi);var t,n=!1,i=C(u.scene.drillPick(e.position));try{for(i.s();!(t=i.n()).done;){var r=t.value;ii.isCesiumPoint(r)&&(n=!0)}}catch(e){i.e(e)}finally{i.f()}!1!==n&&"edit"===c.mode&&-1!==c.selectedNodeIndex&&(c.dragging=!0,u.scene.screenSpaceCameraController.enableRotate=!1)},o=function(){c.dragging=!1,u.scene.screenSpaceCameraController.enableRotate=!0,c.handler.removeInputAction(bi)};this.handler.setInputAction(function(e){if("edit"!==c.mode){if(c.graphicType===$n.POLYLINE||c.graphicType===$n.POLYGON){var t=O.pixel2Cartesian(e.position,c.viewer);if(/.*MODEL.*/.test(c._heightReference)){if(!u.scene.pickPositionSupported)return void console.log("This browser does not support pickPosition.");t=u.scene.pickPosition(e.position)}0===c.manager.get(c.graphicId).positions.length&&(c.handler.removeInputAction(yi),c.handler.setInputAction(l,yi)),vi(t)&&c.manager.has(c.graphicId)&&c.manager.get(c.graphicId).addNode(t),c.mode="create"}}else{if(!c.editManager)return void c.removeEventListener();var n,i,r=c.editManager.nodeGraphic||c.editManager.outlineGraphic.nodeGraphic,o=!1,a=C(u.scene.drillPick(e.position));try{for(a.s();!(i=a.n()).done;){var s=i.value;if((o=c.isKnownGraphic(s))&&s.id.gvtype===$n.POINT){n=s,c.handler.removeInputAction(wi),c.handler.removeInputAction(yi),c.handler.setInputAction(h,wi),c.handler.setInputAction(l,yi);break}}}catch(e){a.e(e)}finally{a.f()}n&&o?n.id.gvtype===$n.POINT?(c.selectedNodeIndex=r.contain(n.id),-1!==c.selectedNodeIndex&&c.highlightedNode(n.id,r)):(c.highlightedNode(n.id,c.editManager.nodeGraphic),c.selectedNodeIndex=-1):(c.editManager&&c.editManager.stopEdit(),c.removeEventListener(),c.mode="end",c.selectedNodeIndex=-1,c.editManager=void 0,c.tip.show=!1,c.postUpdateEvent.raiseEvent({id:c.editManager.gvid}))}},gi),this.handler.setInputAction(function(){var e=c.manager.get(c.graphicId);"create"===c.mode&&e?(e.stopEdit(),c.graphicType=void 0,c.graphicId=void 0,c.positions=[],c.mode="end",c.tip.show=!1,c.editManager=void 0,c.postUpdateEvent.raiseEvent({id:e.gvid})):"ready"===c.mode?c.cancel():"edit"===c.mode&&(c.editManager&&c.editManager.stopEdit(),c.removeEventListener(),c.mode="end",c.selectedNodeIndex=-1,c.editManager=void 0,c.tip.show=!1,c.postUpdateEvent.raiseEvent({id:c.editManager.id})),c.removeEventListener()},mi)}},{key:"rename",value:function(e,t){var n=this.manager.get(e);vi(n)&&(n.gvname=t)}},{key:"has",value:function(e){return!!this.manager&&this.manager.has(e)}},{key:"get",value:function(e){if(this.has(e))return this.manager.get(e)}},{key:"drop",value:function(e){this.has(e)&&(this.get(e).destroy(),this.manager.delete(e),this.destroyEvent.raiseEvent({id:e}))}},{key:"cancel",value:function(){var e=this.manager.get(this.graphicId);e&&e.stopEdit(),e&&e.destroy(),this.graphicType=void 0,this.graphicId=void 0,this.positions=[],this.mode="end",this.tip.show=!1,this.editManager=void 0}},{key:"select",value:function(e,t,n){var i;if(!vi(t)||(i=this.manager.get(t))&&(i.show=n),vi(e)){var r,o=C(this.manager.values());try{for(o.s();!(r=o.n()).done;){var a=r.value;a.gvtype===e&&(a.show=n)}}catch(e){o.e(e)}finally{o.f()}}}},{key:"edit",value:function(e){var t=this;this.lastEditManager&&this.lastEditManager.stopEdit();var n=t.manager.get(e);if(this.lastEditManager=n,this.handler.setInputAction(function(e){t.tip.updatePosition(e.endPosition)},yi),t.graphicId=e,vi(n))return t.mode="edit",n.startEdit(),t.tip.show=!0,t.tip.updateText("拖动节点编辑，按del删除."),t.editManager=n,this.preUpdateEvent.raiseEvent({id:e,graphicType:t.editManager.type,material:t.editManager.material,width:t.editManager.width,outline:t.editManager.outline,outlineColor:t.editManager.outlineColor,outlineWidth:t.editManager.outlineWidth,heightReference:t.editManager.heightReference}),t.addEventListener(),n}},{key:"export",value:function(e){var t,n={type:"FeatureCollection",name:"graphic",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[]},i=C(this.manager.values());try{for(i.s();!(t=i.n()).done;){var r=t.value;r.type===e&&n.features.push(r.toGeoJson())}}catch(e){i.e(e)}finally{i.f()}var o=new Blob([JSON.stringify(n)],{type:""});pi(o,"".concat(e+parseInt(Cesium.getTimestamp()),".geojson"))}},{key:"import",value:function(e){var t,n=e.properties.id||this.generateId(),i=[];if(e.geometry.type.toUpperCase()==="LineString".toUpperCase()){var r,o=C(e.geometry.coordinates);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push({lon:a[0],lat:a[1],height:a[2]})}}catch(e){o.e(e)}finally{o.f()}try{t=ri.fromDegrees(this.viewer,i,e.properties)}catch(e){console.log(e)}}else{if("POLYGON"!==e.geometry.type.toUpperCase())throw new Error("不能识别的数据源.");var s,c=C(e.geometry.coordinates[0]);try{for(c.s();!(s=c.n()).done;){var u=s.value;i.push({lon:u[0],lat:u[1],height:u[2]})}}catch(e){c.e(e)}finally{c.f()}t=oi.fromDegrees(this.viewer,i,e.properties)}return t&&(t.gvid=n,t.gvname=e.properties.name,t.properties=e.properties,this.manager.set(n,t),this.importEvent.raiseEvent({id:t.gvid,type:t.gvtype,name:t.gvname||"未命名"})),t}},{key:"removeEventListener",value:function(){this.handler.removeInputAction(gi),this.handler.removeInputAction(yi),this.handler.removeInputAction(mi),this.handler.removeInputAction(wi),this.handler.removeInputAction(bi)}},{key:"removeAll",value:function(){var e,t=C(this.manager.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.remove(),n.destroy()}}catch(e){t.e(e)}finally{t.f()}this.manager.clear(),this.tip.show=!1}},{key:"destroy",value:function(){this.activeManager=void 0,this.manager=void 0,this.editManager=void 0,this.removeEventListener(),this.handler.isDestroyed||(this.handler.destroy(),this.handler=void 0)}},{key:"destroyManager",value:function(){var e=this.editManager,t=new CustomEvent("destroyEvent",{detail:{gvid:e?e.gvid:void 0}});e&&("edit"===this.mode?e&&e.stopEdit():(e&&e.destroy(),this.manager.delete(this.graphicId)),this.editManager=void 0),this.graphicId=void 0,this.handler.removeInputAction(yi),window.dispatchEvent(t)}},{key:"importEvent",get:function(){return this._importEvent}},{key:"deleteEvent",get:function(){return this._deleteEvent}},{key:"heightReference",get:function(){return this._heightReference},set:function(e){var t,n;this._heightReference=e,this.editManager&&(this.editManager.heightReference=e,"POLYLINE"===this.editManager.type?(this.editManager.graphic.polyline.clampToGround=/.*GROUND.*/.test(e),this.editManager.options.polyline.clampToGround=/.*GROUND.*/.test(e)):"POLYGON"===this.editManager.type&&(t=this.editManager.graphic,n=this.editManager.options,/.*GROUND.*/.test(e)?(t.polygon.perPositionHeight=!1,this.editManager.outline&&(this.editManager.outlineGraphic.graphic.polyline.clampToGround=!0),n.polygon.perPositionHeight=!1):(t.polygon.perPositionHeight=!0,this.editManager.outline&&(this.editManager.outlineGraphic.graphic.polyline.clampToGround=!1),n.polygon.perPositionHeight=!0)))}},{key:"material",get:function(){return this._material},set:function(e){this._material=e,this.editManager&&("POLYLINE"===this.editManager.type?(this.editManager.graphic.polyline.material=this._material,this.editManager.options.polyline.material=this._material):"POLYGON"===this.editManager.type&&(this.editManager.graphic.polygon.material=this._material,this.editManager.options.polygon.material=this._material))}},{key:"style",get:function(){return this._style},set:function(e){if(this._style=e,this.editManager){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];"POLYLINE"===this.editManager.type?(this.editManager.graphic.polyline[i]=e[i],this.editManager.options.polyline[i]=e[i]):"POLYGON"===this.editManager.type&&("outline"!==i&&(this.editManager.graphic.polygon[i]=e[i]),this.editManager.options.polygon[i]=e[i])}"POLYGON"===this.editManager.type&&(this.editManager.outlineStyle=e)}}}]),o}(),xi=function(){function o(e){c(this,o);var t=Cesium,n=t.defaultValue,i=t.Matrix4,r=t.DrawCommand;this.sources=e.sources,this._sources=void 0,this.show=n(e.show,!0),this._command=new r({modelMatrix:i.clone(i.IDENTITY),owner:this}),this._cubeMap=void 0,this._attributeLocations=void 0,this._useHdr=void 0,this._isDestroyed=!1}return u(o,[{key:"update",value:function(e,t){var n=Cesium,i=n.BoxGeometry,r=n.Cartesian3,o=n.defined,a=n.DeveloperError,s=n.GeometryPipeline,c=n.Matrix4,u=n.Transforms,l=n.VertexFormat,h=n.BufferUsage,d=n.CubeMap,p=n.loadCubeMap,f=n.RenderState,v=n.VertexArray,g=n.BlendingState,m=n.SceneMode,y=n.ShaderProgram,w=n.ShaderSource,b=new n.Matrix3,C=this;if(this.show&&(e.mode===m.SCENE3D||e.mode===m.MORPHING)&&e.passes.render){var x=e.context;if(this._sources!==this.sources){this._sources=this.sources;var k=this.sources;if(!(o(k.positiveX)&&o(k.negativeX)&&o(k.positiveY)&&o(k.negativeY)&&o(k.positiveZ)&&o(k.negativeZ)))throw new a("this.sources is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");if(M(k.positiveX)!==M(k.negativeX)||M(k.positiveX)!==M(k.positiveY)||M(k.positiveX)!==M(k.negativeY)||M(k.positiveX)!==M(k.positiveZ)||M(k.positiveX)!==M(k.negativeZ))throw new a("this.sources properties must all be the same type.");"string"==typeof k.positiveX?p(x,this._sources).then(function(e){C._cubeMap=C._cubeMap&&C._cubeMap.destroy(),C._cubeMap=e}):(this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),this._cubeMap=new d({context:x,source:k}))}var _,E,T,S=this._command;if(S.modelMatrix=u.eastNorthUpToFixedFrame(e.camera._positionWC),o(S.vertexArray)||(S.uniformMap={u_cubeMap:function(){return C._cubeMap},u_rotateMatrix:function(){return"function"==typeof c.getRotation?c.getRotation(S.modelMatrix,b):c.getMatrix3(S.modelMatrix,b)}},_=i.createGeometry(i.fromDimensions({dimensions:new r(2,2,2),vertexFormat:l.POSITION_ONLY})),E=this._attributeLocations=s.createAttributeLocations(_),S.vertexArray=v.fromGeometry({context:x,geometry:_,attributeLocations:E,bufferUsage:h._DRAW}),S.renderState=f.fromCache({blending:g.ALPHA_BLEND})),o(S.shaderProgram)&&this._useHdr===t||(T=new w({defines:[t?"HDR":""],sources:["uniform samplerCube u_cubeMap;\n  varying vec3 v_texCoord;\n  void main()\n  {\n  vec4 color = textureCube(u_cubeMap, normalize(v_texCoord));\n  gl_FragColor = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);\n  }\n  "]}),S.shaderProgram=y.fromCache({context:x,vertexShaderSource:"attribute vec3 position;\n  varying vec3 v_texCoord;\n  uniform mat3 u_rotateMatrix;\n  void main()\n  {\n  vec3 p = czm_viewRotation * u_rotateMatrix * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));\n  gl_Position = czm_projection * vec4(p, 1.0);\n  v_texCoord = position.xyz;\n  }\n  ",fragmentShaderSource:T,attributeLocations:this._attributeLocations}),this._useHdr=t),o(this._cubeMap))return S}}},{key:"isDestroyed",value:function(){return this._isDestroyed}},{key:"destroy",value:function(){var e=this._command;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy(),this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),Cesium.destroyObject(this)}}]),o}();function ki(e,t){return S(t),e=e.getValue?e.getValue():e,new Cesium.EllipsoidalOccluder(Cesium.Ellipsoid.WGS84,t.camera.position).isPointVisible(e)}var _i=Cesium.defined,Ei=Cesium.ScreenSpaceEventType.LEFT_CLICK,Ti=Cesium.ScreenSpaceEventType.RIGHT_CLICK,Si=Cesium.ScreenSpaceEventType.MOUSE_MOVE;function Mi(e,t){var n=document.createElement("a"),i=function(e){for(var t=e.split(";base64,"),n=t[0].split(":")[1],i=window.atob(t[1]),r=i.length,o=new Uint8Array(r),a=0;a<r;++a)o[a]=i.charCodeAt(a);return new Blob([o],{type:n})}(t);document.createEvent("HTMLEvents").initEvent("click",!0,!0),n.download=e,n.href=URL.createObjectURL(i),n.click()}var Ai=function(){l(s,fi);var a=v(s);function s(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{markerOptions:ni.defaultStyle,labelOptions:ni.defaultLabelStyle,modelOptions:si.defaultStyle};c(this,s),t=a.call(this);var i=n.markerOptions,r=n.labelOptions,o=n.modelOptions;return e instanceof Cesium.Viewer&&(t._viewer=e),Cesium.defined(t._viewer)?(t.markMode="marker",t._properties={},t.defaultImage=ni.defaultStyle.image,t.selectedImage=void 0,t.popWinPosition=void 0,t.markerid=void 0,t.markerOptions=i,t.labelOptions=r,t.modelOptions=o,t.cursorTip=new N("左键标绘，右键结束.","marker-tip",e),t.cursorTip.show=!1,t.handler=new Cesium.ScreenSpaceEventHandler(e.canvas),t.manager=new Map,t.pickHandler=new Cesium.ScreenSpaceEventHandler(e.canvas),t._importEvent=new zn,t._deleteEvent=new zn,t.init(t._viewer),t):f(t)}return u(s,[{key:"init",value:function(n){if(n instanceof Cesium.Viewer==!1)throw new Error("viewer不是一个有效的Cesium Viewer对象.");var e=this.handler,i=this,r=this.manager;n.scene.postRender.addEventListener(function(){if(_i(i.popWinPosition)){var e=O.cartesian2Pixel(i.popWinPosition,n),t=document.getElementById("popContainer");if(!t)return;t.style.left="".concat(e.x-100-5,"px"),t.style.top="".concat(e.y-110,"px"),ki(i.popWinPosition,i._viewer)?t.style.display="block":t.style.display="none"}});e.setInputAction(function(e){var t=n.scene.pick(e.position);_i(t)&&t.id instanceof Cesium.Entity&&t.id.gvtype===$n.MARKER?(i.selectedMarker=r.get(t.id.gvid),i.popDiv?i.destroyPopPanle():i.createPopPanel()):i.destroyPopPanle()},Ei)}},{key:"pick",value:function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"marker",r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"single";this.markMode=i;var o=this._viewer;this.cursorTip.show=!0;var a=this.pickHandler,s=this,c=this.generateId();s.markerid=c;function e(e){var t,n=O.pixel2Cartesian(e.position,o);Cesium.defined(n)&&(t="marker"===i?s.createMarker(n):"label"===i?s.createLabel(n):"model"===i?s.createModel(n):s.createMarker(n),s.visible=!0,u.set(c,t),t.gvid=c,s.selectedMarker=t,s.activeMarker=t,s.cursorTip.show=!1,"model"===i&&(s.activeMarker=void 0),"single"===r&&(a.removeInputAction(Ei),a.removeInputAction(Ti)),s.createEvent.raiseEvent({id:t.gvid,name:t.gvname||"未命名",description:t.description,type:t.gvtype,position:O.toDegrees(n,s._viewer)}),t=void 0)}var u=this.manager;a.setInputAction(function(){a.removeInputAction(Ei),a.removeInputAction(Ti),s.cursorTip.show=!1;var e=s.activeMarker?s.activeMarker.id:void 0;s.destroyEvent.raiseEvent({id:e}),s.activeMarker=void 0},Ti),a.setInputAction(e,Ei),a.setInputAction(function(e){s.cursorTip.updatePosition(e.endPosition)},Si)}},{key:"get",value:function(e){if(this.has(e))return this.manager.get(e)}},{key:"has",value:function(e){return!!this.manager&&this.manager.has(e)}},{key:"createMarker",value:function(e){var t=this.labelOptions;return new ni(this._viewer,g(g({},this.markerOptions),{},{position:e,image:this.selectedImage}),t)}},{key:"changeHandler",value:function(e){this.selectedImage=e,this.activeMarker.updateImage(this.selectedImage)}},{key:"createLabel",value:function(e){var t=this.labelOptions;return t.position=e,new ai(this._viewer,t)}},{key:"createModel",value:function(e){var t=this.modelOptions;return t.position=e,new si(this._viewer,t)}},{key:"removeEventListener",value:function(){var e=this.pickHandler;e&&(e.isDestroyed()||(e.removeInputAction(Ei),e.removeInputAction(Ti),e.removeInputAction(Si)))}},{key:"stopPick",value:function(){this.removeEventListener(),this.activeMarker&&(this.activeMarker.destroy(),this.destroyEvent.raiseEvent({id:this.activeMarker.gvid})),this.activeMarker=void 0,this.cursorTip.show=!1}},{key:"zoomTo",value:function(e){this.manager.has(e)&&this.manager.get(e).zoomTo()}},{key:"edit",value:function(e){var t=this.manager;if(t.has(e)){var n=t.get(e);return(this.activeMarker=n).startEdit(),n.gvtype!==$n.MARKER&&n.gvtype!==$n.LABEL||(this.properties.name=this.activeMarker.gvname,this.properties.description=this.activeMarker.description,this.visible=!0),this.preUpdateEvent.raiseEvent({id:e,name:this.properties.name,description:this.properties.description,gvtype:this.activeMarker.gvtype,type:this.activeMarker.type,graphicType:this.activeMarker.type}),n}}},{key:"drop",value:function(e){var t=this.manager.get(e);t&&t.destroy(),this.manager.delete(e),this.destroyEvent.raiseEvent({id:e}),this.selectedMarker&&e===this.selectedMarker.gvid&&this.destroyPopPanle()}},{key:"rename",value:function(e,t){this.manager.get(e).gvname=t}},{key:"select",value:function(e,t,n){var i;if(_i(t)&&(i=this.manager.get(t),_i(i)&&(i.show=n)),_i(e)){var r,o=C(this.manager.values());try{for(o.s();!(r=o.n()).done;){var a=r.value;a.gvtype===e&&(a.show=n)}}catch(e){o.e(e)}finally{o.f()}}}},{key:"destroyPopPanle",value:function(){this.popDiv&&(ee(this.popDiv).remove(),this.popDiv=void 0)}},{key:"destroy",value:function(){this.removeAll(),this.destroyPopPanle(),this.pickHandler.isDestroyed()||this.pickHandler.destroy(),this.handler.isDestroyed()||this.handler.destroy(),this._viewer=void 0,this.labelOptions=void 0,this.markerOptions=void 0,this.modelOptions=void 0}},{key:"createPopPanel",value:function(){var e,t,n,i,r,o,a,s;_i(this.selectedMarker)&&(this.popDiv&&this.destroyPopPanle(),(e=document.createElement("div")).id="popContainer",e.className="marker-popWin-class",t=this.selectedMarker.position,this.popWinPosition=t,n=O.cartesian2Degrees(t,this._viewer),e.style.display="none",(i=document.createElement("span")).title=this.selectedMarker.description,i.innerText="描述:".concat(function(e,t){for(var n=0,i="",r=0;r<e.length;r++)if(128<e.charCodeAt(r)?n+=2:n++,i+=e.charAt(r),t<=n)return"".concat(i,"...");return i}(this.selectedMarker.description||"暂无",14)),(r=document.createElement("span")).innerText="纬度:".concat(n.lon.toFixed(2),"  纬度:").concat(n.lat.toFixed(2)),(o=document.createElement("div")).className="arrow",(a=document.createElement("span")).className="iconfont iconclose closebtn",s=this,a.onclick=function(){ee(s.popDiv).remove(),s.popDiv=void 0},e.appendChild(a),i&&e.appendChild(i),e.appendChild(r),e.appendChild(o),this.popDiv=e,this._viewer.container.appendChild(this.popDiv))}},{key:"import",value:function(e){if("POINT"!==e.geometry.type.toUpperCase())throw new Error("无效的数据类型.");var t,n,i,r,o=e.properties.id||this.generateId();return(r=e.properties.type===$n.LABEL?((n=ai.defaultStyle).position=(t=Cesium.Cartesian3).fromDegrees.apply(t,y(e.geometry.coordinates)),n.text=e.properties.name,new ai(this._viewer,n)):(i={lon:e.geometry.coordinates[0],lat:e.geometry.coordinates[1],height:e.geometry.coordinates[2]},ni.fromDegrees(this._viewer,i))).gvname=e.properties.name,r.gvid=o,r.properties=e.properties,this.manager.set(o,r),this.importEvent.raiseEvent({id:r.gvid,name:r.gvname||"未命名",type:r.gvtype,description:r.description,properties:e.properties,position:{lon:e.geometry.coordinates[0],lat:e.geometry.coordinates[1],height:e.geometry.coordinates[2]}}),r}},{key:"addMarker",value:function(e){this.manager.set(e.gvid,e)}},{key:"export",value:function(e){var t,n={type:"FeatureCollection",name:"graphic",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[]},i=C(this.manager.values());try{for(i.s();!(t=i.n()).done;){var r=t.value;r.type===e&&n.features.push(r.toGeoJson())}}catch(e){i.e(e)}finally{i.f()}var o=new Blob([JSON.stringify(n)],{type:""});window.saveAs(o,"".concat(e+parseInt(Cesium.getTimestamp()),".geojson"))}},{key:"removeAll",value:function(){var e,t=C(this.manager.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.remove(),n.destroy()}}catch(e){t.e(e)}finally{t.f()}this.manager.clear(),this.destroyPopPanle()}},{key:"cancelMark",value:function(){this.activeMarker&&this.activeMarker.destroy(),this.activeMarker=void 0,this.cursorTip.show=!1,this.deleteEvent.raiseEvent({id:this.markerid}),this.properties.name="",this.properties.description="",this.manager.delete(this.markerid),this.markerid=void 0,this.cursorTip&&(this.cursorTip.show=!1),this.removeEventListener()}},{key:"update",value:function(e){this.properties=e,this.activeMarker.updateText(this.properties.name,this.properties.description),this.cursorTip.show=!1,this.activeMarker.stopEdit(),this.postUpdateEvent.raiseEvent({id:this.activeMarker.gvid,name:this.activeMarker.gvname,description:this.activeMarker.description,type:this.activeMarker.gvtype,position:O.toDegrees(this.activeMarker.position,this._viewer)}),this.activeMarker=void 0,this.cursorTip.show=!1,this.removeEventListener()}},{key:"generateId",value:x},{key:"importEvent",get:function(){return this._importEvent}},{key:"deleteEvent",get:function(){return this._deleteEvent}},{key:"properties",get:function(){return this._properties},set:function(e){this._properties=e}},{key:"font",set:function(e){this.labelOptions.font=e,this.activeMarker&&(this.activeMarker.font=e)},get:function(){if(this.activeMarker)return this.activeMarker.font}},{key:"color",set:function(e){this.labelOptions.fillColor=e,this.activeMarker&&(this.activeMarker.color=e)}},{key:"label",set:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];this.labelOptions[i]=e[i]}this.activeMarker&&this.activeMarker.setLabel(this.labelOptions)}},{key:"model",set:function(e){this.modelOptions=g(g({},this.modelOptions),e),this.activeMarker&&(e.uri&&(this.activeMarker.uri=e.uri),e.color&&(this.activeMarker.color=e.color),void 0!==e.mode&&(this.activeMarker.model=e.mode),void 0!==e.mixed&&(this.activeMarker.mixed=e.mixed))}}]),s}();var Pi=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c(this,t),S(e.viewer),this._viewer=e.viewer,this._scene=e.viewer.scene,this._depthTest=this._scene.globe.depthTestAgainstTerrain,this._lighting=this._scene.globe.enableLighting,this._shadows=this._viewer.shadows}return u(t,[{key:"depthTest",get:function(){return this._depthTest},set:function(e){this._depthTest=e,this._scene.globe.depthTestAgainstTerrain=e}},{key:"lighting",get:function(){return this._lighting},set:function(e){this._lighting=e,this._scene.globe.enableLighting=e}},{key:"shadows",get:function(){return this._shadows},set:function(e){this._shadows=e,this._viewer.shadows=e}},{key:"fxaa",get:function(){return this._scene.postProcessStages.fxaa.enabled},set:function(e){this._scene.postProcessStages.fxaa.enabled=e}},{key:"resolution",get:function(){return this._viewer.resolutionScale},set:function(e){e=Number.isNaN(e)?1:e,e=Cesium.Math.clamp(e,.1,2),this._viewer.resolutionScale=e}},{key:"light",get:function(){return this._viewer.scene.globe.atmosphereBrightnessShift},set:function(e){Cesium.PostProcessStageLibrary.isDepthOfFieldSupported(this._viewer.scene)?(e=Number.isNaN(e)?0:e,e=Cesium.Math.clamp(e,-1,1),this._viewer.scene.globe.atmosphereBrightnessShift=e):console.warn("浏览器不支持亮度调节")}},{key:"skyAtmosphere",get:function(){var e=this._viewer.scene.skyAtmosphere;return{hueShift:e.hueShift,saturationShift:e.saturationShift,brightnessShift:e.brightnessShift}}},{key:"atmosphrerLight",set:function(e){var t,n;e&&(t=this._viewer.scene.skyAtmosphere,(n=Cesium.defined)(e.brightnessShift)&&(t.brightnessShift=e.brightnessShift),n(e.hueShift)&&(t.hueShift=e.hueShift),n(e.saturationShift)&&(t.saturationShift=e.saturationShift))}},{key:"fog",get:function(){return g({},this._scene.fog)},set:function(e){var t;e&&((t=Cesium.defined)(e.enabled)&&(this._scene.fog.enabled=e.enabled),t(e.density)&&(e.density=Number.isNaN(e.density)?0:e.density,e.density=Cesium.Math.clamp(e.density,0,.1),this._scene.fog.density=e.density),t(e.minimumBrightness)&&(this._scene.fog.minimumBrightness=e.minimumBrightness),t(e.screenSpaceErrorFactor)&&(this._scene.fog.screenSpaceErrorFactor=e.screenSpaceErrorFactor))}},{key:"sun",get:function(){return this._scene.sun},set:function(e){this._scene.run=e}},{key:"moon",get:function(){return this._scene.moon},set:function(e){this._scene.moon=e}},{key:"mode",get:function(){return this._scene.mode===Cesium.SceneMode.SCENE3D?"3D":this._scene.mode===Cesium.SceneMode.SCENE2D?"2D":this._scene.mode===Cesium.SceneMode.COLUMBUS_VIEW?"2.5D":"unknown"},set:function(e){"3D"===e.toUpperCase()?this._scene.mode=Cesium.SceneMode.SCENE3D:"2D"===e.toUpperCase()?this._scene.mode=Cesium.SceneMode.SCENE2D:"2.5D"===e.toUpperCase()?this._scene.mode=Cesium.SceneMode.COLUMBUS_VIEW:this._scene.mode=Cesium.SceneMode.SCENE3D}}]),t}(),Di={width:ee(document.body).width(),height:ee(document.body).height()},Ni={RectangleSelector:function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c(this,t),this.isDrawing=!1,this._canvasLeft=e.left||0,this._canvasTop=e.top||0,this._width=e.width||Di.width,this._height=e.height||Di.height,this.canvas=document.createElement("canvas"),this.canvas.style.position="fixed",this.canvas.style.zIndex=99,this.canvas.style.left=this._canvasLeft,this.canvas.style.top=this._canvasTop,this.canvas.width=this._width,this.canvas.height=this._height,this.canvas.style.display="none",this._top=this._canvasLeft,this._left=this._canvasTop,this._right=this._canvasLeft+this._width,this._bottom=this._canvasTop+this._height,this._submitEvent=new zn,document.body.appendChild(this.canvas),this.create(),this.option=e}return u(t,[{key:"create",value:function(){var e=this.canvas.getContext("2d");e.clearRect(this._canvasLeft,this._canvasTop,this._width,this._height),this.canvas.width=this._width,e.strokeStyle="red",e.rect(this.left,this.top,this.right-this.left,this.bottom-this.top),e.stroke()}},{key:"createBtn",value:function(){var e=this.bottom+24>ee(document).height()?"".concat(this.bottom-24,"px"):"".concat(this.bottom,"px"),t=document.createElement("i");t.title="确定";var n=document.createElement("i");n.title="取消",t.style.position="fixed",t.style.zIndex=99999,t.style.left="".concat(this.right-48,"px"),t.style.top=e,t.className="iconfont iconsubmit",t.style.color="#1afa29",n.style.position="fixed",n.style.zIndex=99999,n.style.left="".concat(this.right-24,"px"),n.style.top=e,n.className="iconfont iconcancel",n.style.color="red",document.body.appendChild(t),document.body.appendChild(n);var i=this;t.onclick=function(){i.submitHandler()},n.onclick=function(){i.cancelHandler()},this.submit=t,this.cancel=n}},{key:"updateBtnPosition",value:function(){var e;this.submit?(e=this.bottom+24>ee(document).height()?"".concat(this.bottom-24,"px"):"".concat(this.bottom,"px"),this.submit.style.top=e,this.cancel.style.top=e,this.submit.style.left="".concat(this.right-48,"px"),this.cancel.style.left="".concat(this.right-24,"px")):this.createBtn()}},{key:"reset",value:function(){this._left=this._right=this._top=this._bottom=void 0,this.canvas.height=this.canvas.height,this.submit&&(document.body.removeChild(this.submit),this.submit=void 0),this.cancel&&(document.body.removeChild(this.cancel),this.cancel=void 0)}},{key:"on",value:function(){var o=this;o.reset(),this.option.mask&&this.createMask(),this.canvas.style.display="block",this.option.buttonMode&&this.createBtn();function t(e){e.pageX>=o.left?o._right=e.pageX:(o._right=o.left,o._left=e.pageX),e.pageY>=o.top?o._bottom=e.pageY:(o._bottom=o.top,o._top=e.pageY);var t=o.left,n=o.top,i=ee(window).height()-o.bottom,r=ee(window).width()-o.right;ee(o.mask).css("border-left-width","".concat(t,"px")),ee(o.mask).css("border-right-width","".concat(r,"px")),ee(o.mask).css("border-top-width","".concat(n,"px")),ee(o.mask).css("border-bottom-width","".concat(i,"px")),o.create()}function n(){o.isDrawing=!1,o.canvas.style.display="none",ee(o.canvas).off("mousemove"),ee(o.canvas).off("mouseup"),o.option.bottonMode?o.updateBtnPosition():o.submitHandler(),ee(o.canvas).off("mousedown")}ee(this.canvas).on("mousedown",function(e){o.isDrawing=!0,ee(o.canvas).on("mousemove",t),ee(o.canvas).on("mouseup",n),o._left=e.pageX,o._top=e.pageY})}},{key:"submitHandler",value:function(){this.submitEvent.raiseEvent({top:this.top,left:this.left,right:this.right,bottom:this.bottom}),this.mask&&ee(this.mask).remove()}},{key:"cancelHandler",value:function(){var e=new CustomEvent("selector-cancel");document.dispatchEvent(e),this.mask&&ee(this.mask).remove(),this.reset()}},{key:"destroy",value:function(){this.canvas&&(ee(this.canvas).unbind("mousedown"),document.body.removeChild(this.canvas),this.canvas=void 0),this.submit&&(document.body.removeChild(this.submit),this.submit=void 0),this.cancel&&(document.body.removeChild(this.cancel),this.cancel=void 0)}},{key:"createMask",value:function(){var e=document.createElement("div");e.className="pop-layer-class",this.mask=e,ee(document.body).append(e)}},{key:"submitEvent",get:function(){return this._submitEvent}},{key:"left",get:function(){return this._left}},{key:"right",get:function(){return this._right}},{key:"top",get:function(){return this._top}},{key:"bottom",get:function(){return this._bottom}}]),t}()},Oi=function(){l(t,di);var e=v(t);function t(){return c(this,t),e.call(this)}return t}(),Li=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:["mousemove","render"];c(this,n),S(e),this._viewer=e,this._handler=new Cesium.ScreenSpaceEventHandler(e.canvas),this._lastFpsSampleTime=0,this._fpsFrameCount=0,this._msFrameCount=0,this._fps=0,this._ms=0,this._lon=0,this._lat=0,this._height=0,this._alt=0,t.includes("mousemove")&&this.addMousemoveAction(),t.includes("render")&&this.addPostRenderAction()}return u(n,[{key:"addMousemoveAction",value:function(){var i=this;this.removeMousemoveEvent(),this._handler.setInputAction(function(e){var t,n=O.toDegrees(e.endPosition,i._viewer);Cesium.defined(n)&&(i._lon=n.lon,i._lat=n.lat,i._height=n.height,i._alt=void 0,i._viewer.terrainProvider&&(t=Cesium.Cartographic.fromCartesian(Cesium.Cartesian3.fromDegrees(i._lon,i._lat)),Cesium.sampleTerrainMostDetailed(i._viewer.terrainProvider,[t]).then(function(e){i._alt=e[0].height})))},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"removeMousemoveEvent",value:function(){this._handler.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"addPostRenderAction",value:function(){var e=this;this.postRenderFunction=this._viewer.scene.postRender.addEventListener(function(){e.updateFps()})}},{key:"removePostRenderAction",value:function(){this.postRenderFunction&&this.postRenderFunction()}},{key:"destroy",value:function(){this.removeMousemoveEvent(),this.removePostRenderAction(),this._handler.isDestroyed()||this._handler.destroy(),this._handler=void 0,this._viewer=void 0}},{key:"updateFps",value:function(){var e=Cesium.getTimestamp();Cesium.defined(this._lastFpsSampleTime)||(this._lastFpsSampleTime=Cesium.getTimestamp()),Cesium.defined(this.lastMsSampleTime)||(this.lastMsSampleTime=Cesium.getTimestamp()),this._fpsFrameCount++;var t,n=e-this._lastFpsSampleTime;1e3<n&&(t="N/A",t=1e3*this._fpsFrameCount/n||0,this._fps="".concat(t.toFixed(0)," FPS"),this._lastFpsSampleTime=e,this._fpsFrameCount=0),this._msFrameCount++;var i,r=e-this.lastMsSampleTime;200<r&&(i=(r/this._msFrameCount).toFixed(2),this._ms="".concat(i," MS"),this.lastMsSampleTime=e,this._msFrameCount=0)}},{key:"updateHeadingPitchRoll",value:function(){var e=this._viewer;this._heading=e.camera.heading,this._pitch=e.camera.pitch,this._roll=e.camera.roll}},{key:"viewerCenter",value:function(e,t){var n=!(0<arguments.length&&void 0!==e)||e,i=1<arguments.length&&void 0!==t?t:new Cesium.Cartesian3,r=this._viewer,o=r.scene,a=r.camera,s=new Cesium.Cartographic,c=new Cesium.Ray,u=this._viewer;if(o.mode!==Cesium.SceneMode.MORPHING&&(i=Cesium.defined(u.trackedEntity)?u.trackedEntity.position.getValue(u.clock.currentTime,i):(c.origin=a.positionWC,c.direction=a.directionWC,o.globe.pick(c,o,i)),Cesium.defined(i)))return o.mode===Cesium.SceneMode.SCENE2D||o.mode===Cesium.SceneMode.COLUMBUS_VIEW?(i=a.worldToCameraCoordinatesPoint(i,i),n&&(i=o.globe.ellipsoid.cartographicToCartesian(o.mapProjection.unproject(i,s),i))):n||(i=a.worldToCameraCoordinatesPoint(i,i)),i}},{key:"params",get:function(){return{lon:this.lon,lat:this.lat,height:this.height,alt:this.alt,heading:this.heading,pitch:this.pitch,roll:this.roll,fps:this.fps,ms:this.ms}}},{key:"lon",get:function(){return this._lon}},{key:"lat",get:function(){return this._lat}},{key:"height",get:function(){return this._height}},{key:"alt",get:function(){return this._alt}},{key:"heading",get:function(){return Cesium.Math.toDegrees(this._heading)}},{key:"pitch",get:function(){return Cesium.Math.toDegrees(this._pitch)}},{key:"roll",get:function(){return Cesium.Math.toDegrees(this._roll)}},{key:"fps",get:function(){return this._fps}},{key:"ms",get:function(){return this._ms}},{key:"center",get:function(){return this.viewerCenter()}}]),n}(),Ri={Z:1,ZR:2,X:3,XR:4,Y:5,YR:6};Object.freeze(Ri);var Ii=function(){function i(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};c(this,i),S(e),this._viewer=e,this._model=t,this._options=n,this._type=n.type,this._distance=n.distance,this._clippingPlanes=void 0}return u(i,[{key:"createPlane",value:function(e,t,n){var i,r,o=0<arguments.length&&void 0!==e?e:this.type,a=1<arguments.length&&void 0!==t?t:this.distance;switch((!(2<arguments.length&&void 0!==n)||n)&&this.clear(),o){case Ri.Z:i=[new Cesium.ClippingPlane(new Cesium.Cartesian3(0,0,1),a)];break;case Ri.ZR:i=[new Cesium.ClippingPlane(new Cesium.Cartesian3(0,0,-1),a)];break;case Ri.X:i=[new Cesium.ClippingPlane(new Cesium.Cartesian3(1,0,0),a)];break;case Ri.XR:i=[new Cesium.ClippingPlane(new Cesium.Cartesian3(-1,0,0),a)];break;case Ri.Y:i=[new Cesium.ClippingPlane(new Cesium.Cartesian3(0,1,0),a)];break;case Ri.YR:i=[new Cesium.ClippingPlane(new Cesium.Cartesian3(0,-1,0),a)]}this._clippingPlanes?this._clippingPlanes.add(i[0]):(r=new Cesium.ClippingPlaneCollection({planes:i,edgeWidth:this._options.edgeWidth||0}),this._clippingPlanes=r),this.model.clippingPlanes=this._clippingPlanes}},{key:"clear",value:function(){this.model.clippingPlanes&&(this.model.clippingPlanes.enabled=!1),this.planes&&(this.planes.destroy(),delete this._clippingPlanes,this.model.clippingPlanes=void 0)}},{key:"destroy",value:function(){this.clear(),this._viewer.scene.primitives.remove(this.axis),this._viewer=void 0,this.axis.destroy()}},{key:"update",value:function(){if(this.planes)for(var e=0;e<this.planes.length;e++){this.planes.get(e).distance=this.distance}}},{key:"createAxis",value:function(){var e=Cesium.MeshVisualizer,t=this._options.axis,n=new e({modelMatrix:this._model.modelMatrix,up:{z:1},referenceAxisParameter:t,showReference:this._options.showAxis||!1});this._viewer.scene.primitives.add(n),this.axis=n}},{key:"updateAxis",value:function(){this.axis&&this._viewer.scene.primitives.remove(this.axis),this.createAxis()}},{key:"model",get:function(){return this._model},set:function(e){this._model=e}},{key:"planes",get:function(){return this._clippingPlanes}},{key:"type",get:function(){return this._type},set:function(e){this._type=e,this.createPlane(e)}},{key:"distance",get:function(){return this._distance},set:function(e){e=e||0,this._distance=e,this.update()}},{key:"showAxis",get:function(){return this._showAxis},set:function(e){this._showAxis=e,this.axis.showReference=e}}]),i}();function ji(e){return new Hi(e instanceof Uint8Array?e:new Uint8Array(e))}function Hi(e){this._array=e}Hi.prototype.read=function(){var e=this._array;return this._array=null,Promise.resolve(e?{done:!1,value:e}:{done:!0,value:void 0})},Hi.prototype.cancel=function(){return this._array=null,Promise.resolve()};var Bi=function(e){return fetch(e).then(function(e){return e.body&&e.body.getReader?e.body.getReader():e.arrayBuffer().then(ji)})},Gi=function(i){return new Promise(function(e,t){var n=new XMLHttpRequest;n.responseType="arraybuffer",n.onload=function(){e(ji(n.response))},n.onerror=t,n.ontimeout=t,n.open("GET",i,!0),n.send()})};function Ui(e){return("function"==typeof fetch?Bi:Gi)(e)}function Fi(e){return"function"==typeof e.read?e:e.getReader()}var qi=new Uint8Array(0);function Wi(e){return"function"==typeof e.slice?e:new Vi("function"==typeof e.read?e:e.getReader())}function Vi(e){this._source=e,this._array=qi,this._index=0}Vi.prototype.read=function(){var t=this,n=t._array.subarray(t._index);return t._source.read().then(function(e){return t._array=qi,t._index=0,e.done?0<n.length?{done:!1,value:n}:{done:!0,value:void 0}:{done:!1,value:function(e,t){if(!e.length)return t;if(!t.length)return e;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(n,e.value)}})},Vi.prototype.slice=function(n){if((n|=0)<0)throw new Error("invalid length");var i=this,r=this._array.length-this._index;if(this._index+n<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=n));var o=new Uint8Array(n);return o.set(this._array.subarray(this._index)),function t(){return i._source.read().then(function(e){return e.done?(i._array=qi,(i._index=0)<r?o.subarray(0,r):null):r+e.value.length>=n?(i._array=e.value,i._index=n-r,o.set(e.value.subarray(0,n-r),r),o):(o.set(e.value,r),r+=e.value.length,t())})}()},Vi.prototype.cancel=function(){return this._source.cancel()};function zi(e){return!(e=e.trim())||isNaN(e=+e)?null:e}function Yi(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Xi(n,i){return(n=Wi(n)).slice(32).then(function(e){var t=Yi(e);return n.slice(t.getUint16(8,!0)-32).then(function(e){return new Ji(n,i,t,Yi(e))})})}var Zi={B:zi,C:function(e){return e.trim()||null},D:function(e){return new Date(+e.substring(0,4),e.substring(4,6)-1,+e.substring(6,8))},F:zi,L:function(e){return!/^[nf]$/i.test(e)&&(!!/^[yt]$/i.test(e)||null)},M:zi,N:zi};function Ji(e,t,n,i){this._source=e,this._decode=t.decode.bind(t),this._recordLength=n.getUint16(10,!0),this._fields=[];for(var r=0;13!==i.getUint8(r);r+=32){for(var o=0;o<11&&0!==i.getUint8(r+o);++o);this._fields.push({name:this._decode(new Uint8Array(i.buffer,i.byteOffset+r,o)),type:String.fromCharCode(i.getUint8(r+11)),length:i.getUint8(r+16)})}}var Qi=Ji.prototype;Qi.read=function(){var i=this,r=1;return i._source.slice(i._recordLength).then(function(n){return n&&26!==n[0]?{done:!1,value:i._fields.reduce(function(e,t){return e[t.name]=Zi[t.type](i._decode(n.subarray(r,r+=t.length))),e},{})}:{done:!0,value:void 0}})},Qi.cancel=function(){return this._source.cancel()};function $i(e){for(var t=40,n=e.getInt32(36,!0),i=new Array(n),r=0;r<n;++r,t+=16)i[r]=[e.getFloat64(t,!0),e.getFloat64(t+8,!0)];return{type:"MultiPoint",coordinates:i}}function Ki(e){return{type:"Point",coordinates:[e.getFloat64(4,!0),e.getFloat64(12,!0)]}}function er(e){for(var t=44,n=e.getInt32(36,!0),i=e.getInt32(40,!0),r=new Array(n),o=new Array(i),a=[],s=[],c=0;c<n;++c,t+=4)r[c]=e.getInt32(t,!0);for(c=0;c<i;++c,t+=16)o[c]=[e.getFloat64(t,!0),e.getFloat64(t+8,!0)];return r.forEach(function(e,t){var n=o.slice(e,r[t+1]);!function(e){if((t=e.length)<4)return;var t,n=0,i=e[t-1][1]*e[0][0]-e[t-1][0]*e[0][1];for(;++n<t;)i+=e[n-1][1]*e[n][0]-e[n-1][0]*e[n][1];return 0<=i}(n)?s.push(n):a.push([n])}),s.forEach(function(t){a.some(function(e){if(function(e,t){var n,i=-1,r=t.length;for(;++i<r;)if(n=tr(e,t[i]))return 0<n;return}(e[0],t))return e.push(t),!0})||a.push([t])}),1===a.length?{type:"Polygon",coordinates:a[0]}:{type:"MultiPolygon",coordinates:a}}function tr(e,t){for(var n=t[0],i=t[1],r=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var c=e[o],u=c[0],l=c[1],h=e[s],d=h[0],p=h[1];if(nr(c,h,t))return 0;i<l!=i<p&&n<(d-u)*(i-l)/(p-l)+u&&(r=-r)}return r}function nr(e,t,n){var i=n[0]-e[0],r=n[1]-e[1];if(0==i&&0==r)return 1;var o=t[0]-e[0],a=t[1]-e[1];if(0!=o||0!=a){var s=(i*o+r*a)/(o*o+a*a);return!(s<0||1<s)&&(0==s||1==s||s*o==i&&s*a==r)}}function ir(e){for(var t=44,n=e.getInt32(36,!0),i=e.getInt32(40,!0),r=new Array(n),o=new Array(i),a=0;a<n;++a,t+=4)r[a]=e.getInt32(t,!0);for(a=0;a<i;++a,t+=16)o[a]=[e.getFloat64(t,!0),e.getFloat64(t+8,!0)];return 1===n?{type:"LineString",coordinates:o}:{type:"MultiLineString",coordinates:r.map(function(e,t){return o.slice(e,r[t+1])})}}function rr(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}function or(t){return(t=Wi(t)).slice(100).then(function(e){return new sr(t,Yi(e))})}var ar={0:function(){return null},1:Ki,3:ir,5:er,8:$i,11:Ki,13:ir,15:er,18:$i,21:Ki,23:ir,25:er,28:$i};function sr(e,t){var n=t.getInt32(32,!0);if(!(n in ar))throw new Error("unsupported shape type: "+n);this._source=e,this._type=n,this._index=0,this._parse=ar[n],this.bbox=[t.getFloat64(36,!0),t.getFloat64(44,!0),t.getFloat64(52,!0),t.getFloat64(60,!0)]}var cr=sr.prototype;function ur(){}cr.read=function(){var o=this;return++o._index,o._source.slice(12).then(function(n){if(null==n)return{done:!0,value:void 0};var i=Yi(n);function r(){var e=2*i.getInt32(4,!1)-4,t=i.getInt32(8,!0);return e<0||t&&t!==o._type?function t(){return o._source.slice(4).then(function(e){return null==e?{done:!0,value:void 0}:((i=Yi(n=rr(n.slice(4),e))).getInt32(0,!1)!==o._index?t:r)()})}():o._source.slice(e).then(function(e){return{done:!1,value:t?o._parse(Yi(rr(n.slice(8),e))):null}})}return r()})},cr.cancel=function(){return this._source.cancel()};var lr=function(e,t,n){return Promise.all([or(e),t&&Xi(t,n)]).then(function(e){return new hr(e[0],e[1])})};function hr(e,t){this._shp=e,this._dbf=t,this.bbox=e.bbox}var dr=hr.prototype;function pr(e,t,r){return"string"==typeof t?(/\.dbf$/.test(t)||(t+=".dbf"),t=Ui(t)):t instanceof ArrayBuffer||t instanceof Uint8Array?t=ji(t):null!=t&&(t=Fi(t)),e="string"==typeof e?(/\.shp$/.test(e)||(e+=".shp"),void 0===t&&(t=Ui(e.substring(0,e.length-4)+".dbf").catch(function(){})),Ui(e)):(e instanceof ArrayBuffer||e instanceof Uint8Array?ji:Fi)(e),Promise.all([e,t]).then(function(e){var t=e[0],n=e[1],i="windows-1252";return r&&null!=r.encoding&&(i=r.encoding),lr(t,n,n&&new TextDecoder(i))})}dr.read=function(){return Promise.all([this._dbf?this._dbf.read():{value:{}},this._shp.read()]).then(function(e){var t=e[0],n=e[1];return n.done?n:{done:!1,value:{type:"Feature",properties:t.value,geometry:n.value}}})},dr.cancel=function(){return Promise.all([this._dbf&&this._dbf.cancel(),this._shp.cancel()]).then(ur)};var fr={open:pr,openShp:function(e,t){return e="string"==typeof e?(/\.shp$/.test(e)||(e+=".shp"),Ui(e)):(e instanceof ArrayBuffer||e instanceof Uint8Array?ji:Fi)(e),Promise.resolve(e).then(or)},openDbf:function(e,t){var n="windows-1252";return t&&null!=t.encoding&&(n=t.encoding),n=new TextDecoder(n),e="string"==typeof e?(/\.dbf$/.test(e)||(e+=".dbf"),Ui(e)):(e instanceof ArrayBuffer||e instanceof Uint8Array?ji:Fi)(e),Promise.resolve(e).then(function(e){return Xi(e,n)})},read:function(e,t,n){return pr(e,t,n).then(function(n){var i=[],r={type:"FeatureCollection",features:i,bbox:n.bbox};return n.read().then(function e(t){return t.done?r:(i.push(t.value),n.read().then(e))})})}};e.ArrowPolyline=n,e.CVT=O,e.Cartometry=E,e.CesiumProError=T,e.CircleScan=function e(t){c(this,e),this._viewer=t},e.ClipPlaneType=Ri,e.CursorTip=N,e.Dataloader=R,e.DraggableElement=Fn,e.EarthRotation=Wn,e.Event=zn,e.Graphic=li,e.GraphicManager=Ci,e.GraphicType=$n,e.GroundSkyBox=xi,e.Helper=di,e.Manager=fi,e.MarkerManager=Ai,e.ModelClipPlane=Ii,e.RadarScan={},e.SceneSetting=Pi,e.TranslationHelper=Oi,e.VERSION="v0.1.0",e.ViewerParams=Li,e.checkViewer=S,e.createEarth=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={animation:!1,timeline:!1,geocoder:!1,homeButton:!1,navigationHelpButton:!1,baseLayerPicker:!1,fullscreenElement:"cesiumContainer",fullscreenButton:!1,shouldAnimate:!0,infoBox:!1,selectionIndicator:!1,sceneModePicker:!1,shadows:!1,imageryProvider:new Cesium.UrlTemplateImageryProvider({url:"http://mt1.google.cn/vt/lyrs=s&hl=zh-CN&x={x}&y={y}&z={z}&s=Gali"}),contextOptions:{webgl:{alpha:!0,depth:!1,stencil:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0,failIfMajorPerformanceCaveat:!0},allowTextureFilterAnisotropic:!0}};return new Cesium.Viewer(e,g(g({},n),t))},e.dateFormat=function(e,t){for(var n={"y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()},i=0,r=Object.keys(n);i<r.length;i++){var o,a=r[i];(o=new RegExp("(".concat(a,")")).exec(e))&&(e=e.replace(o[1],1===o[1].length?n[a]:n[a].padStart(o[1].length,"0")))}return e},e.depthTest=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e&&(e.depthTestAgainstTerrain=t)},e.errorCatch=function(e,t){e.response?t(e.response.data):e.request?t(e.request):t(e.message)},e.filesaver=pi,e.flyTo=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{destination:Yn},n=t.destination,i=t.orientation;if(S(e),!Cesium.defined(n))return!1;var r=e.camera,o=r.positionCartographic.height,a=O.toDegrees(n,e),s=Cesium.defined(t.duration1)?t.duration1:Cesium.defined(t.duration)?t.duration:3,c=Cesium.defined(t.duration2)?t.duration2:Cesium.defined(t.duration)?t.duration:3,u=Cesium.defined(t.duration3)?t.duration3:Cesium.defined(t.duration)?t.duration:3,l=Cesium.Cartesian3.fromDegrees(a.lon,a.lat,o),h=n;return new Promise(function(e){r.flyTo({destination:l,duration:s,complete:function(){r.flyTo({destination:h,duration:c,complete:function(){Cesium.defined(i)?r.flyTo({destination:h,duration:u,orientation:i,complete:function(){e()}}):e()}})}})})},e.getScale=function(e){S(e);var t=Cesium.getTimestamp(),n=e.scene;if(!(t<Qn+250)){Qn=t;var i=n.canvas.clientWidth,r=n.canvas.clientHeight,o=n.camera.getPickRay(new Jn(i/2|0,r-1)),a=n.camera.getPickRay(new Jn(1+i/2|0,r-1)),s=n.globe,c=s.pick(o,n),u=s.pick(a,n);if(Zn(c)&&Zn(u)){var l=s.ellipsoid.cartesianToCartographic(c),h=s.ellipsoid.cartesianToCartographic(u),d=new Cesium.EllipsoidGeodesic;return d.setEndPoints(l,h),d.surfaceDistance}}},e.jquery=ee,e.libgif=D,e.logo=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];ee(".cesium-widget-credits").empty(),"string"==typeof e&&ee(".cesium-widget-credits").append("<img src='".concat(e,"'/>"))},e.pointVisibilityOnEarth=ki,e.saveCurrentViewerImage=function(e,t){e.render(),t&&""!==t||(t="".concat((new Date).toLocaleString(),".png"));var n=t.split(".")[1];Mi(t,e.scene.canvas.toDataURL("image/%s"%n))},e.selector=Ni,e.shapefile=fr,e.uuid=x,Object.defineProperty(e,"__esModule",{value:!0})});
