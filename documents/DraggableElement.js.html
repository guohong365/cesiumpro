<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: DraggableElement.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: DraggableElement.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
 * 让Element可以用鼠标拖动
 */
import $ from '../thirdParty/jquery';
/**
 *
 * @param {String} container 要移到的元素的选择器
 * @param {String} [target=container] 监听鼠标事件的元素，一般是标题栏
 * @example
 * draggableElement('#tool-panel')
 * draggableElement('#tool-panel','.tool-header-class')
 */
class DraggableElement {
  constructor(container, target = container) {
    if (!$(container)) {
      throw new Error('请指定要操作的元素');
    }
    if (!target) {
      target = container;
    }
    this._target = target;
    this._container = container;
    const self = this;
    $(self.target).mousedown((
      e, // e鼠标事件
    ) => {
      $(self.target).css('cursor', 'move'); // 改变鼠标指针的形状
      // let offset = $("#" + container).offset(); //DIV在页面的位置
      const offset = $(self.container).position(); // DIV在页面的位置
      const x = e.pageX - offset.left; // 获得鼠标指针离DIV元素左边界的距离
      const y = e.pageY - offset.top; // 获得鼠标指针离DIV元素上边界的距离

      $(document).bind('mousemove', (
        ev, // 绑定鼠标的移动事件，因为光标在DIV元素外面也要有效果，所以要用doucment的事件，而不用DIV元素的事件
      ) => {
        $(self.target).css('cursor', 'move');
        $(self.container).stop(); // 加上这个之后
        const _x = ev.pageX - x; // 获得X轴方向移动的值
        const _y = ev.pageY - y; // 获得Y轴方向移动的值
        $(self.container).animate({ left: `${_x}px`, top: `${_y}px` }, 10);
      });
    });
    $(document).mouseup(function () {
      $(self.target).css('cursor', 'default');
      $(this).unbind('mousemove');
    });
  }

  /**
   * 触发事件的元素，#id,.class
   */
  get target() {
    return this._target;
  }

  set target(v) {
    this._target = v;
  }

  /**
   * 可拖拽的元素，#id,.class
   */
  get container() {
    return this._container;
  }

  set container(v) {
    this._container = v;
  }

  destroy() {
    $(this.target).unbind('mousedown');
    this._container = undefined;
    this._target = undefined;
  }
}
export default DraggableElement;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-GraphicType.html">GraphicType</a></li></ul><h3>Classes</h3><ul><li><a href="ArrowPolyline.html">ArrowPolyline</a></li><li><a href="BaseGraphic.html">BaseGraphic</a></li><li><a href="Cartometry.html">Cartometry</a></li><li><a href="CesiumBillboard.html">CesiumBillboard</a></li><li><a href="CesiumLabel.html">CesiumLabel</a></li><li><a href="CesiumModel.html">CesiumModel</a></li><li><a href="CesiumPoint.html">CesiumPoint</a></li><li><a href="CesiumPolygon.html">CesiumPolygon</a></li><li><a href="CesiumPolyline.html">CesiumPolyline</a></li><li><a href="CesiumProError.html">CesiumProError</a></li><li><a href="CursorTip.html">CursorTip</a></li><li><a href="CVT.html">CVT</a></li><li><a href="Dataloader.html">Dataloader</a></li><li><a href="DraggableElement.html">DraggableElement</a></li><li><a href="EarthRotation.html">EarthRotation</a></li><li><a href="Event.html">Event</a></li><li><a href="GraphicManager.html">GraphicManager</a></li><li><a href="GroundSkyBox.html">GroundSkyBox</a></li><li><a href="Helper.html">Helper</a></li><li><a href="MarkerManager.html">MarkerManager</a></li><li><a href="RectangleSelector.html">RectangleSelector</a></li><li><a href="SceneSetting.html">SceneSetting</a></li></ul><h3>Global</h3><ul><li><a href="global.html#checkViewer">checkViewer</a></li><li><a href="global.html#createEarth">createEarth</a></li><li><a href="global.html#depthTest">depthTest</a></li><li><a href="global.html#flyTo">flyTo</a></li><li><a href="global.html#getScale">getScale</a></li><li><a href="global.html#logo">logo</a></li><li><a href="global.html#pointVisibilityOnEarth">pointVisibilityOnEarth</a></li><li><a href="global.html#saveCurViewerImage">saveCurViewerImage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Thu Jun 04 2020 16:20:35 GMT+0800 (GMT+08:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
