<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: EarthRotation.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: EarthRotation.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
 * 地球自转模拟
 */
let viewer;
function icrf() {
  if (!viewer || viewer.scene.mode !== Cesium.SceneMode.SCENE3D) {
    return;
  }
  const icrfToFixed = Cesium.Transforms.computeIcrfToFixedMatrix(
    viewer.clock.currentTime,
  );
  if (Cesium.defined(icrfToFixed)) {
    const offset = Cesium.Cartesian3.clone(viewer.camera.position);
    const transform = Cesium.Matrix4.fromRotationTranslation(icrfToFixed);
    viewer.camera.lookAtTransform(transform, offset);
  }
}
const start = function (cesiumViewer, option = { multiplier: 1 }) {
  if (viewer) {
    return;
  }
  viewer = cesiumViewer;
  viewer.scene.postUpdate.addEventListener(icrf);
  if (viewer.clock) {
    const keys = Object.keys(option);
    for (const k of keys) {
      viewer.clock[k] = option[k];
    }
  }
};
const stop = function () {
  if (!viewer) {
    return;
  }
  viewer.clock.multiplier = 1;
  viewer.scene.postUpdate.removeEventListener(icrf);
  viewer = undefined;
};
/**
 * 地球自转模拟
 */
class EarthRotation {
  /**
   * 开始自转
   * @param {Viewer} cesiumViewer Cesium Viewer对象
   * @param {Object} option Cesium.Colck的所有可用属性
   * @param {Number} [option.multiplier=1] 时钟的倍数
   */
  static start(cesiumViewer, option = { multiplier: 10 }) {
    start(cesiumViewer, option);
  }

  /**
   * 停止自转
   */
  static stop() {
    stop();
  }
}
export default EarthRotation;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-GraphicType.html">GraphicType</a></li></ul><h3>Classes</h3><ul><li><a href="ArrowPolyline.html">ArrowPolyline</a></li><li><a href="BaseGraphic.html">BaseGraphic</a></li><li><a href="Cartometry.html">Cartometry</a></li><li><a href="CesiumBillboard.html">CesiumBillboard</a></li><li><a href="CesiumLabel.html">CesiumLabel</a></li><li><a href="CesiumModel.html">CesiumModel</a></li><li><a href="CesiumPoint.html">CesiumPoint</a></li><li><a href="CesiumPolygon.html">CesiumPolygon</a></li><li><a href="CesiumPolyline.html">CesiumPolyline</a></li><li><a href="CesiumProError.html">CesiumProError</a></li><li><a href="CursorTip.html">CursorTip</a></li><li><a href="CVT.html">CVT</a></li><li><a href="Dataloader.html">Dataloader</a></li><li><a href="DraggableElement.html">DraggableElement</a></li><li><a href="EarthRotation.html">EarthRotation</a></li><li><a href="Event.html">Event</a></li><li><a href="GraphicManager.html">GraphicManager</a></li><li><a href="GroundSkyBox.html">GroundSkyBox</a></li><li><a href="Helper.html">Helper</a></li><li><a href="MarkerManager.html">MarkerManager</a></li><li><a href="RectangleSelector.html">RectangleSelector</a></li><li><a href="SceneSetting.html">SceneSetting</a></li></ul><h3>Global</h3><ul><li><a href="global.html#checkViewer">checkViewer</a></li><li><a href="global.html#createEarth">createEarth</a></li><li><a href="global.html#depthTest">depthTest</a></li><li><a href="global.html#flyTo">flyTo</a></li><li><a href="global.html#getScale">getScale</a></li><li><a href="global.html#logo">logo</a></li><li><a href="global.html#pointVisibilityOnEarth">pointVisibilityOnEarth</a></li><li><a href="global.html#saveCurViewerImage">saveCurViewerImage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Thu Jun 04 2020 16:20:35 GMT+0800 (GMT+08:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
