<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script type="text/javascript" src="../thirdParty/CesiumUnminified/Cesium.js">

    </script>
    <link href="../thirdParty/CesiumUnminified/Widgets/Widgets.css" rel="stylesheet" />
    <link href="../build/CesiumPro/assets/core.css" rel="stylesheet" />

    <title>Hello World</title>
    <style type="text/css">
      html,
      body {
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      #map {
        width: 100%;
        height: 100%;
        position: absolute;
      }
    </style>
  </head>

  <body>
    <div id="map">

    </div>
    <script type="module">
      import {
        createViewer,
        logo,
        CartometryManager,
        CartometryType,
        ModelAttachVector,
        DataLoader,
        ViewerParams
      } from '../build/CesiumProUnminified/CesiumPro.esm.js'
      const viewer = createViewer('map');
      logo()

      function formatText(v) {
        return '' + v
      }
      // const tileset = new Cesium.Cesium3DTileset({
      //   url: "http://localhost:8080/模型/油汽站/tileset.json"
      // })
      // tileset.readyPromise.then(e => {
      //   viewer.scene.primitives.add(e);
      //   viewer.flyTo(e);
      // })
      const tileset = DataLoader.loadTileset(viewer, {
        url: "http://localhost:8080/模型/油汽站/tileset.json",
      }, {
        position: Cesium.Cartesian3.fromDegrees(101.27059, 42.57557),
        debug: true
      })
      tileset.readyPromise.then(e => {
        // viewer.scene.primitives.add(e);
        viewer.flyTo(e);
      })
      const vp = new ViewerParams(viewer, true);
      const m = new CartometryManager({
        viewer,
        autoDepthTest: true,
        formatText,
        mode: CartometryType.SPACE_AREA,
        auxiliaryLineMaterial: Cesium.Color.GREEN,
        auxiliaryGeometry: {
          angle: false,
          distance: true
        },
        nodeMode: {
          distance: false
        }
      });
      window.a = new ModelAttachVector({
        viewer,
        vectorResource: './ck.geojson',
        material: Cesium.Color.GOLD.withAlpha(0.5),
        key: "名称",
        mode: 'preview',
        highlightMaterial: Cesium.Color.AQUA.withAlpha(0.2)
      })
      window.m = m;
      // m.surfaceDistance();
    </script>
  </body>

</html>